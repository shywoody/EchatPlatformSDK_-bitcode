!function(e){function t(t){for(var n,a,r=t[0],l=t[1],c=t[2],d=0,f=[];d<r.length;d++)a=r[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);f.length;)f.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var e,t=0;t<s.length;t++){for(var i=s[t],n=!0,a=1;a<i.length;a++){var l=i[a];0!==o[l]&&(n=!1)}n&&(s.splice(t--,1),e=r(r.s=i[0]))}return e}var n={},a={3:0},o={3:0},s=[];function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.e=function(e){var t=[];a[e]?t.push(a[e]):0!==a[e]&&{1:1}[e]&&t.push(a[e]=new Promise((function(t,i){for(var n=({1:"emoji"}[e]||e)+".css",o=r.p+n,s=document.getElementsByTagName("link"),l=0;l<s.length;l++){var c=(u=s[l]).getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===o))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){var u;if((c=(u=d[l]).getAttribute("data-href"))===n||c===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],f.parentNode.removeChild(f),i(s)},f.href=o,document.getElementsByTagName("head")[0].appendChild(f)})).then((function(){a[e]=0})));var i=o[e];if(0!==i)if(i)t.push(i[2]);else{var n=new Promise((function(t,n){i=o[e]=[t,n]}));t.push(i[2]=n);var s,l=document.createElement("script");l.charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.src=function(e){return r.p+""+({1:"emoji"}[e]||e)+".chunk.js"}(e);var c=new Error;s=function(t){l.onerror=l.onload=null,clearTimeout(d);var i=o[e];if(0!==i){if(i){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",c.name="ChunkLoadError",c.type=n,c.request=a,i[1](c)}o[e]=void 0}};var d=setTimeout((function(){s({type:"timeout",target:l})}),12e4);l.onerror=l.onload=s,document.head.appendChild(l)}return Promise.all(t)},r.m=e,r.c=n,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="../",r.oe=function(e){throw console.error(e),e};var l=window.webpackJsonp=window.webpackJsonp||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var u=c;s.push([138,0,4]),i()}([function(e,t,i){"use strict";i(140),i(27),i(22),i(11),i(58),i(36),i(37),i(9),i(33),i(1),i(26),i(17),i(5),i(80),i(28),i(112),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(147)),a=s(i(20)),o=s(i(153));function s(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}window.$=n.default,window._$=function(e){return document.getElementById(e)},window._echat0={scrollToBottom:void 0,imgError:void 0,checkImg:function(e){if(window.hotcss){var t=window.hotcss.dpr,i=e.width,n=e.height,a=e.parentNode.clientHeight;e.parentNode.clientWidth/t>i&&a/t>n&&(e.style.width=2*i+"px")}}};var c,d,u,f,h,p,m,g={},v={demo:[{check:function(){},callback:function(){}}]};function b(e){return"[object Array]"===Object.prototype.toString.apply(e)}c={Constants:a.default,bot:/spider|bot/i.test(navigator.userAgent),EchatObjKeyMap:g,SDKNative:!0,SDK:!0,dji:!1,mini:!1,windowType:void 0,needHttps:"https:"==location.protocol||"file:"==location.protocol?"https:":"",subMap:{},eventMap:{},replaceHtml:function(e){return e&&(e+"").replace(/<(?:.|\s)*?>/gi,"").substring(0,100)},addEventPoint:function(e,t){var i;if("function"==typeof t)return(i=v[e]||[]).push({once:!1,check:function(){return!0},callback:t}),void(v[e]=i);e&&"string"==typeof e&&t&&t.check&&"function"==typeof t.check&&(t.callback&&"function"!=typeof t.callback||(i=v[e]||[],!1!==t.once&&(t.once=!0),i.push(t),v[e]=i))},triggerEventOnPoint:function(e){var t,i=arguments,n=this,a=v[e];a&&0!=a.length&&(a=a.filter((function(e){var a=[];for(t=1;t<i.length;t++)a.push(i[t]);return!e.check||!e.check.apply(n,a)||(e.callback&&e.callback.apply(n,a),!e.once)})),v[e]=a)},subscriber:function(e){this.subMap={},this.eventMap={},g[e||this.KEY]=this,this.setSub=function(e){this.subMap[e]=e},this.removeSub=function(e){delete this.subMap["string"==typeof e?e:e.KEY]},this.publish=function(e){var t,i,n,a,o,s=this.subMap;for(i in s)if((n=g[i])&&n.eventMap&&n.eventMap[e]&&b(a=n.eventMap[e]))for(o=0;o<a.length;o++)t=a[o].apply(n,arguments);return t},this.subscribe=function(e,t){this.eventMap[e]?this.eventMap[e].push(t):this.eventMap[e]=[t]},this.unSubscribeAll=function(){this.eventMap={}},this.unSubscribe=function(e){if(b(e))for(var t=0;t<e.length;t++)delete this.eventMap[e[t]];else delete this.eventMap[e]}},isArray:b,getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=location.search.substr(1).match(t);if(null!=i)return decodeURIComponent(i[2])},escapeRegExp:(f=/[\\^$.*+?()[\]{}|]/g,h=new RegExp(f.source),function(e){return e&&h.test(e)?e.replace(f,"\\$&"):e}),addMapParams:function(e){var t,i="";for(t in e)i+="&"+t+"="+encodeURIComponent(e[t]||"");return i},getQueryParams:function(e){var t,i,n,a,o,s={};for("string"!=typeof e&&(e=location.search),-1!=e.indexOf("#")&&(e=e.substring(0,e.indexOf("#"))),-1!=e.indexOf("?")&&(e=e.substring(e.indexOf("?")+1)),n=(t=e.split("&")).length,a=0;a<n;a++)t[a]&&(i=t[a].split("="))[0]&&i[1]&&(s[i[0]]=decodeURIComponent(i[1]),s[i[0].toLowerCase()]=s[i[0]]);if(s.visEvt)try{(o=JSON.parse(s.visEvt))&&o.eventId&&(s.eventId=o.eventId,s.eventid=o.eventId)}catch(e){}return s},hasStorage:function(){var e;try{if(!window.localStorage)return!1;if(window.localStorage.setItem("echt_test_storage","ok"),!(e=window.localStorage.getItem("echt_test_storage")))return!1}catch(e){return!1}return e&&window.localStorage.removeItem("echt_test_storage"),!0}(),hasCookie:($.cookie("echt_test_cookie","ok"),!!$.cookie("echt_test_cookie")&&($.cookie("echt_test_cookie",null),!0)),getBackground:function(e,t){var i,n=[],a=parseInt(t||100)/100,o=(e||"rgb(255,255,255)").toLocaleLowerCase().trim();if(0==o.indexOf("rgb"))o=o.replace("rgb","rgba").replace(")",","+a+")");else if(0==o.indexOf("#")){for(o=o.replace("#","").split(""),i=0;i<o.length;i++)3==o.length?n.push(parseInt("0x"+o[i]+o[i])):i%2==0&&n.push(parseInt("0x"+o[i]+o[i+1]));n.push(a),o="rgba("+n.join()+")"}return o},init:function(){var e=this,t=this;this.queryParams=this.getQueryParams(),this.companyId=this.getQueryString("companyid"),$.store=this.hasStorage?function(e,t,i){return e?arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(t))||null==t)?(i=$.extend({},i),null==t&&(i.expires=-1),t=String(t),i.session?window.sessionStorage.setItem(e,t):window.localStorage.setItem(e,t),t):(i=t||{}).local?window.localStorage.getItem(e):i.session?window.sessionStorage.getItem(e):window.localStorage.getItem(e)||window.sessionStorage.getItem(e)||$.cookie(e):null}:$.cookie,this.checkDomain=function(e,t){function i(e){return e.replace(/^http[s]?:\/\//i,"")}if(!e||!t||!t.length)return!1;e=i(e);for(var n=0;n<t.length;n++)if(t[n]&&(e==i(t[n])||-1!=e.indexOf(t[n].replace(/[^\.]+./,""))))return!0;return!1};var i,n=navigator.userAgent.toLowerCase();function o(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t||e.type=="mouse"+t}this.Browser={isMobile:/android|iphone|ipod|windowsphone|mobile/i.test(n),isWindows:/windows/i.test(n)||-1!=n.indexOf("win32"),isMac:-1!=n.indexOf("macintosh")||-1!=n.indexOf("mac os x")||-1!=window.navigator.platform.indexOf("Mac"),isIPhone:-1!=n.indexOf("iPhone"),isIOS:!!n.match(/iphone os\s(\d+)/),isAndorid:/android/i.test(n)},this.Browser.isIOS&&(this.Browser.osVersion=+/\d+/.exec(new RegExp("iphone os \\d+").exec(n)||"")),t.Browser.isPC=!this.Browser.isMobile,t.isMobile=this.Browser.isMobile,this.Device={OS:this.Browser.isAndorid?"android":this.Browser.isIPhone?"ios":this.Browser.isWindows?"windows":this.Browser.isMac?"osx":"other"},i=window.mobilePage||-1!=location.href.split("?")[0].indexOf("/visitor/mobile/")&&!g.outerId,t.Browser.isMobile||i||!t.Browser.isPC?t.Device.media=2:t.Device.media=1,this.iScrollParam=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({bounce:!this.Browser.isIOS||this.Browser.osVersion<13},a.default.iScrollParam),this.hasTranslation=this.Browser.isMobile,this.setTransform=function(e,i){var n="translate("+e+"px,"+i+"px)";t.hasTranslation?$(this).css({"-webkit-transform":n,"-o-transfrom":n,"-ms-transform":n,"-moz-transform":n,transform:n}):$(this).css({left:e+"px",top:i+"px"})},d="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){document.selection.empty()},this.pageSlide=function(e,i){$(e).attr("x","0"),$(document).on("mousedown touchstart",e,(function(e){if(!o(e=e||window.event,"down")||((n=e).type.indexOf("mouse")>-1||("touch"==n.pointerType||n.pointerType==n.MSPOINTER_TYPE_TOUCH)&&n.isPrimary)){var n,a,s,r,l=o(e,"down"),c={},u=0,f=$(this),h=this.parentNode.clientWidth,p=h/8,m=parseInt(f.attr("x")||this.offsetLeft)||0,g=this.clientWidth,v=-g+h-20;c.x2=void 0,c.y2=void 0,e=l?e:e.touches&&e.touches[0]||e,c.x1=e.clientX,c.y1=e.clientY,f.removeClass("transition"),a=function(e){e.cancelable=!0,e.preventDefault()},h=parseInt(g/parseInt(g/h)),document.body.addEventListener&&document.body.addEventListener("touchmove",a,{passive:!1}),s=function(e){if(f){e=l?e:e.touches&&e.touches[0]||e,c.x2=e.clientX,c.y2=e.clientY,u=c.x2-c.x1,c.y2-c.y1;var i=u+m;i>20?i=20:i<v&&(i=v),t.setTransform.call(f,i,0),f.attr("x2",i),d(),e.originalEvent&&(e=e.originalEvent),e.cancelable=!0,e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}},r=function(e){if(d(),f){f.addClass("transition");var n,o=0;if(p<Math.abs(u)?u>=p&&m+h<=0?(t.setTransform.call(f,m+h,0),f.attr("x",m+h),o=-1):u<=-p&&m-h+g>h/10?(t.setTransform.call(f,m-h,0),f.attr("x",m-h),o=1):t.setTransform.call(f,m,0):t.setTransform.call(f,m,0),n=i&&i(o),$(document).off("mousemover mousemove touchmove pointermove",s).off("mouseup touchend pointerup",r),f=null,d(),!1===n)return e.stopPropagation&&e.stopPropagation,e.preventDefault&&e.preventDefault(),!1;document.body.removeEventListener&&document.body.removeEventListener("touchmove",a)}},$(document).on("mousemover mousemove touchmove pointermove",s).on("mouseup touchend pointerup",r)}}))},this.getCSSRule=function(e,t,i){if(i=i||window.document,e=e.toLowerCase(),i.styleSheets)for(var n=0;n<i.styleSheets.length;n++){var a=i.styleSheets[n],o=0,s=!1;do{if((s=a.cssRules?a.cssRules[o]:a.rules&&a.rules[o])&&s.selectorText&&s.selectorText.toLowerCase()==e)return"delete"==t?(a.cssRules?a.deleteRule(o):a.removeRule(o),!0):s;o++}while(s)}return!1},this.setCss=function(t,i){if(t&&i){var n=e.getCSSRule(t);if(n)if(e.isArray(i))for(var a=0;a<i.length;a++)i[a].value&&(n.style[i[a].attr]=i[a].value);else i.value&&(n.style[i.attr]=i.value)}},this.killCSSRule=function(e){return this.getCSSRule(e,"delete")},this.addCSSRule=function(e){return document.styleSheets&&(this.getCSSRule(e)||(document.styleSheets[0].addRule?document.styleSheets[0].addRule(e,null,0):document.styleSheets[0].insertRule(e+" { }",0))),this.getCSSRule(e)},this.getBackground=function(e,t){var i,n=[],a=parseInt(t||100)/100,o=(e||"rgb(255,255,255)").toLocaleLowerCase().trim();if(0==o.indexOf("rgb"))o=o.replace("rgb","rgba").replace(")",","+a+")");else if(0==o.indexOf("#")){for(o=o.replace("#","").split(""),i=0;i<o.length;i++)3==o.length?n.push(parseInt("0x"+o[i]+o[i])):i%2==0&&n.push(parseInt("0x"+o[i]+o[i+1]));n.push(a),o="rgba("+n.join()+")"}return o}},base64encode:function(e){var t,i,n,a,o,s,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(n=e.length,i=0,t="";i<n;){if(a=255&e.charCodeAt(i++),i==n){t+=r.charAt(a>>2),t+=r.charAt((3&a)<<4),t+="==";break}if(o=e.charCodeAt(i++),i==n){t+=r.charAt(a>>2),t+=r.charAt((3&a)<<4|(240&o)>>4),t+=r.charAt((15&o)<<2),t+="=";break}s=e.charCodeAt(i++),t+=r.charAt(a>>2),t+=r.charAt((3&a)<<4|(240&o)>>4),t+=r.charAt((15&o)<<2|(192&s)>>6),t+=r.charAt(63&s)}return t},checkHistoryTime:function(e){return(!u||e-u>55e3)&&(u=e,!0)},appendToListMsg:function(e,t){var i,n,a=document.createElement("ul"),o=_$("list_msg"),s=a.childNodes,r=0;if(a.innerHTML=e,t&&(i=_$("list_msg").childNodes[0]),i)for(r=s.length-1;n=s[r--];)1==n.nodeType&&(n=n.cloneNode(!0),o.insertBefore(n,i));else for(;n=s[r++];)1==n.nodeType&&(n=n.cloneNode(!0),o.appendChild(n));s=null,a=null},checkIpt:function(e,t,i,n){var o,s,r=!0,l=!1,c=a.default.validRule;if(1==e.nodeType?o=c[i]||c[e.type]:e.length>1&&e[0]&&(l=!0,e=e[0]),!t&&(e.className.indexOf("req")>-1||$(e).parents(".req").length)){r=!1;s="text"==e.type?lanRes.inputPlease.replace("${inputName}",e.getAttribute("lb")):lanRes.inputPleaseJa2.replace("${inputName}",l?$(e).parents(".entry2-typeline").attr("lb"):e.getAttribute("lb"))}else if(t&&o)if(o.length&&t.length>o.length){r=!1;s="age"==i?lanRes.ageOverLengthJa.replace("${age}",e.getAttribute("lb")):e.getAttribute("lb")+lanRes.overLength}else o.p&&!t.match(o.p)&&(r=!1,s=o.msg||lanRes.visitor170+e.getAttribute("lb"));return n?(n&&n(r),r&&e.style?this.hideTip():s&&this.showTip(s)):r&&e.style?(e.style.borderColor="#FFFFFF",this.hideTip()):(e.style.borderColor="#FF0000",s&&this.showTip(s)),r},HTMLDecode:function(e){var t,i=document.createElement("div");return null!=i.textContent?i.textContent=e:i.innerText=e,t=i.innerHTML,i=null,t}},p=null,m=!1,c.showTip=function(e,t){m||(m=!0,_$("leave_tip")||$("body").append('<div class="leave-tip tiphide" id="leave_tip"><div class="leave-tip-content"><div class="info-warn echat"></div><div class="info-con" id="leave_tip_con"></div></div></div>')),p&&clearTimeout(p),e&&(_$("leave_tip_con").innerHTML=e),_$("leave_tip").className="leave-tip leave-tip-"+(t||"warn"),p=setTimeout((function(){$("#leave_tip").addClass("tiphide")}),3e3)},c.hideTip=function(){this.tipTimer&&clearTimeout(this.tipTimer),$("#leave_tip").addClass("tiphide")},function(){var e=!1,t=c,i=t.isMobile?"touchend":"click";function n(){e=!0,$("body").on(i,".dialog-close",(function(){$(".dialog").remove(),t.publish("_dialogCanel")})).on(i,".img-close",(function(){$(".dialog").remove(),t.publish("_dialogCanel")})).on(i,".dialog-cancel",(function(){$(".dialog").remove(),t.publish("_dialogCanel")})).on(i,".dialog-ok",(function(){$(".dialog").remove(),t.publish("_dialogOk")}))}c.showDialog=function(){var a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=o.tip;function r(e){var n,a=$(".dialog").results,o=$(".dialog-ok").results[0],s=$(".dialog-cancel").results[0],l=$(".dialog-close").results[0];0==a.length?$("body").off(i,r):(n=e.srcElement||e.target,setTimeout((function(){o==n||$.fn.contains(o,n)?(t.publish("_dialogOk"),$(".dialog").remove()):(s==n||$.fn.contains(s,n)||l==n||$.fn.contains(l,n))&&(t.publish("_dialogCanel"),$(".dialog").remove())}),50))}$(".dialog").remove(),t.publish("_dialogCanel"),!e&&n(),s&&(a='<div class="dialog dialog-hide"><div class="dialog-close"><i class="img-close"></i></div><div class="dialog-title">'+lanRes.tip+'</div><div class="dialog-content">'+s+'</div><div class="dialog-btns"><a class="dialog-btn dialog-ok bg0"><div class="bg0 fade-div"></div><span>'+(o.okTip||lanRes.okay)+"</span></a>"+(!1!==o.cancel?'<a class="dialog-btn dialog-cancel bg0 has-fade"><div class="bg0 fade-div"></div><span>'+lanRes.cancel+"</span></a>":"")+"</div></div>",$(_$("index")||"body").append(a),t.unSubscribe(["_dialogOk","_dialogCanel"]),t.subscribe("_dialogOk",(function(){$("body").off(i,r),o.ok&&o.ok(),t.unSubscribe(["_dialogOk","_dialogCanel"])})),t.subscribe("_dialogCanel",(function(){$("body").off(i,r),o.cancel&&o.cancel(),t.unSubscribe(["_dialogOk","_dialogCanel"])})),setTimeout((function(){$("body").on(i,r),$(".dialog").removeClass("dialog-hide")}),10),t.publish("inputBlur",{from:"dialog"}))},c.showAlertDialog=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$(".dialog").remove(),!e&&n();var o,s=a.tip;function r(e){var n=$(".dialog").results,a=$(".dialog-ok").results[0];0==n.length?$("body").off(i,r):setTimeout((function(){(a==e.target||$.fn.contains(a,e.target))&&(t.publish("_dialogOk"),$(".dialog").remove())}),50)}s&&(o='<div class="dialog dialog-hide"><div class="dialog-title">'+lanRes.tip+'</div><div class="dialog-content">'+s+'</div><div class="dialog-btns"><a class="dialog-btn dialog-ok bg0"><div class="bg0 fade-div"></div><span>'+(a.okTip||lanRes.okay)+"</span></a></div></div>",$("body").append(o),$("#mask").show(),t.unSubscribe("_dialogOk"),t.subscribe("_dialogOk",(function(){$("body").off(i,r),a.ok&&a.ok(),t.unSubscribe("_dialogOk"),$("#mask").hide()})),setTimeout((function(){$("body").on(i,r),$(".dialog").removeClass("dialog-hide")}),10))}}(),"undefined"==typeof console&&(window.console={log:function(e){}}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.toString().replace(/(^\s+)|(\s+$)/g,"")}),Date.prototype.format=function(e){var t,i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(t in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[t]:("00"+i[t]).substr((""+i[t]).length)));return e},Function.prototype.before=function(e){var t=this;return function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}},Function.prototype.after=function(e){var t=this;return function(){var i=t.apply(this,arguments);return!1!==i&&(e.apply(this,arguments),i)}},Function.prototype.afterFilter=function(e){var t=this;return function(){var i=t.apply(this,arguments);return!1!==i&&(arguments[arguments.length]=i,arguments.length+=1,e.apply(this,arguments))}},c.init.call(c),Object.assign(c,o.default),c.subscriber.call(c,"util"),c.setSub("util"),c.setSub("handle"),c.setSub("connect");var y=c;t.default=y},,,function(e,t,i){"use strict";i(61),i(63),i(90),i(38),i(64),i(60),i(94),i(58),i(37),i(9),i(1),i(92),i(17),i(80),i(93),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i(0)),a=o(i(20));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var d,u,f={configs:{locationBase:"https://chats.rainbowred.com",config600:{},config649:{},companyVersionType:!1,isVip:!1,busyCanSend:!0,showAvatar:!0,hasSearchInSameScreen:!1,hasInputAssociation:!1,inputMaxLength:2e3,maxRobotLength:100,pageTitle:"",urlListConfig:""},staffInfo:{},msgList:[],statusData:{fisrtChatstatus:-1,canChatNow:0,chatStatus:0,status:0,talkType:0,unreadCount:0,sendMsgNum:0,satisfySubmited:void 0,currentProcess:0,lastMsgTM:0,lasMid:0,isInWorkOrder:!1,isInEntryOrCode:!1,visitorClose:!1,visitorEntryInput:{},captChaToken:void 0},visitorInfo:(u=n.default.getQueryParams(location.search),u.companyId=Number(u.companyId),u),otherData:{emoCodeTolan:{},emoLanToCode:{},emoMap:null,netConnected:!0,websocketStatus:2,hasPreHistory:!0,historyLastRowId:0,doms:{unread:[{name:"#leaveBar",removeCls:"hide",config:function(e){var t=f.statusData;t.isInWorkOrder?$("#leaveBar").html(lanRes.visitor186):2==t.status?$("#leaveBar").html(lanRes.leaveToLeaveBtn):$("#leaveBar").html(lanRes.leaveToChatBtn)}},{name:"#chatText",cls:"hide"}],queue:[{name:"html",removeCls:["entry2","page-leave"]},{name:"body",removeCls:["robot","entry2","page-leave"]},{name:"#leaveBar",cls:"hide"},{name:"#chatText",removeCls:"hide"},{name:"#textInput",attr:{placeholder:""},isHtml:!0,config:function(e){e.attr.placeholder=lanRes.inputPlaceholder2}},{name:"#robotToStaff",cls:"hide"},{name:".robot-staff",removeCls:["robot-staff"],show:!1},{name:".menu-emo",cls:"hide"},{name:".record-switch",cls:"hide"},{name:".tool-menu-item",cls:"hide"},{name:".url-list-item",cls:"hide"},{name:"#busyTipLine",cls:"hide",config:function(e){var t=d.getChatbox();t.busyNotAllowTips&&$("#busyTip").html(t.busyNotAllowTips)}},{name:"#inputSuggest",cls:"hide"},{name:"#inputLengthTip",cls:"hide"},{name:"#entry",cls:"hide"},{name:"#verify",cls:"hide"}],staff:[{name:"html",removeCls:["entry2","page-leave"]},{name:"body",removeCls:["robot","entry2","page-leave"]},{name:"#leaveBar",cls:"hide"},{name:"#chatText",removeCls:"hide"},{name:"#textInput",attr:{placeholder:""},isHtml:!0,config:function(e){e.attr.placeholder=lanRes.inputPlaceholder2}},{name:"#robotToStaff",cls:"hide"},{name:".robot-staff",removeCls:["robot-staff"],show:!1},{name:".menu-emo",removeCls:"hide"},{name:".record-switch",removeCls:"hide"},{name:".tool-menu-item",removeCls:"hide"},{name:".url-list-item",removeCls:"hide"},{name:"#busyTipLine",cls:"hide"},{name:"#inputSuggest",cls:"hide"},{name:"#inputLengthTip",cls:"hide"},{name:"#entry",cls:"hide"},{name:"#verify",cls:"hide"}],leave:[{name:"html",removeCls:["entry2","page-leave"]},{name:"body",removeCls:["robot","entry2","page-leave"]},{name:"#leaveBar",cls:"hide"},{name:"#chatText",removeCls:"hide"},{name:"#textInput",attr:{placeholder:""},isHtml:!0,config:function(e){e.attr.placeholder=lanRes.inputPlaceholder2}},{name:"#robotToStaff",cls:"hide"},{name:".robot-staff",removeCls:["robot-staff"],show:!1},{name:".menu-emo",removeCls:"hide"},{name:".record-switch",removeCls:"hide"},{name:".tool-menu-item",removeCls:"hide"},{name:".url-list-item",removeCls:"hide"},{name:".menu-satisfy",cls:"hide"},{name:".menu-phone",cls:"hide"},{name:"#busyTipLine",cls:"hide"},{name:"#inputSuggest",cls:"hide"},{name:"#inputLengthTip",cls:"hide"},{name:"#entry",cls:"hide"},{name:"#verify",cls:"hide"}],robot:[{name:"html",removeCls:["entry2","page-leave"]},{name:"body",cls:"robot"},{name:"#leaveBar",cls:"hide"},{name:"#chatText",removeCls:"hide"},{name:"#textInput",attr:{placeholder:""},isHtml:!1,config:function(e){var t=f.configs.config649;e.attr.placeholder=t.robotWordsInfo.inputBoxWords||lanRes.inputPlaceholder2}},{name:"#robotToStaff",config:function(){var e=f.configs.config649,t=f.statusData,i=d.getConfig("isVip")?e.sdkVipVisitorRobotConfig||e.webVipVisitorRobotConfig:e.sdkVisitorRobotConfig||e.webVisitorRobotConfig;1==t.status?$("#robotToStaffWord").html(e.robotWordsInfo.onlineButtonWords||lanRes.robotToStaff):$("#robotToStaffWord").html(e.robotWordsInfo.offlineButtonWords||lanRes.robotToStaff),$("#toHumanWords").html(e.robotWordsInfo.toHumanWords||""),"1"!=i.enableManualSwitch?$("#robotToStaff").addClass("limit-hide"):("1"==i.enableLeaveBtnWhenStaffOffline&&2==t.status||"1"==i.enableSwitchBtnWhenStaffOnline&&2!=t.status)&&$("#robotToStaff").removeClass("hide")}},{name:".robot-staff",show:!0},{name:".menu-emo",cls:"hide"},{name:".record-switch",cls:"hide"},{name:".tool-menu-item",cls:"hide"},{name:".url-list-item",removeCls:"hide"},{name:"#busyTipLine",cls:"hide"},{name:"#inputSuggest",cls:"hide"},{name:"#inputLengthTip",cls:"hide"},{name:"#entry",cls:"hide"},{name:"#verify",cls:"hide"}],reset:[{name:"html",removeCls:["entry2","page-leave"]},{name:"body",removeCls:["robot","entry2","page-leave"]},{name:"#leaveBar",cls:"hide"},{name:"#chatText",removeCls:["hide","recording"]},{name:"#textInput",attr:{placeholder:""},isHtml:!0,config:function(e){e.attr.placeholder=lanRes.inputPlaceholder2}},{name:"#robotToStaff",cls:"hide"},{name:".robot-staff",removeCls:["robot-staff"],show:!1},{name:".menu-emo",cls:"hide"},{name:".record-switch",cls:"hide"},{name:".tool-menu-item",cls:"hide"},{name:".url-list-item",cls:"hide"},{name:"#busyTipLine",cls:"hide"},{name:"#inputSuggest",cls:"hide"},{name:"#inputLengthTip",cls:"hide"},{name:"#entry",cls:"hide"},{name:"#verify",cls:"hide"}]}}};window.DataObject=f,window.Util=n.default,d={setConfig:function(e,t){var i=f.configs[e];i&&"object"==c(i)?f.configs[e]=Object.assign(i,t):f.configs[e]=t},setConfigs:function(e){var t,i;for(i in e)(t=f.configs[i])&&"object"==c(t)?f.configs[i]=Object.assign(t,e[i]):f.configs[i]=e[i]},getConfig:function(e){return f.configs[e]},getDataByName:function(e){return f.otherData[e]},setDataByName:function(e,t){f.otherData[e]=t},getVisitorInfo:function(e){return e?f.visitorInfo[e]:f.visitorInfo},setVisitorInfo:function(e){Object.assign(f.visitorInfo,e)},getStaffInfo:function(){return f.staffInfo},setStaffInfo:function(e){Object.assign(f.staffInfo,e)},getMsgList:function(){return f.msgList},getMsgListFirst:function(){return f.msgList[0]},updateMsgList:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"push";if("replace"===t)f.msgList=e;else if("push"==t)n.default.isArray(e)?f.msgList=f.msgList.concat(e):f.msgList.push(e);else if("remove"==t){var i=d.getMsgFromHistory(e.id);i&&f.msgList.splice(i.index,1)}else"unshift"==t&&(n.default.isArray(e)?f.msgList=e.concat(f.msgList):f.msgList.unshift(e))},getStatusData:function(){return f.statusData},getStatusByKey:function(e){return f.statusData[e]},setStatusByKey:function(e,t){return f.statusData[e]=t},setStatusData:function(e){Object.assign(f.statusData,e)},getChatbox:function(){var e,t=f.statusData,i=t.chatStatus,n=t.talkType,o=f.configs.config649;return 2==i&&n==a.default.talkTypeRobot&&(e=o[a.default.chatboxRobotName]||o.robotPhoneChatBox),e||(e=o[a.default.chatboxName]||o.robotSdkChatBox),e},getStaff:function(e){e=e||f.statusData.staffId;var t=f.staffInfo[e]||{},i=f.configs.config649,o=i[a.default.chatboxName]||i[a.default.chatboxRobotName]||{};return f.staffInfo[e]||n.default.publish("sendMessage",{et:153,companyId:f.visitorInfo.companyId,staffIds:e+""}),{staffId:e,phone:t.staffPhone,img:t.staffHead||o.defaultStaffImg,name:t.staffNickName||lanRes.serviceStaff}},getVisitorImg:function(){var e=d.getChatbox();return f.configs.config600.photo||e.defaultVisitorImg},getRobotInfo:function(){var e=f.configs.config649,t=e.robotConfigInfo,i=e.robotExtInfo,n=e[a.default.chatboxRobotName];return{img:t&&t.robotImg||n&&n.defaultStaffImg,name:i&&i.nickName||"小洽"}},formatRouteList:function(){var e,t,i,n,a,o=f.configs.config695.routeEntranceInfo||f.configs.config695.routeEntranceInfoString,s=0,r={},l=o.routeStatusList;if("string"==typeof o&&(o=JSON.parse(o),f.configs.config695.routeEntranceInfo=o),a="string"==typeof o.entranceDetails?JSON.parse(o.entranceDetails):o.entranceDetails,l&&l.length)for(t=0;t<l.length;t++)r[l[t].routeId]=2!=l[t].routeStatus;for(e=0;e<a.length;e++)(n=a[e].routeId)&&(i=a[e],s++,r[n]||(i.icon=i.offlineIcon||i.icon,i.content=i.offlineContent||i.content));return!!s&&(o.entranceDetails=a,o)},getEntryInfo:function(e){var t;if(e=e||f.configs.config649,0==f.statusData.canChatNow)return(t=e.entranceInfo=e.entranceInfo||e.sdkEntranceInfo||e.mobileEntranceInfo)&&1==t.visitorInfoEnable&&(2!=f.statusData.status?1==t.enableOnline:1==t.enableOffline)&&t},getLeaveConfig:function(e){return(e=e||f.configs.config649).offlineBoxInfo||e.offlineSmallBoxInfo||e.mobileOfflineBoxInfo||e.sdkOfflineBoxInfo},getEvaluateAndLimit:function(){var e=f.configs.config649,t={limit:0,enable:!1,config:null},i=e.sdkEvaluateInfo||e.evaluateInfo||e.smallEvaluateInfo||e.mobileEvaluateInfo;return i?(t.enable="1"==i.enable,t.config=i,"1"==i.enableVisitorEvaluateLimit&&(t.limit=parseInt(i.allowEvaluateBaseWords||0)),t):t},checkMatchId:function(e,t){if(!t||!e)return!1;var i=e.data||e;return i.clientFileId==t||i.identityKey==t||i.fileIdentity==t||i.mid==t||i.id==t||i.bridgeMsgId==t||e.et&&e.id==t},getMsgFromHistory:function(e){var t,i,n,a=d.getMsgList();for(n=0;n<a.length;n++)if(d.checkMatchId(a[n],e)){t=a[n],i=n;break}return t?{index:i,msg:t.data||t,originData:t}:null},updateHistoryMsgExt:function(e,t,i){if(e&&t){var n,a=d.getMsgFromHistory(e);if(!a)return!1;(n=a.msg).allExtra?n.allExtra.h5Extra||(n.allExtra.h5Extra={}):n.allExtra={h5Extra:{}},n.allExtra.h5Extra[t]=i}},updateHistoryMsgNativeExt:function(e,t,i){if(e&&t){var n,a=d.getMsgFromHistory(e);if(!a)return!1;(n=a.msg).allExtra?n.allExtra.nativeExtra||(n.allExtra.nativeExtra={}):n.allExtra={nativeExtra:{}},n.allExtra.nativeExtra[t]=i}},updateMsgByIndetity:function(e,t){if(t&&e){var i=d.getMsgFromHistory(e);return!!i&&(i.msg,Object.assign(i.msg,t))}},getStatusConfig:function(e){var t=f.statusData,i=f.configs.config649;return 2!=t.chatStatus?void 0:t.talkType==a.default.talkTypeRobot?i.robotSdkChatBox:i.sdkChatBoxInfo},getApiDomain:function(){var e=f.visitorInfo;return e.apiServerDomain?"https://"+e.apiServerDomain:e.dataHost}},function(){for(var e in d)e.match(/^get/)&&"getDataByName"!=e&&(d[e]=d[e].afterFilter((function(){var e=arguments[arguments.length-1];return"object"==c(e)&&e?n.default.isArray(e)?[].concat(e):r({},e):e})))}(),window.DataService=d;var h=d;t.default=h},,,,,,,function(e,t,i){"use strict";i(38),i(27),i(120),i(11),i(21),i(36),i(9),i(33),i(1),i(26),i(17),i(5),i(28),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.getParamChat=c,t.networkStatusChange=function(e){if(a.default.getDataByName("netConnected")==e)return;a.default.setDataByName("netConnected",e),n.default.publish("changeNetStatus",e)},t.handleNetwok=d,t.getMsgDomId=u,t.addEchatInnerFrameParam=function(e){if(!e)return"";if(-1!=e.indexOf("&echatInnerFrame=1")||-1!=e.indexOf("?echatInnerFrame=1"))return e;var t=e.split("#"),i=t[1]||"",n=t[0],a=-1==n.indexOf("?")?0:1;return n+(a?"&":"?")+"echatInnerFrame=1"+(i?"#":"")+i},t.addFixedParam=function(e){if(!e||!a.default.getConfig("echatSourceTagEnable")||e.match(/^(mailto|tel|javascript):/i))return e||"";var t,i=new RegExp("(^|&)echatSourceTag=([^&]*)(&|$)","i"),o=f(e,"?"),s="echatSourceTag="+encodeURIComponent((r=c(),l=a.default.getStaff(),n.default.addMapParams({staffId:l.staffId,staffName:l.name,media:r.media,companyId:r.companyId,talkId:r.talkId,echatTag:r.echatTag,visitorId:r.visitorId,country:r.country,province:r.province,keyword:r.keyword})||""));var r,l;if(t=f(o[1]||o[0],"#"),t[0].match(i))return e;e=o.length>1?o[0]+"?"+t[0]+"&"+s+(t.length>1?"#"+t[1]:""):t[0]+"?"+s+(t.length>1?"#"+t[1]:"");return e},t.getADURL=h,t.plainTextToSendMsg=function(e){var t={"<":"&lt;",">":"&gt;",'"':"&quot;"};return e.replace(/\[#([^#]+)#\]/g,(function(e,t){return"[#"+(a.default.getDataByName("emoLanToCode")[t]||t)+"#]"})).replace(/[<">]/g,(function(e){return t[e]}))},t.throttle=function(e,t){var i,n=Date.now();return function a(){var o=this,s=arguments,r=Date.now();i&&clearTimeout(i),r-n>=t?(e.apply(o,s),n=Date.now()):i=setTimeout(a,t)}},t.getMsgByDom=function(e){var t=$(e).parents(".msgli").attr("id"),i=t&&a.default.getMsgFromHistory(t);if(!i)return void console.log("出错 没有找消息");return i.msg},t.checkHistory=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];n.default.unSubscribe("checkHistory",e);var i,o,s,r,l,c=t.concat(a.default.getMsgList()),d=a.default.getStatusData(),u=d.talkId,f={105:1,864:1,865:1,866:1,127:1},h=0;for(l=c.length-1;l>=0;l--)if(o=c[l].data,r=o.talkId,s=parseInt(o.mt||o.et),r||f[s]&&h++,r==u)673!=s||0!=o.isForward||i||(i=o);else if(r)break;return a.default.setStatusByKey("sendMsgNum",h),n.default.publish("initEvaluate",o),{noLimit:a.default.getEvaluateAndLimit().limit<=h,last673:i}},t.default=void 0;var n=o(i(0)),a=o(i(3));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(){return r(r({},a.default.getVisitorInfo()),a.default.getStatusData())}function d(){var e=a.default.getDataByName("netConnected"),t=a.default.getDataByName("websocketStatus")==n.default.Constants.websocketConnected;return!e&&!t&&(e?t?void 0:(n.default.showDialog({tip:"当前无正常连接，待产品确认流程，才能发消息"}),!0):(n.default.showTip("网络已断开,请检查网络后重试"),!0))}function u(e){return e.clientFileId||e.bridgeMsgId||e.id||e.mid}function f(e,t){var i=e,n=[],a=i.indexOf(t);return a>=0?(n[0]=i.substring(0,a),i.substring(a+1)&&(n[1]=i.substring(a+1))):n[0]=i,n}function h(e,t,i,a){if(!i)return"";if(!e||"0"==e||!t)return i;var o,s,r,l,d,u="",f="",h="",p=i.split("#"),m=p[1]||"",g=p[0],v=-1==g.indexOf("?")?0:1,b=c(),y=n.default.Constants.ADParams,w=0,S="?";if("string"==typeof t&&(t=JSON.parse(t)),n.default.isArray(t)&&t.length){for(o=t.length,r=0;r<y.length&&("staffId"==(l=y[r])&&(f=u,u="",a&&(S="",v=m?1:0)),"staffId"!=l||b.staffId);r++)for(s=0;s<o;s++)if("metaData"!=(d=t[s].paramName)&&"metadata"!=d||(d="metaData"),d==l){"metaData"==d?(w=1,u+=(0!=v?"&":S)+d+"="+encodeURIComponent(b[d]||""),u+=(0!=++v?"&":S)+(d="myData")+"="+encodeURIComponent(b[d]||""),v++,b[d="info"]&&(u+=(0!=v?"&":S)+d+"="+encodeURIComponent(b[d]||""),v++)):"myData"==d?w||(u+=(0!=v?"&":S)+d+"="+encodeURIComponent(b[d]||""),v++):"staffId"==d?(u+=(0!=v?"&":S)+d+"="+("-1"==encodeURIComponent(b[d]||"")?"":encodeURIComponent(b[d]||"")),v++):(u+=(0!=v?"&":S)+d+"="+encodeURIComponent(b[d]||""),v++);break}y.length==r&&(h=u,u="")}return a?g+f+(m?"#"+m+h:"#"+h):g+f+h+(m?"#"+m:"")}var p={handleNetwok:d,getMsgDomId:u,getADURL:h};t.default=p},,,,,,,,,,function(e,t,i){"use strict";i(33),i(1),i(26),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={talkTypeChat:1,talkTypeQueue:2,talkTypeLeave:3,talkTypeRobot:5,websocketConnecting:1,websocketConnected:2,websocketStoped:3,chatboxName:"sdkChatBoxInfo",chatboxRobotName:"robotSdkChatBox",contextPath:"/mychat/visitor",regFace:new RegExp("\ud83c[\udf00-\udfff]|\ud83d[\udc00-\ude4f]|\ud83d[\ude80-\udeff]|[#-®]|[‼-㊙]","g"),regEmo:new RegExp("\\[#[a-z0-9A-Z]+(_[a-z0-9A-Z]+)?#\\]","g"),regMail:/\b\w{1,30}([\.-]\w{1,30}){0,10}@\w{1,30}([\.-]\w{1,20}){0,10}(\.\w{1,20}){0,10}\b/g,regPhone:/([^\d]|\b)((\d{11})|((\d{7,8})|(\d{4}|\d{3})[\-\s](\d{7,8})|(\d{4}|\d{3})[\-\s](\d{7,8})[\-\s](\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})[\-\s](\d{4}|\d{3}|\d{2}|\d{1})))(?=[^\d]|\b)/gi,regLink:/((http|ftp|https):\/\/)(([\w\._\-]+\.[a-zA-Z]{2,6})|([0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}))(:[0-9]{1,4})?(\/[\w,\&%_\!\*\(\)\'\;\:\@\=\+\.\/\[-~\-#\?]*)?/gi,iScrollParam:{preventDefault:!1,preventDefaultException:/^(A|PRE|INPUT|TEXTAREA|BUTTON|SELECT|LABEL)$/,tap:!1,click:!1,mouseWheel:!1,fadeScrollbars:!1},lastMsgRule:{0:"您有新的消息",604:"您的对话已接通",605:"您的对话已结束",621:"给您发送了一个信息填写邀请",622:"给您发送了一个信息填写邀请",640:"${content,0,30,1}",641:"[图片]",642:"[文件]",647:"${content,0,30,1}",648:"等待接入会话，排队位置:${position}",653:"[图片]",657:"[图文消息]",673:"请您对本次服务进行评价",674:"您有新的消息",675:"您有新的消息",676:"您有新的消息",10011:"[图文消息]",864:"${content,0,30,1}",865:"[图片]",866:"[文件]",680:"[链接]"},validRule:{email:{p:/^[\w\d_\-\.]+@.+[\.].+/gi,msg:lanRes.invildEmail,length:50},phone:{p:/^[0-9\-]{0,20}$/,msg:lanRes.invildPhone,length:20},age:{p:/^[1-9][\d]{0,2}$/gi,msg:lanRes.invildAge,length:3},qq:{p:/^[1-9][\d]+$/gi,msg:lanRes.invildQQ,length:50},date:{p:/^[\d]{4}[-\/][\d]{2}[-\/][\d]{1,2}/gi,msg:lanRes.invildDate,length:50},address:{length:255},name:{length:50},wechat:{length:50},nickName:{length:50},birthday:{length:20},content:{length:1e3},memo:{length:255},textarea:{length:500},text:{length:100},number:{p:/^\-?\d*$/,length:50}},ADParams:["companyId","visitorId","echatTag","lan","country","province","city","searcher","keyword","metaData","myData","referrer","firstUrl","chatPage","chatPageTitle","eventId","osName","staffId","staffName","staffPhoto","talkId","staffPhone","staffInfo"]};t.default=n},,,,,,,,,function(e,t,i){"use strict";i(61),i(63),i(90),i(64),i(58),i(37),i(1),i(92),i(17),i(93),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(10);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={},s=1;function r(e){return"string"==typeof e?JSON.parse(e+""):e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"callEchatJs";window[e]=function(t){try{var i;if(!(i="string"==typeof t?JSON.parse(t+""):t))return console.log("错误调用",arguments);if("string"==typeof i.value&&i.value.match(/^\{.+\}$/))try{i.value=r(i)}catch(e){}try{console.log(i.functionName,i.value&&"object"==a(i.value)?JSON.stringify(i.value):i.value,"::",e)}catch(e){}i.functionName&&o[i.functionName]&&o[i.functionName](i.value)}catch(e){console.log(e)}}}function c(e,t,i,n){console.log(e+"：名字："+t+"：value：",i);try{var a={functionName:t,value:i||""};n&&"function"==typeof n&&(a.callback="callbackview_"+s,o[a.callback]=function(){console.log("callbackview_***"+a.callback,arguments),n.apply(n,arguments),window[a.callback]=null},s++),window.EchatJsBridge?window.EchatJsBridge&&EchatJsBridge[e](JSON.stringify(a)):window.webkit&&window.webkit.messageHandlers[e].postMessage(JSON.stringify(a))}catch(e){}}var d={initNativeAPI:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"functonName";window[t]||l(t),o=Object.assign(o,e)},callEchatNative:function(e,t,i){if(e){if("uploadMedia"==e||"map"==e){if((0,n.handleNetwok)())return!0}else"openUrl"==e&&(t.registerBridge||(t.registerBridge=7,t.isCanOtherHandle=1));c("callEchatNative",e,t,i)}},callEchatNativeConnect:function(e,t,i){e&&c("callEchatNativeConnect",e,t,i)}};t.default=d},,,function(e,t,i){"use strict";i(36),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a=l(i(20)),o=l(i(0)),s=l(i(161)),r=i(10);function l(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"content";if(!n[e]){if(!o.default.Browser.isIOS||o.default.Browser.osVersion<14)return $("#"+t).css("overflow","hidden"),void(n[e]=new s.default("#"+t,a.default.iScrollParam));document.addEventListener("touchmove",(function(e){e.stopPropagation(),e.preventDefault()}),!1),_$(t).style.overflowY="auto";var i={scrollTo:function(e,i,n){console.log("scrollto",e,i),_$(t).scrollTo(e,-i)},refresh:function(){}};Object.defineProperty(i,"maxScrollY",{enumerable:!1,configurable:!1,get:function(){return-_$(t).scrollHeight+_$(t).clientHeight}}),Object.defineProperty(i,"y",{enumerable:!1,configurable:!1,get:function(){return-_$(t).scrollTop}}),n[e]=i}}var d=n={init:function(){c("chatScroll","content")},initScroll:c,chatScroll:void 0,refreshChatScroll:function(){var e=this.chatScroll;e&&e.refresh()},scrollToElement:function(e,t){var i=n.chatScroll;i&&document.getElementById(e)&&(i.refresh(),setTimeout((function(){var t=document.getElementById(e),i=n.chatScroll,a=t.offsetTop,o=t.offsetHeight,s=document.getElementById("content").clientHeight,r=-i.y;i.refresh(),a>r&&r+s>a+o||i.scrollTo(0,-t.offsetTop+(s-o-20),!0)}),t||0))},scrollToBottom:function(e){var t=n.chatScroll;t&&(t.refresh(),setTimeout(n.imemediateToBottom,e||0))},imemediateToBottom:(0,r.throttle)((function(){var e=n.chatScroll;e.refresh(),e.scrollTo(0,e.maxScrollY,!0)}),30)};t.default=d},,,,,,,,function(e,t,i){"use strict";i(38),i(65),i(22),i(11),i(21),i(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(160);var n=c(i(0)),a=c(i(3)),o=i(10),s=c(i(32)),r=i(162),l=c(i(166));function c(e){return e&&e.__esModule?e:{default:e}}var d,u,f=window._echat0;function h(e,t){var i,n=(0,o.getMsgDomId)(e),a=_$(n);if(!a)return!1;if(t)return t(a,e);if(!(i=(0,r.getMsgContent)(e,e,[""])))return!1;var s=$(".msg-item",a);return s.length?s.html(i):$(a).html(i),!0}function p(e){var t=r.handleMap.file(e)||r.handleMap.location(e)?1:r.handleMap.img(e)||r.handleMap.video(e)?2:r.handleMap.voice(e)?3:0;return{itemCls:"clearfix msgli mode"+t+(t>1?" msg-medias":"")}}function m(e){return r.handleMap.staff[e.mt]||r.handleMap.sysToStaff(e)}function g(e){var t,i,s=e.mt||e.et,l=(0,o.getMsgDomId)(e);if(!r.handleMap.etmt[s])return!1;if(_$(l))return console.log("消息已经显示过了,走一下更新消息逻辑",e),h(e),!1;if(t=['<li class="'],!(i=(0,r.getMsgContent)(e,t)))return!1;var c,d=r.handleMap.robotAnswer(e),u=r.handleMap.sysToRobot(e),f=r.handleMap.visitor[s]||r.handleMap.sysToVisitor(e),g=r.handleMap.sysMsg(e),v=m(e)||d||u,b=!1,y=e.tm||(new Date).getTime();return t=t.concat([p(e).itemCls,'" id="',l,'" >']),b=n.default.checkHistoryTime(y),v?c=function(e,t){var i=t?a.default.getRobotInfo():a.default.getStaff(e.chatStaffId||e.staffId);return{icon:'<div class="avatar-icon fl staff-icons"><img onerror="_echat0.imgError(this)" class="avatar-icon-img" src="'+i.img+'"/></div>',name:e.chatStaffNickName||i.name}}(e,d||u):f?c={icon:'<div class="avatar-icon fr"><img onerror="_echat0.imgError(this)" class="avatar-icon-img" src="'+a.default.getVisitorImg()+'"/></div>'}:g||(b=!1),b&&t.push('<div class="time-line"><div class="color1 tc">'+new Date(y).format("hh:mm")+"</div></div> "),a.default.getConfig("showAvatar")&&c&&c.icon&&t.push(c.icon),v?(t.push('<div class="msg msg-lf fl">'),t.push('<div class="msg-staff-name">'),t.push(c.name),t.push('</div><div class="msg-con radius4 fl bg1">'),t.push('<i class="msg-angle colorbg1"></i>'),t.push('<div class="msg-item">')):f?(t.push('<div class="msg msg-rt fr">'),t.push('<div class="msg-con radius4 fr bg3">'),t.push('<i class="msg-angle colorbg3"></i>'),e.hasResend&&t.push('<div class="msg-error resend">&nbsp;</div>'),t.push('<div class="msg-item">')):g&&(t[0]=t[0]+"tc ",t.push('<div class="msg-info radius4">'),t.push('<div class="info-con">')),t.push(i),(v||f)&&t.push("</div>"),t.push("</div></div></li>"),t}f.scrollToBottom=s.default.scrollToBottom,f.imgError=(u=[],n.default.subscribe("changeNetStatus",(function(e,t){if(t){var i,n,a="";for(n=0;n<u.length;n++)a=u[n].src,u[n].src="",u[n].src=a;i=u[n-1],u=[],s.default.scrollToBottom(500),i&&$(i).on("load",(function e(){s.default.scrollToBottom(500),$(i).off(e)}))}})),function(e,t){u.push(e)}),d={showMsg:function(e){var t=g(e);if(t){var i=a.default.getDataByName("historyLastRowId");e.allExtra&&e.allExtra.echatId<=i?(f.scrollToBottom=s.default.refreshChatScroll,n.default.appendToListMsg(t.join(""),!0),s.default.refreshChatScroll()):(f.scrollToBottom=s.default.scrollToBottom,n.default.appendToListMsg(t.join("")),s.default.scrollToBottom(50))}},updateMsg:h,removeMsg:function(e){var t=(0,o.getMsgDomId)(e),i=_$(t);i&&($(i).remove(),s.default.refreshChatScroll())},getMsgDomId:o.getMsgDomId,updateMsgStaff:function(e){a.default.getMsgList.forEach((function(e){h(e.data,(function(e,t){if(m(t)){var i=t.chatStaffId||t.staffId,n=a.default.getStaff(i),o=$(".avatar-icon-img",e).attr("src"),s=$(".msg-staff-name",e).text();o!=n.img&&$(".avatar-icon-img",e).attr("src",n.img),s!=n.name&&$(".msg-staff-name",e).text(n.name)}}))}))}},(0,r.init)(h),l.default.init(d);var v=d;t.default=v},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i(65),i(21),i(94),i(9),i(1),i(5),i(66),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(i(122)),a=f(i(172)),o=f(i(97)),s=f(i(32)),r=f(i(175)),l=f(i(176)),c=f(i(3)),d=f(i(0)),u=i(10);function f(e){return e&&e.__esModule?e:{default:e}}var h=o.default.checkMenuNums,p={networkDisconnected:1,innerADWrap:1,footer:{name:"#footer",bottom:0},inputSuggest:1,robotToStaff:1,busyTipLine:1,chatText:1,pre_his:1},m={removeCls:function(e,t){e&&(d.default.isArray(e)||(e=[e]),e&&e.length&&e.forEach((function(e){t.removeClass(e)})))},cls:function(e,t){t.addClass(e)},attr:function(e,t){for(var i in e)t.attr(i,e[i])},isHtml:function(e,t,i){"#textInput"==i.name&&e&&2!=n.default.editorType&&n.default.changeToIframe&&n.default.changeToIframe()},html:function(e,t){t.html(e)}},g=(0,u.throttle)((function(){var e=window.getComputedStyle(_$("footer")),t=_$("footer").clientHeight,i=parseInt(e.getPropertyValue("margin-bottom")||0),n="number"==typeof p.footer.bottom?p.footer.bottom:parseInt(e.getPropertyValue("bottom")||0),a=$("#innerADWrap").height()||0+$("#networkDisconnected").height()||0,o=s.default.chatScroll,r=o.y==o.maxScrollY;$("#container").css("padding-bottom",t+i+n+"px"),$("#content").css("height",a?"calc(100% - "+a+"px)":"100%"),o&&(o.refresh(),(o.y<o.maxScrollY||r)&&o.scrollTo(0,o.maxScrollY))}),100);function v(e){var t=!1;e.forEach((function(e){if(e.name){var i,n=$(e.name);if(e.config&&e.config(e),n.length){for(i in e)m[i]&&m[i](e[i],n,e);p[e.name.replace("#","")]&&(t=!0)}}})),t&&g()}function b(e){v(c.default.getDataByName("doms")[e])}d.default.subscribe("changeDom",(function(e,t){t&&("#footer"==t.name&&("number"==typeof t.bottom&&(p.footer.bottom=t.bottom||0),"number"==typeof t.scrollTime&&s.default.scrollToBottom(t.scrollTime)),d.default.isArray(t)||(t=[t]),v(t))}));var y={input:n.default,footer:a.default,scroll:s.default,init:function(){function e(e,t){b("staff")}r.default.init(),n.default.init(o.default),a.default.init(n.default),s.default.init(),l.default.init(),function(){var e=_$("textInput");function t(i){i.target!=e&&(e.blur(),document.removeEventListener("touchend",t,!1))}$("#textInput").on("focus",(function(){n.default.inputFocus=!0,o.default.hideMenus(),s.default.scrollToBottom(500),document.addEventListener("touchend",t,!1)})).on("blur",(function(e){n.default.inputFocus&&(n.default.inputFocus=!1,_$("footer").style.marginBottom="0px",document.body.scrollTop=0,d.default.publish("changeDom",{name:"#footer",bottom:0}))})).on("touchstart touchmove touchend",(function(e){e.stopPropagation()}))}(),setTimeout((function(){i.e(1).then(function(){i(187).default(),$("#emotion").on("click",".emoji",(function(e){var t=$(this).attr("code"),i=n.default.getInput().length+t.length+4,a=c.default.getConfig("inputMaxLength");a&&i>a||n.default.insertImg(t)}))}.bind(null,i)).catch(i.oe)}),10),b("reset"),h(),d.default.subscribe("setTheme",(function(e,t){var i,n=c.default.getChatbox(),a={toolEmoji:".menu-emo",toolFile:".menu-file",toolSatisfaction:".menu-satisfy",toolScreenshot:".menu-capture",toolTelephone:".menu-phone",toolCamera:".menu-camera",toolLocation:".menu-map",toolVoice:".record-switch"};for(i in a)Number(n[i])?$(a[i]).removeClass("style-tool-hide"):$(a[i]).addClass("style-tool-hide");h()})),d.default.subscribe("startLeave",(function(e){b("leave")})),d.default.subscribe("startQueue",(function(t,i){c.default.getConfig("busyCanSend")?e():b("queue"),$(".menu-satisfy").addClass("hide")})),d.default.subscribe("startChat",e),d.default.subscribe("updateChatStaffInfo",(function(){var e=c.default.getStaff();e&&e.phone?($(".menu-phone-a").attr("href","tel:"+e.phone),$(".menu-phone").removeClass("hide")):$(".menu-phone").addClass("hide"),$(".sa-avatar").html('<img src="'+e.img+'"/>'),d.default.publish("__setTitle",c.default.getStaff().name)})),d.default.subscribe("startRobot",(function(e,t){b("robot")})),d.default.subscribe("chatEnded",(function(e,t){b("reset"),h(),l.default.reset()})),d.default.subscribe("enterUnread",(function(e,t){b("unread")})),d.default.subscribe("leaveDisabled",(function(e,t){if(t){$("#mask").css({display:"block"}),$("#leaveDisabled").html('<div class="leave-disabled-tip" id="leavedisabledTip"><div class="leave-disabled-scroll">'+(t.disableTips||"服务不可用")+"</div></div>").show(),d.default.publish("__setTitle","");var i=window.innerHeight||document.body.clientHeight;.8*i<$(".leave-disabled-tip").height()+90&&($("#leaveDisabled").css({height:.8*i-90+"px"}),$(".leave-disabled-tip").css({height:.8*i-90+"px",position:"relative",overflow:"hidden"}),s.default.leaveDisabledScroll||(s.default.leaveDisabledScroll=s.default.initScroll("leaveDisabledScroll","leavedisabledTip")),setTimeout((function(){s.default.leaveDisabledScroll.refresh()}),600))}}))}};t.default=y},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i(27),i(11),i(36),i(1),i(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(i(0)),a=l(i(20)),o=l(i(3)),s=l(i(10)),r=l(i(40));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e,t,i){var a=e.data,l=(new Date).getTime(),c=e.sendStatus>=1,d=e.id||"msg"+l;e.id=d,e.tm=e.tm||l,e.sendStatus=1,e.hide||(c&&function(e){var t,i=_$(s.default.getMsgDomId(e));o.default.updateMsgList(e,"remove"),(t=i.previousElementSibling)&&t.childNodes[0]&&-1!=(t.childNodes[0].className+"").indexOf("color1")&&$(t).remove(),$(i).remove()}(e),o.default.updateMsgList(e,"push"),r.default.showMsg($.extend(e,a))),t||(!e.hide&&r.default.updateMsg(e,(function(e){$(".msg-con",e).append('<div class="msg-error">&nbsp;</div>')})),n.default.publish("sendMessage",$.extend(a),(function(t,n){var a;if(t.successful){if(a=o.default.getStatusByKey("lasMid"),e.sendStatus=2,e.mid=t.mid,a<e.mid&&o.default.setStatusByKey("lasMid",e.mid),!e.hide&&r.default.updateMsg(e,(function(t){e.mid&&$(t).attr("id",e.mid),$(".msg-error",t).remove(),$("img",t).each((function(){$(this).attr("src",$(this).attr("src"))}))})),i)try{i()}catch(e){}e=null}else e.sendStatus=3,!e.hide&&r.default.updateMsg(e,(function(e){$(".msg-error",e).addClass("resend").attr("dataid",d)})),n&&n()})))}var f=function(e,t,i){e&&!e.data&&(e.data=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach((function(t){d(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e));var o=t||e.data.content,s=o&&o.replace(a.default.regEmo,"[face]");t&&(e.data.img=1,e.data.content=t),e.filterMsg&&o&&!e.localMsg?(e.localMsg=o,e.data.content=o+"过滤后的消息"):u(e,t,!1),!o||105!=e.data.et&&130!=e.data.et||n.default.publish("__visitorSendMsg",s),105==e.data.et&&n.default.publish("_addSendMsgNum",e)};t.default=f},function(e,t,i){},function(e,t,i){"use strict";i(38),i(22),i(9),i(1),i(17),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(96);var n=s(i(29)),a=s(i(0)),o=(s(i(32)),s(i(3)));function s(e){return e&&e.__esModule?e:{default:e}}var r,l,c,d,u,f,h,p,m,g,v=n.default.callEchatNative,b=0;g=function(){var e=0;function t(){e&&clearTimeout(e),e=null,m().showNum<=0?$("#chatText").addClass("enter-show"):$("#chatText").removeClass("enter-show")}return function(){e&&clearTimeout(e),e=setTimeout(t,60)}}(),a.default.subscribe("triggerFile",(function(e,t){console.log("triggerFile",t);var i,n,a=2;if("record"==t?a=4:"gallery"==t?a=2:"voice"==t&&(a=3),i=document.getElementById("uploadInput"),$(i).attr("filetype",a),document.createEvent)try{(n=document.createEvent("mouseEvent")).initEvent("click",!0,!0),i.dispatchEvent(n)}catch(e){i.click(),console.log(e)}else i.click()})),a.default.subscribe("setUrlList",(function(e,t){var i,n,s=o.default.getStatusConfig(),r=s.sdkUrlList||s.phoneUrlList,c="",d="",u=['<li class="dot-list-li hover">0</li>'],p=_$("url_dot_list"),m=$(".tool-menu-item").length,v=0;if("string"==typeof r&&(r=JSON.parse(r)),$(".list-url-item").remove(),$(".url-list-pagemore").remove(),!r||0==r.length)return f&&f(0),void o.default.setConfig("urlListConfig",new Array(m));for(r=new Array(m).concat(r),o.default.setConfig("urlListConfig",r),n=m;n<r.length;n++)a.default.needHttps&&(r[n].url=r[n].url.replace(/^http:/i,a.default.needHttps),r[n].icon=r[n].icon.replace(/^http:/i,a.default.needHttps)),d='<li class="list-url-item" data-index="'+n+'"><div class="list-url-img"><div class="menu-item-icon border0"><img src="'+r[n].icon+'" class="list-url-icon" /></div></div><div class="list-url-title">'+r[n].title+"</div></li>",7==n?($("#urlListPage1").append(c+d),c=""):n>7&&(n+1)%8==0?c+=d+"</ul>":n%8==0?(c+='<ul class="clearfix url-list-page flex1 url-list-pagemore">'+d,v++,u.push("<li class='dot-list-li'>"+v+"</li>")):c+=d;$("#urlListWrap").css({width:100*(v+1)+"%",transform:"translate(0px, 0px)"}).attr("x2","0").attr("x2","0"),n<8?$("#urlListPage1").append(c):n>8&&(c+="</ul></div>",$("#urlListWrap").append(c)),!h||v>0?(b=0,i=function(){b<0&&(b=0),$($(".dot-list-li",p).removeClass("hover").results[b]).addClass("hover")},f=function(e){$("#urlListWrap").css({transform:"translate(-"+window.innerWidth*e+"px, 0px)"}).attr("x2","0").attr("x","-"+window.innerWidth*e),b=e,i()},h=function(e){0!=e&&((b+=e)>v&&(b=v),i())},0==v?$(p).hide():($(p).html(u.join("")).show(),a.default.pageSlide("#urlListWrap",h))):($(p).hide(),f&&f(0)),g(),l()})),u=function(e){function t(e,t){v(e,t),l()}function i(e){var i=o.default.getVisitorInfo();t("uploadMedia",{visitorId:i.visitorId,companyId:i.companyId,type:e,maxNum:9})}d=e,$(".tool-menu-item").addClass("hide"),$(".menu-emo").addClass("hide"),$(".url-list-item").addClass("hide"),$("#menu_emotion").on("touchend",(function(e){return c(e,"emotion",this)})),$("#menu_more").on("touchend",(function(e){return c(e,"urlList",this)})),$(".menu-satisfy").on("click",(function(){a.default.publish("showSatisfy",3)})),$(".menu-file").on("click",(function(){i("gallery")})),$(".menu-camera").on("click",(function(){i("camera")})),$(".menu-map").on("click",(function(){t("map")})),1!=a.default.getQueryString("isMapExist")&&$(".menu-map").addClass("style-tool-hide")},c=function(e,t,i){return d.inputFocus?(setTimeout((function(){r(t)}),550),d.inputBlur()):$(i).hasClass("open")?l():r(t),e&&e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),!1},r=function(e){p&&clearTimeout(p);var t,i,n,o=$("#"+e);"emotion"==e?(t=206,n="urlList",$("#chatText").removeClass("recording")):"urlList"==e&&(t=m().height,n="emotion"),i=$("#"+(n||"")),$("#chat").off("click",l),setTimeout((function(){$("#chat").on("click",l)}),20),$("#footer").css("bottom",t+"px"),a.default.publish("changeDom",{name:"#footer",bottom:t,scrollTime:550}),"urlList"==e?($(".menu-more").addClass("open"),$(".menu-more-i").addClass("color0"),$(".menu-emo").removeClass("open").removeClass("color0")):($(".menu-more").removeClass("open"),$(".menu-more-i").removeClass("color0"),$(".menu-emo").addClass("open").addClass("color0")),o.removeClass("ani-hide"),i.addClass("ani-hide"),setTimeout((function(){o.removeClass("hide")})),p=setTimeout((function(){i.addClass("hide").removeClass("ani-hide")}),200)},m=function(){var e,t,i,n,a,s,r,l=0,c=0,d=o.default.getConfig("urlListConfig").length,u=$(".tool-menu-item"),f=$(".list-url-item").length;return $(".url-list-page").each((function(e,t){$(t).hasClass("hide")||c++})),u.each((function(e,t){t.className.match(/hide/g)&&l++})),u=u.results.concat($(".list-url-item").results),t=d-l,e=u.length-8-l,s=$(".url-list-page"),r=s.results.length,e<0&&f?(e=0-e,s.each((function(t,i){var n,a;if(t>0&&(n=$(".list-url-item",i).results).length)for(a=0;a<e;a++)n[a]&&s.results[t-1].appendChild(n[a])}))):e>0&&s.each((function(t,i){var n,a,o;if(t<r-1)for($(s.results[t+1]).removeClass("hide"),n=$(".list-url-item",i).results,a=$(".list-url-item",s.results[t+1]).results[0],o=0;o<e;o++)a?n[n.length-1-o]&&s.results[t+1].insertBefore(n[n.length-1-o],null):n[n.length-1-o]&&s.results[t+1].appendChild(n[n.length-1-o])})),t<1?a=0:t<5?a=114:t&&(a=232),$("#urlList").css({height:a+"px",bottom:-a+"px"}),i=parseInt(d/8)+(d%8>0?1:0),n=parseInt(t/8)+(t%8>0?1:0),c==n&&i==n||($("#urlListWrap").css({width:100*n+"%",transform:"translate(0px, 0px)"}).attr("x","").attr("x2",""),$(".url-list-page").removeClass("hide").each((function(e,t){e+1>n?$(t).addClass("hide"):$(t).removeClass("hide")})),1==n?$("#url_dot_list").hide():$("#url_dot_list").show(),$(".dot-list-li",_$("url_dot_list")).removeClass("hide").removeClass("hover").each((function(e,t){e+1>n?$(t).addClass("hide"):$(t).removeClass("hide")}))),{height:a,hideNum:l,pageNum:n,showNum:t}};var y={init:u,checkMenuNums:g,hideMenus:l=function(e,t){var i=window.getComputedStyle(_$("footer"));if(parseInt(i.getPropertyValue("bottom")||0)){var n,o,s;if(p&&clearTimeout(p),!t&&e&&(n=e&&e.target?e.target:window.event?window.event.srcElement:null))for(o=[_$("menu_emotion"),_$("emotion"),_$("menu_more"),_$("urlList")],s=0;s<o.length;s++)if(n==o[s]||$.fn.contains(o[s],n))return;$("#chat").off("click",l),d.inputFocus&&(console.log('$("#footer").addClass("transition-none");'),$("#footer").addClass("transition-none"),$("#footer").css("bottom","0px")),setTimeout((function(){$("#footer").css("bottom","0px"),$("#footer").removeClass("transition-none"),a.default.publish("changeDom",{name:"#footer",bottom:0,scrollTime:550})}),100),$("#emotion").hasClass("hide")?$("#emotion").addClass("ani-hide"):$("#urlList").hasClass("hide")&&$("#urlList").addClass("ani-hide"),p=setTimeout((function(){$("#emotion").addClass("hide").removeClass("ani-hide"),$("#urlList").removeClass("ani-hide")}),500),$(".menu-more").removeClass("open"),$(".menu-more-i").removeClass("color0"),$(".menu-emo").removeClass("open").removeClass("color0")}}};t.default=y},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";i(9),i(1),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(170);var n=s(i(171)),a=s(i(3)),o=s(i(0));function s(e){return e&&e.__esModule?e:{default:e}}var r,l,c="textInput",d=window.innerHeight;function u(e){var t=_$("fakeInput"),i=_$(c),n=_$(c).clientHeight,a=t.clientHeight;parseInt(i.style.height)>90&&a>92||(a>92?a=93:a<33&&(a=33),i.style.height=a+"px",i.setAttribute("height",a),i.style.width="auto",i=t=null,(n-a>3||n-a<-3)&&o.default.publish("changeDom",{name:"#footer"}))}r=new function(){var e=this;n.default.call(this);var t=this,i=this.textInputChange;t.SENDCTRL=!1,t.plainText=!0,t.editorType=1,t.isMobile=!0,t.textRange=null,t.inputFocus=!1,this.init=function(n){e.Menu=n,t.bindPlainTextEvent(),$("#"+c).on("propertychange change input paste drop",(function(e){setTimeout(i,20)})),$("#enter_btn").on("touchend",(function(e){t.sendMsg({from:"enter"})}))},this.setInput=function(e){e&&(e=e.replace(/<img[^>]+code="([^"]+)"[^>]*>/gi,"[#$1#]").replace(/<(?!br|\/br)(?:.|\s)*?>/gi,"").replace(/&nbsp;/gi," ").replace(/^((<\/?br\/?>)|[\r\n\s]+)+|((<\/?br\/?>)|[\r\n\s]+)+$/gi,""),$("#"+c).val(e))},this.getInput=function(e){var i=$("#"+c).val();return i?(e&&$("#"+c).val(""),t.filterPasteData(i,!0,!0)):(i.length>5e3&&(i=i.substring(0,5e3)),i)},this.inputBlur=function(e,i){i&&_$("sa_advise").blur(),!0!==t.inputFocus||e&&e.target&&"textInput"==e.target.id||(_$("textInput").blur(),setTimeout((function(){_$("textInput").blur(),window.scrollTo(0,0)}),10),window.blur())},this.bindPlainTextEvent=function(e){$("#"+c).off("keydown").on("keydown",(function(e){var n,a,o,s,r,l=e||window.event,d=l.keyCode||l.which||l.charCode||0;if(13==d&&void 0!==t.SENDCTRL&&t.SENDCTRL==!!l.ctrlKey)return t.sendMsg({from:"input"}),l.preventDefault&&l.preventDefault(),!1;8==d&&(a=(n=_$(c)).value,n.createTextRange?console.log("手机端IE?"):(o=n.selectionStart,s=-1,r=0,o>0&&a.replace(/\[#([^#]+)#\]/g,(function(e,t,i,n){return i<o&&i+e.length>=o&&(s=i,r=i+e.length),e})),-1!=s&&n.setSelectionRange(s,r))),t.getPos(),setTimeout(i,50)})).on("change input",(function(){t.getPos()})).on("paste",(function(e){return t.filterPasteText(e,void 0,window,document)})).on("drop",t.getPos).on("focus",t.getPos),setTimeout((function(){_$(c)&&_$(c).scrollIntoView()}),400),t.textRange=null},this.getPos=function(e){var i,n,a=_$(c);if(window.getSelection){n=window.getSelection();try{i=n.getRangeAt(0)}catch(e){(i=document.createRange()).selectNodeContents(a),i.collapse(!0)}}else i=document.selection.createRange();return t.textRange=i,i},this.insertImg=function(e){var t=a.default.getDataByName("emoCodeTolan"),n=_$(c),o=!1,s="[#"+t[e]+"#]";n.selectionStart&&n.selectionEnd?(n.setRangeText(s,n.selectionStart,n.selectionEnd,"end"),n.selectionEnd==n.value.length&&(o=!0)):(n.value+=s,n.innerHTML+=s,o=!0),o&&setTimeout((function(e){var t=_$(c);t.scrollTop=t.scrollHeight,t.scrollTo(0,t.scrollHeight),n=null})),i({from:"insertImg"}),n=null}},o.default.subscribe("textInputChangeEvt",(function(){var e=_$(c),t=_$("fakeInput"),i=e.value;t.innerText=i||" ",setTimeout(u,10),function(e){e=e||_$(c);var t=$("#menu_more"),i=$("#enter_btn");e.value?(i.removeClass("hide"),t.addClass("hide")):(i.addClass("hide"),t.removeClass("hide"))}(e)})),o.default.subscribe("keyboardHeight",(function(e,t){var i,n,a=window.innerHeight+t-d;t,r.inputFocus&&(a<3&&a>-3||window.innerHeight==_$("footer").getBoundingClientRect().bottom?window.scrollTo(0,d):(l&&clearTimeout(l),l=setTimeout((function(){l=null;var e=_$("footer").getBoundingClientRect().bottom;if(window.innerHeight==e)return console.log(d,t,window.innerHeight,"**innerHeight change"),void window.scrollTo(0,d);i=parseInt(window.getComputedStyle(_$("footer")).getPropertyValue("margin-bottom"))||0,((n=t-d+e+i)<3&&n>-3||window.innerHeight==e)&&(n=0),console.log(d,e,t,i,"**500ms**",window.innerHeight,n),r.inputFocus&&(_$("footer").style.marginBottom=n+"px"),o.default.publish("changeDom",{name:"#footer",bottom:0})}),600)))})),o.default.subscribe("inputBlur",(function(e,t){r.inputBlur()}));var f=r;t.default=f},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i(22),i(21),i(1),i(5),i(28),Object.defineProperty(t,"__esModule",{value:!0}),t.getElementByFieldType=function(e,t,i,n){var o,s,r=a.default.Constants.validRule,l="",c={type1:'<input type="text" class="entry2-input {{req}}" maxlength="{{length}}" placeholder="{{wordDesc}}" lb="{{configDesc}}" name="{{configName}}" value="{{value}}"/>',type6b:'<input type="date" class="entry2-input {{req}}" placeholder="{{wordDesc}}" lb="{{configDesc}}" name="{{configName}}" value="{{value}}"/>',type6:'<div class="date-input-box"><input type="text" lb="{{configDesc}}" placeholder="{{wordDesc}}" class="entry2-input date-show"/><input type="date" lb="{{configDesc}}" placeholder="{{wordDesc}}" name="{{configName}}" value="{{value}}" class="entry2-input date-input"/><span class="date-select-icon echat-vs color0">&#xe638;</span></div>',type2:'<textarea class="entry2-textarea {{req}}" maxlength="{{length}}" rows="4" placeholder="{{wordDesc}}" lb="{{configDesc}}" name="{{configName}}" autoHeight="true">{{value}}</textarea>',type4:'<div class="entry2-checkbox"><label><input name="{{configName}}" value="{{configs.value}}" inputvalue="{{configs.item}}" lb="{{configDesc}}" type="radio" {{check}} /><span class="entry2-checkicon color0"></span><span>{{configs.item}}</span></label></div>',type5:'<div class="entry2-checkbox"><label><input name="{{configName}}" value="{{configs.value}}" inputvalue="{{configs.item}}" lb="{{configDesc}}" type="checkbox" {{check}} /><span class="entry2-checkicon color0"></span><span>{{configs.item}}</span></label></div>',type3:'<option value="{{configs.value}}" inputvalue="{{configs.item}}" {{check}} >{{configs.item}}</option>',type7:'<option value="{{configs.value}}" inputvalue="{{configs.item}}" {{check}} >{{configs.item}}</option>'};function d(e,t){for(var i=0;i<e.length;i++)if(e[i]==t)return!0;return!1}if(l=c["type"+t],6==t&&(window.ltIE10||a.default.isMobile))l=c.type6b;else if(4==t||5==t||3==t||7==t){if(o=e[i.configName].configs,l=[],n=n?n.split(","):n,3==t||7==t){if(7==t){var u,f=[];for(u=o.start;u<=o.end&&(f.push({item:u,value:u}),150!=f.length);u+=o.stepSize);o=f}l.push('<select class="entry2-select {{req}}" name="{{configName}}" lb="{{configDesc}}"><option value="">{{wordDesc}}</option>')}for(s=0;s<o.length;s++)l.push(c["type"+t].replace(/\{\{configs.item\}\}/g,o[s].item).replace("{{configs.value}}",o[s].value).replace("{{check}}",n&&d(n,o[s].value)?3==t||7==t?"selected":"checked":""));3!=t&&7!=t||l.push("</select>"),l=l.join("")}else 1!=t&&2!=t||(l=l.replace("{{length}}",(r[i.configName]||r[1==t?"text":"textarea"]).length));return l},t.getFormItemValue=function(e,t,i){e=e||_$("entryForm");var n,a,o="",s="",r="",l="";i?t=e[i]:t&&(i=t.name);if(1!=t.nodeType){for(o=[],r=[],l=[],n=0;n<t.length;n++)t[n].checked&&(o.push(t[n].value),r.push($(t[n]).attr("lb")),l.push($(t[n]).attr("inputvalue")));s=$(t[0]).parents(".entry2-typeline").attr("lb"),o=o.join(","),r=r.join(","),l=l.join(",")}else if(s=$(t).attr("lb"),o=t.value.replace(/^[\s]+|[\s]+$/gi,""),"SELECT"==t.tagName)for(a=0;a<t.length;a++)if(t[a].value==o||t[a].getAttribute("value")==o){l=t[a].getAttribute("inputvalue"),r=$(t[a]).text();break}return{val:o,ipt:t,label:s,labelVal:r||o,inputValue:l}};var n,a=(n=i(0))&&n.__esModule?n:{default:n}},function(e,t,i){"use strict";var n,a,o,s,r;i(27),i(127),i(21),i(7),n={orderUploadData:r={length:0,max:5},uploadSelector:"",paramData:{token:"",nonce:"",visitorId:"",companyId:"",apiServerDomain:""},setParamData:function(e){for(var t in e)n.paramData[t]=e[t]},setUtil:function(e){o=e},setNative:function(e){a=e},getOrderParam:function(){return{token:n.paramData.token||"",nonce:n.paramData.nonce||"",companyId:n.paramData.companyId,visitorId:n.paramData.visitorId,apiServerDomain:n.paramData.apiServerDomain}},prepareAddOrderFile:(s=0,function(e){var t;r[e.clientFileId]||r.length++,r[e.clientFileId]=e,e.index=++s,e.progress=e.progress||0,t=4==e.fileType?'<img src="'+e.localThumbnailPath+'" alt="" onerror="this.className=\'video-img-err\'"/><span class="file-prev-video"><i>&#xe69a;</i><i>VIDEO</i></span>':'<img onerror="this.className=\'file-prev-img\'" src="'+e.localFile+'" alt=""/>',$("#orderUpload"+e.index).remove(),$(".order-fileslist").append('<div class="orderUpload-item orderUpload-item-'+(4==e.fileType?"video":"img")+'" clientFileId="'+e.clientFileId+'" id="orderUpload'+s+'">'+t+'<span class="file-progress">'+(e.progress||0)+"%</span></div>"),r.length>=r.max&&$(n.uploadSelector||".order-button").addClass("limit-hide")}),updateOrderFile:function(e){if(2==e.sendStatus||4==e.sendStatus)return n.successOrderFile(e);var t=e.clientFileId,i=r[t];i&&3==e.sendStatus?(o.showTip(lanRes.uploadError||lanRes.visitor181),setTimeout((function(){n.removeOrderFile(e)}),2e3)):i&&(r[e.clientFileId]=$.extend(i,e),$(".file-progress",document.getElementById("orderUpload"+i.index)).html(e.progress+"%"))},successOrderFile:function(e){var t,i,a=e.clientFileId,s=r[a];if(s&&3==e.sendStatus)return o.showTip(lanRes.uploadError||lanRes.visitor181),void setTimeout((function(){n.removeOrderFile(e)}),2e3);s&&(function(){var t,i=e.allExtra&&e.allExtra.nativeExtra&&e.allExtra.nativeExtra.upload;if(i&&i.length&&(e.uploadInfo=i,!e.fileName))if(1!=i.length){for(t=0;t<i.length;t++)if(i[t].isVideo)return void(e.fileName=i[t].fname)}else e.fileName=i[0].fname}(),r[e.clientFileId]=$.extend(s,e),t=document.getElementById("orderUpload"+s.index),$(".file-progress",t).remove(),4!=e.fileType?(i=$("img",t)).hasClass("file-prev-img")&&i.removeClass("file-prev-img").attr("src",e.sourceImg):(i=$("img",t)).hasClass("video-img-err")&&i.removeClass("video-img-err").attr("src",e.remoteThumbnailPath),$("#orderUpload"+s.index).append('<a class="file-remove"></a>'))},removeOrderFile:function(e){var t=e.clientFileId,i=r[t];i&&(r.length--,$("#orderUpload"+i.index).remove(),r.length<r.max&&$(n.uploadSelector||".order-button").removeClass("limit-hide"),delete r[t])},getSubmitItems:function(e,t){var i,n,a=!0;if(t=t||[],e){for(i in r)if((n=r[i])&&n.index&&2==n.sendStatus){var o=function(e){n.uploadInfo=e.uploadInfo||[];var t,i,a=e.uploadInfo;if(1==a.length)t=a[0];else{for(i=0;i<a.length;i++)1==a[i].isVideo&&(t=a[i]);t=t||a[0]}return{type:1,fileValue:{url:162==e.et?e.remoteVideoPath:e.sourceImg,name:e.fileName||t.fname||"",size:e.fileSize||1,videoThumbUrl:e.remoteThumbnailPath,fileType:4==n.fileType?2:4,key:t.key,bucket:t.bucket}}}(n);e.push(o),t.push({type:o.fileValue.fileType,name:o.fileValue.name,fileType:o.fileValue.fileType,fileValue:o.fileValue})}else!n.data&&n.index&&(a=!1);return a}},bindOrderUpload:function(e,t){function i(e){var t=$(this.parentNode).attr("clientfileid"),i=r[t].uploadInfo||[{}],a=i.map((function(e){return e.key}));i&&i.length?(o.showDialog({tip:lanRes.IsDel||lanRes.visitor191||"",ok:function(){var e=n.getOrderParam(),s={requesterVisitorId:e.visitorId,token:e.token||"",nonce:e.nonce||"",keys:JSON.stringify(a),bucket:i[0].bucket};$._ajax({url:e.apiServerDomain+"/chatapi/jobh/bdf?companyId="+e.companyId+o.addMapParams(s),type:"jsonp",jsonpCB:"jsonpCallback",success:function(e){e&&e.successful?(o.showTip(lanRes.delSuccess||lanRes.visitor182||""),n.removeOrderFile(r[t])):o.showTip(e&&e.errorMsg||"删除失败")}})}}),e.preventDefault(),e.stopPropagation()):console.log("错误 没有文件可删除")}n.uploadSelector=e,$(t||"#orderUpload").hide(),$("#orderFileMenu").off("click").remove(),$("body").append('<div id="orderFileMenu" class="file-menu hide"><div class="file-menu-item" type="camera"><i class="color0">&#xe6fc;</i><span>相机</span></div><div class="file-menu-item" type="gallery"><i class="color0">&#xe65e;</i><span>相册</span></div></div>'),$(e||".order-button").off("click").on("click",(function(){r.length>=r.max?o.showDialog({tip:lanRes.MaxFileNum||lanRes.visitor179,cancel:!1}):($("#orderFileMenu").removeClass("hide"),$("#orderMask").length||($("body").append('<div class="mask" id="orderMask" style="display:block;"></div>'),$("#orderMask").on("click",(function(){$("#orderFileMenu").addClass("hide"),$("#orderMask").off("click").remove()}))))})),$("#orderFileMenu").on("click",".file-menu-item",(function(e){var t=$(this).attr("type"),i=n.getOrderParam();a("uploadMedia",{visitorId:i.visitorId,companyId:i.companyId,token:i.token,nonce:i.nonce,type:t,maxNum:r.max-r.length}),$("#orderFileMenu").addClass("hide"),$("#orderMask").off("click").remove()})),$(".order-fileslist").on("click",".orderUpload-item-img",(function(e){var t=e.srcElement||e.target||{};if(-1!=t.className.indexOf("file-remove"))return i.call(t,e);var n=0,o=this,s=[];$(".orderUpload-item-img").each((function(e,t){var i=$(t).attr("clientfileid"),a=r[i],l=a.sourceImg;a&&(s.push({bigImg:l,smallImg:l,sourceImg:l,fileName:a.fileName||a.clientFileId+".jpeg",clientFileId:a.clientFileId,localFile:a.localFile,isOrignal:1}),o==t&&(n=s.length))})),a("previewImage",{urls:s,current:n}),e.preventDefault(),e.stopPropagation()})),$(".order-fileslist").on("click",".orderUpload-item-video",(function(e){var t=e.srcElement||e.target||{};if(-1!=t.className.indexOf("file-remove"))return i.call(t,e);var n,o=$(this).attr("clientfileid"),s=r[o],l=s.remoteVideoPath,c=s.fileName||s.clientFileId+".mp4";a("video",{type:"play",clientFileId:s.clientFileId,url:l,localVideoPath:s.localVideoPath||s.localFile,thumbUrl:s.localThumbnailPath||s.remoteThumbnailPath,downloadUrl:(n=l,n?n+(-1==n.indexOf("?")?"?":"&")+"attname="+encodeURIComponent(c):""),fileName:c})}))},__playVideo:function(e,t,i,n,o){a("video",{type:"play",identityKey:o||"",clientFileId:o||"",url:e,localVideoPath:msg.localFile,thumbUrl:t,downloadUrl:i,fileName:n||""})}},window.fileUtil=n},,,,,,,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(139);o(i(0)),o(i(29)),o(i(159));var n=o(i(182)),a=(o(i(3)),o(i(67)));function o(e){return e&&e.__esModule?e:{default:e}}$((function(){a.default.init(),n.default.pageReady()}));t.default={}},function(e,t,i){},,,,,,,,function(e,t,i){"use strict";i(38),i(27),i(22),i(113),i(148),i(149),i(11),i(59),i(151),i(37),i(33),i(1),i(26),i(17),i(5),i(28),i(7),i(152),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){var e,t,i,n,a,o,s,r,l,c,d,u,f,h,p,m,g,v,b,y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,w=/^[^{]+\{\s*\[native \w/,S=/[\t\r\n\f]/g,I=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,T=/\S+/g,k={find:{},filter:{}},C=window.document,x=window.document,$="echatQuery"+1*new Date,E={},_=[],M=_.slice,D=_.push,B=new RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),P=function(e,t,i){var n="0x"+t-65536;return n!==n||i?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},N=function(){n()},O=1,R={},A={},L="onfocusin"in window,F={focus:"focusin",blur:"focusout"},j={mouseenter:"mouseover",mouseleave:"mouseout"},W=/^-ms-/,H=/-([\da-z])/gi,V=function(e){return e.replace(W,"ms-").replace(H,(function(e,t){return t.toUpperCase()}))},U={},q=U.toString,K=0,Y=/(\=)\?(&|$)|\?\?/i,X=function(){return!0},z=function(){return!1},Q=/^([A-Z]|returnValue$|layer[XY]$)/,J={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function G(e){return e._zid||(e._zid=O++)}function Z(e){x.createElement;var t=x.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ee(e,t,i){var o=t&&t.ownerDocument;return i=i||[],e?e.nodeType||e==window.document||e==window?(this.context=e,this.results=[e],this.length=1,this):r(e)?void 0!==f?this.readyList.push(e):e():e instanceof ee?e:((t?t.ownerDocument||t:C)!==x&&n(t),t=t||x,this.selector=e,this.context=t,this.results=a(e,t,i,o),void(this.length=this.results.length)):(this.length=0,this.results=this.results||i,this)}function te(e){return null==e?String(e):U[q.call(e)]||"object"}function ie(e){return"object"==te(e)}function ne(e,t,i){for(var n in t)i&&(d(t[n])||l(t[n]))?(d(t[n])&&!d(e[n])&&(e[n]={}),l(t[n])&&!l(e[n])&&(e[n]=[]),ne(e[n],t[n],i)):void 0!==t[n]&&(e[n]=t[n])}function ae(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function oe(e,t,i,n){t=ae(t);var a,o,s,r,l,c=R[G(e)]||[];for(t.ns&&(r=t.ns,a=new RegExp("(?:^| )"+r.replace(" "," .* ?")+"(?: |$)")),o=[],s=0;s<c.length;s++)!(l=c[s])||t.e&&l.e!=t.e||t.ns&&!a.test(l.ns)||i&&G(l.fn)!==G(i)||n&&l.sel!=n||o.push(c[s]);return o}function se(e,t){return e.del&&!L&&e.e in F||!!t}function re(e){return j[e]||L&&F[e]||e}function le(t,i,n,a,o,s,r){var l,c=G(t),d=R[c]||(R[c]=[]);e.fn.each(i.split(/\s/),(function(i,c){if("ready"==c)return e(x).ready(p);var u=ae(c);u.fn=n,u.sel=o,u.e in j&&(n=function(t){var i=t.relatedTarget;if(!i||i!==this&&!e.contains(this,i))return u.fn.apply(this,arguments)}),u.del=s,l=s||n,u.proxy=function(e){if(!(e=m(e)).isImmediatePropagationStopped()){a&&(e.data=a);var i=l.apply(t,null==e._args?[e]:[e].concat(e._args));return!1===i&&(e.preventDefault(),e.stopPropagation()),i}},u.i=d.length,d.push(u),"addEventListener"in t?t.addEventListener(re(u.e),u.proxy,se(u,r)):t.attachEvent("on"+re(u.e),u.proxy)}))}function ce(t,i,n,a,o){var s=G(t);e.fn.each((i||"").split(/\s/),(function(i,r){e.fn.each(oe(t,r,n,a),(function(e,i){delete R[s][i.i],"removeEventListener"in t?t.removeEventListener(re(i.e),i.proxy,se(i,o)):t.detachEvent("on"+re(i.e),i.proxy)}))}))}function de(e){var t,i={originalEvent:e};for(t in e)Q.test(t)||void 0===e[t]||(i[t]=e[t]);return m(i,e)}function ue(){}return o={TAG:function(e){var t=e.replace(B,P).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"([\\x20\\t\\r\\n\\f]|$)");return function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}}},E.getElementsByTagName=Z((function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length})),(n=function(e){var n,a,o=e?e.ownerDocument||e:C;return o===x||9!==o.nodeType||o.documentElement,t=(x=o).documentElement,(a=x.defaultView)&&a.top!==a&&(a.addEventListener?a.addEventListener("unload",N,!1):a.attachEvent&&a.attachEvent("onunload",N)),E.attributes=Z((function(e){return e.className="i",!e.getAttribute("className")})),E.getElementsByTagName=Z((function(e){return e.appendChild(x.createComment("")),!e.getElementsByTagName("*").length})),E.getElementsByClassName=w.test(o.getElementsByClassName),E.getById=Z((function(e){return t.appendChild(e).id=$,!x.getElementsByName||!x.getElementsByName($).length})),E.getById?(k.find.ID=function(e,t){if(void 0!==t.getElementById){var i=t.getElementById(e);return i?[i]:[]}},k.filter.ID=function(e){var t=e.replace(B,P);return function(e){return e.getAttribute("id")===t}}):(delete k.find.ID,k.filter.ID=function(e){var t=e.replace(B,P);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}}),E.qsa=w.test(o.querySelectorAll),k.find.TAG=E.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):E.qsa?t.querySelectorAll(e):void 0}:function(e,t){for(var n,a=[],o=0,s=C.getElementsByTagName(e);n=s[o++];)1===n.nodeType&&i(t,n)&&a.push(n);return a},k.find.CLASS=E.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&documentIsHTML)return t.getElementsByClassName(e)},n=w.test(t.compareDocumentPosition),i=n||w.test(t.contains)?function(e,t){if(!e||!t)return!1;var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):e.compareDocumentPosition&&16&e.compareDocumentPosition(n)))}:function(e,t){if(!e)return!1;if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},o})(),a=function(e,t,n,a){if(!e)return n;var s,r,l,c,d,u,f,h,p,m=t?t.nodeType:9;if(c=y.exec(e),11!==m&&(c=y.exec(e)))if(s=c[1]){if(9===m){if(!(l=t.getElementById(s)))return n;if(l.id===s)return n.push(l),n}else if(t.ownerDocument&&(l=t.ownerDocument.getElementById(s))&&i(t,l)&&l.id===s)return n.push(l),n}else{if(s=c[2])return(u=k.find.TAG(s,t))&&D.apply(n,u),n;if((s=c[3])&&E.getElementsByClassName&&t.getElementsByClassName)return D.apply(n,t.getElementsByClassName(s)),n}if(1!==m&&(a=t,d=e),d)try{return D.apply(n,a.querySelectorAll(d)),n}catch(e){}if(f=(u=k.find.TAG("*",t)).length,r=0,h=c[2]){if(p=[],n=t.getElementsByTagName(h),l=void 0,"*"===h){for(;l=n[r++];)1===l.nodeType&&p.push(l);return p}return n}for(matches=(0,o.CLASS)(c[3]),r=0;r!==f&&null!=(l=u[r]);r++)l&&1===l.nodeType&&matches(l)&&n.push(l);return n},(e=function(e,t,i){return new ee(e,t)}).ajaxJSONP=function(t,i){if(!("type"in t))return e.ajax(t);var n,a,o,s,l,c,d=t.jsonpCallback,u=(r(d)?d():d)||"jsonp"+ ++K,f=x.createElement("script"),h=window[u],p=function(i){t.errorSwitch?t.errorSwitch():a({type:"error",timeout:1}),e(script).triggerHandler("error",i||"abort")},m={abort:p};if(i&&i.promise(m),a=function(a,o){e(f).remove(),a&&"error"==a.type||!n?t.error&&t.error(null,o||"error",m,t,i):t.success&&t.success(n[0],m,t,i),window[u]=h,n&&r(h)&&h(n[0]),h=n=void 0},window[u]=function(){n=arguments},o="$1"+u+"$2",t.url=t.url.replace(Y,o),s="",t.data){for(l in t.data)c="string"==typeof t.data[l]?t.data[l]:JSON.stringify(t.data[l]),s="&"+l+"="+encodeURIComponent(c);s&&(s=s.substring(1),s+="&")}return t.url+=(/\?/.test(t.url)?"&":"?")+s+(t.jsonpCB||"jsonp")+"="+u,"onload"in f?(f.onload=a,f.onerror=function(){a({type:"error"})}):f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&a()},t.beforeSend&&!1===t.beforeSend(m)?(console.log("abort",t),m):(f.src=t.url,x.getElementsByTagName("head")[0].appendChild(f),t.timeout>0&&(abortTimeout=setTimeout((function(){p("timeout"),m.isTimeout=1}),t.timeout)),m)},e.ajax=e._ajax=function(t){if("jsonp"==t.jsonp||"JSONP"==t.jsonp||"jsonp"==t.type||"JSONP"==t.type)return e.ajaxJSONP(t,t.deferred);var i,n,a,o=function(){var e,t,i;try{e=new XMLHttpRequest}catch(n){for(t=["Msxml3.XMLHTTP","Msxml2.XMLHTTP","Microsoft.XMLHTTP"],i=0,len=t.length;i<len;i++)try{e=new ActiveXObject(t[i]);break}catch(e){continue}}return e}(),s=t.data,r="";if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status?t.success&&t.success(o.responseText):0==o.status&&t.errorSwitch?t.errorSwitch():t.error&&t.error(o,o.responseText))},s&&"[object object]"==Object.prototype.toString.apply(s).toLowerCase())for(i in s)r+="&"+i+"="+encodeURIComponent(s[i]);r&&t.type.match(/get/i)&&(-1!=t.url.indexOf("?")?t.url+=r:t.url+="?"+r.substring(1),r="",s=null),window.XMLHttpRequest?s||(s=null):s||(s=void 0),o.open(t.type.toUpperCase(),t.url,!0),t.timeout&&(o.timeout=t.timeout);try{if(t.xhrFields)for(n in t.xhrFields)o[n]=t.xhrFields[n]}catch(e){}if(t.header)for(a in t.header)o.setRequestHeader(a,t.header[a]);t.header&&(t.header["Content-Type"]||t.header["Content-type"]||t.header["content-type"])&&!1===t.contentType||o.setRequestHeader("Content-type",t.contentType||"application/json;charset=UTF-8;"),t.beforeSend&&t.beforeSend(o),o.send(r?r.substring(1):s)},(g=x.createElement("div")).innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",v=(v=(b=g.getElementsByTagName("a")[0])&&b.style).cssText="float:left;opacity:.5",s={float:v.cssFloat?"cssFloat":"styleFloat"},g=null,b=null,r=function(e){return null!=e&&("function"==typeof e||"[object Function]"===Object.prototype.toString.call(e))},l=function(e){return"[object Array]"===Object.prototype.toString.apply(e)},c=function(e){return"string"==typeof e},d=function(e){return ie(e)&&!function(e){return null!=e&&e==e.window}(e)&&Object.getPrototypeOf(e)==Object.prototype},u=function(e){return null==e?"":(e+"").replace(I,"")},e.extend=function(e,t,i){for(var n in t)i&&(d(t[n])||l(t[n]))?(d(t[n])&&!d(e[n])&&(e[n]={}),l(t[n])&&!l(e[n])&&(e[n]=[]),ne(e[n],t[n],i)):void 0!==t[n]&&(e[n]=t[n]);return e},e.cookie=function(t,i,n){var a,o,s,r,l,c;if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(i))||null==i))return n=e.extend({},n),null==i&&(n.expires=-1),"number"==typeof n.expires&&(a=n.expires,(o=n.expires=new Date).setDate(o.getDate()+a)),i=String(i),x.cookie=[encodeURIComponent(t),"=",n.raw?i:encodeURIComponent(i),n.expires?"; expires="+n.expires.toUTCString():"","; path="+(n.path||"/"),n.domain?"; domain="+n.domain:"",n.secure?"; secure":""].join("");for(s=(n=i||{}).raw?function(e){return e}:decodeURIComponent,r=x.cookie.split("; "),c=0;l=r[c]&&r[c].split("=");c++)if(s(l[0])===t)return s(l[1]||"");return null},e.toJSON=JSON.stringify,h={src:!0,href:!0},p={isFunction:r,isArray:l,isString:c,isObject:ie,isPlainObject:d,trim:u,contains:i,readyList:[],find:function(e){var t={};return this.each((function(i,n){ee.call(t,e,n,t.results)})),t},match:function(e,t){var n=new ee(t),a=null;return n.each((function(t,n){if(n==e||i(n,e))return a=n,!0})),a},parents:function(e){var t,i,n,a,o,s;if(e&&this.results&&this.results.length>0&&(t=y.exec(e))&&((o=t[1])?i=function(e){return e.id==o}:(o=t[2])?(o=o.toUpperCase(),i=function(e){return e.tagName==o}):(o=t[3])&&(i=function(e){if(e.className){var t=e.className.split(" ");for(s=0;s<t.length;s++)if(t[s]==o)return!0;return!1}}),i))for(n=this.results[0];a=n.parentNode;){if(i(a))return new ee(a,this.context,[]);n=a}return new ee(null,this.context,[])},html:function(e){return e||""===e?this.each((function(t,i){i.innerHTML=e})):this.results&&this.results[0]?this.results[0].innerHTML:null},text:function(e){return"string"==typeof e?this.each((function(t,i){"string"==typeof i.textContent?i.textContent=e:i.innerText=e})):this.results&&this.results[0]?this.results[0].textContent||this.results[0].innerText:null},append:function(e){if(e){if(c(e)){var t,i=x.createElement("div");i.innerHTML=e,t=i.childNodes,this.each((function(e,i){for(var n,a=0;n=t[a++];)1==n.nodeType&&(n=n.cloneNode(!0),i.appendChild(n))}))}else this.each((function(t,i){i.appendChild(e)}));return this}},insertBefore:function(e,t){var i,n,a;if(e)return c(e)?((n=x.createElement("div")).innerHTML=e,a=n.childNodes,this.each((function(e,n){for(var o,s=0;o=a[s++];)1==o.nodeType&&(o=o.cloneNode(!0),(i=t||n.childNodes[0])?n.insertBefore(o,i):n.appendChild(o))}))):this.each((function(n,a){(i=t||a.childNodes[0])?a.insertBefore(e,i):a.appendChild(e)})),this},show:function(){return this.each((function(e,t){t.style.display="block"})),this},hide:function(){return this.each((function(e,t){t.style.display="none"})),this},removeClass:function(e){for(var t,i,n,a,o=this.results.length,s=0,r=0,l=(e||"").match(T)||[];r<o;r++)if(i=1===(t=this.results[r]).nodeType&&(t.className?(" "+t.className+" ").replace(S," "):"")){for(s=0;n=l[s++];)for(;i.indexOf(" "+n+" ")>=0;)i=i.replace(" "+n+" "," ");a=e?u(i):"",t.className!==a&&(t.className=a)}else t.className="";return this},addClass:function(e){for(var t,i,n,a,o=this.results.length,s=0,r=0,l=(e||"").match(T)||[];r<o;r++)if(i=1===(t=this.results[r]).nodeType&&(t.className?(" "+t.className+" ").replace(S," "):"")){for(s=0;n=l[s++];)for(;i.indexOf(" "+n+" ")<0;)i+=n+" ";a=e?u(i):"",t.className!==a&&(t.className=a)}else t.className=e;return this},attr:function(e,t){if(!e)return this;var i,n,a,o;if(void 0===t){if("string"==typeof e)return this.results&&this.results.length>0?this.getAttr(this.results[0],e):"";for(i in n=this.results?this.results.length:0,e)for(o=0;o<n;o++)a=this.results[o],h[i]?a[i]=e[i]:a.setAttribute(i+"",e[i])}else for(n=this.results?this.results.length:0,o=0;o<n;o++)(a=this.results[o]).setAttribute(e,t),h[e]?a[e]=t:a.setAttribute(e,t);return this},css:function(e,t){if(!e)return this;var i,n,a,o,r;if(void 0===t)if("string"==typeof e)this.css(e,0===t?"0":"inherit");else for(n=this.results?this.results.length:0,o=0;o<n;o++)for(i in e){r=V(i),r=s[r]||r,a=this.results[o];try{a.style[r]=e[i]}catch(e){console.log(e.message),console.log("css:"+r+":"+i)}}else try{for(n=this.results?this.results.length:0,o=0;o<n;o++)r=V(e),r=s[r]||r,(a=this.results[o]).style[r]=t}catch(e){return this}return this},remove:function(){var e,t,i=this.results?this.results.length:0;for(t=0;t<i;t++)(e=this.results[t]).parentNode.removeChild(e);return this.length=0,this.results=[],this},removeAttr:function(e){return this.each((function(t,i){i.setAttribute(e,""),i.removeAttribute(e)}))},ready:function(e){for(var t=0;this.readyList&&this.readyList[t];)p.call(window),t++;return this},hasClass:function(e){var t,i,n=this.results?this.results.length:0,a=[],s=o.CLASS(e);for(t=0;t<n;t++)s(i=this.results[t])&&a.push(i);return a.length},max:function(e,t){return e>t?e:t},width:function(){return this.results&&this.results[0]?p.max(this.results[0].offsetWidth,this.results[0].clientWidth):null},height:function(){return this.results&&this.results[0]?p.max(this.results[0].offsetHeight,this.results[0].clientHeight):null},val:function(e){return void 0===e?this.results&&this.results[0]?this.results[0].value:null:(this.results&&this.results[0]&&(this.results[0].value=e+""),this)},getAttr:function(e,t){return e.getAttribute(t)},each:function(e,t){var i=0;if(l(e))for(i=0;i<e.length&&!t.call(e[i],i,e[i]);i++);else if(r(e))for(t=e,e=this.results||[],i=0;i<e.length&&!t.call(e[i],i,e[i]);i++);else for(i in e)if(t.call(e[i],i,e[i]))break;return this}},(f=function(){var e,t=function(){f&&(p.ready(),f=void 0)};function i(){x.removeEventListener("DOMContentLoaded",i,!1),x.removeEventListener("load",i,!1),t()}function n(){"complete"==x.readyState&&(x.detachEvent("onreadystatechange",n),x.detachEvent("onload",e),t())}if(e=function(){x.detachEvent("onreadystatechange",n),x.detachEvent("onload",e),t()},x.addEventListener)x.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(x.attachEvent)x.attachEvent("onreadystatechange",n),window.attachEvent("onload",e);else if(x.lastChild==x.body)return t();(x.getElementsByTagName("body")||[]).length>0&&t()})(),e.fn=p,e.each=p.each,A.click=A.mousedown=A.mouseup=A.mousemove="MouseEvents",e.event={add:le,remove:ce},e.proxy=function(t,i){var n,a=2 in arguments&&M.call(arguments,2);if(r(t))return(n=function(){return t.apply(i,a?a.concat(M.call(arguments)):arguments)})._zid=G(t),n;if(c(i))return a?(a.unshift(t[i],t),e.proxy.apply(null,a)):e.proxy(t[i],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,i){return this.on(e,t,i)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,i,n){return this.on(e,t,i,n,1)},m=function(t,i){return!i&&t.isDefaultPrevented||(i||(i=t),e.each(J,(function(e,n){var a=i[e];t[e]=function(){return this[n]=X,a&&a.apply(i,arguments)},t[n]=z})),(void 0!==i.defaultPrevented?i.defaultPrevented:"returnValue"in i?!1===i.returnValue:i.getPreventDefault&&i.getPreventDefault())&&(t.isDefaultPrevented=X)),t},e.fn.delegate=function(e,t,i){return this.on(t,e,i)},e.fn.undelegate=function(e,t,i){return this.off(t,e,i)},e.fn.live=function(t,i){return e(x.getElementsByTagName("body")[0]).delegate(this.selector,t,i),this},e.fn.die=function(t,i){return e(x.getElementsByTagName("body")[0]).undelegate(this.selector,t,i),this},e.fn.on=function(t,i,n,a,o){var s,l,d=this;return t&&!c(t)?(e.each(t,(function(e,t){d.on(e,i,n,t,o)})),d):(c(i)||r(a)||!1===a||(a=n,n=i,i=void 0),void 0!==a&&!1!==n||(a=n,n=void 0),!1===a&&(a=z),d.each((function(r,c){o&&(s=function(e){return ce(c,e.type,a),a.apply(this,arguments)}),i&&(l=function(t){var n,o=(t=t||window.event).target||t.srcElement,r=p.match(o,i);if(r&&r!==c)return n=e.extend(de(t),{currentTarget:r,liveFired:c}),(s||a).apply(r,[n].concat(M.call(arguments,1)))}),le(c,t,a,n,i,l||s)})))},e.fn.off=function(t,i,n){var a=this;return t&&!c(t)?(e.each(t,(function(e,t){a.off(e,i,t)})),a):(c(i)||r(n)||!1===n||(n=i,i=void 0),!1===n&&(n=z),a.each((function(){ce(this,t,n,i)})))},e.fn.trigger=function(t,i){return(t=c(t)||d(t)?e.Event(t):m(t))._args=i,this.each((function(){t.type in F&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,i)}))},e.fn.triggerHandler=function(t,i){var n,a;return this.each((function(o,s){(n=de(c(t)?e.Event(t):t))._args=i,n.target=s,e.each(oe(s,t.type||t),(function(e,t){if(a=t.proxy(n),n.isImmediatePropagationStopped())return!1}))})),a},e.fn.each("focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" "),(function(t,i){e.fn[i]=function(e){return 0 in arguments?this.bind(i,e):this.trigger(i)}})),e.Event=function(e,t){c(te)||(t=te).type;var i,n=x.createEvent(A[te]||"Events"),a=!0;if(t)for(i in t)"bubbles"==i?a=!!t[i]:n[i]=t[i];return n.initEvent(te,a,!0),m(n)},e.fn.autoHeight=function(){this.each((function(){e(this).on("keyup",(function(){var e;(e=this).style.height="auto",e.style.height=e.scrollHeight+"px"}))}))},e.isBoolean=ue,e.isDate=ue,e.isFunction=ue,e.isNaN=ue,e.isNumber=ue,e.isObject=ue,e.isRegExp=ue,e.isString=ue,e.isUndefined=ue,function(){var t,i,n=e,a="Array Boolean Date NaN Number Function Object RegExp Undefined".split(" ");for(t=0;t<a.length;t++)n["is"+(i=a[t])]=function(e){return function(t){return t!=t?"NaN"===e:RegExp(e).test(Object.prototype.toString.call(t))}}(i)}(),ee.prototype=e.fn,e}();t.default=n},,,,,,function(e,t,i){"use strict";i(60),i(11),i(37),i(9),i(1),i(26),i(5),i(28),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=o(i(20)),a=o(i(0));function o(e){return e&&e.__esModule?e:{default:e}}var s={parseMsgByRule:function(e,t,i){if(t&&e){var o=n.default.regFace,s=n.default.regEmo,r=1;return content=t[e.mt||0],content?content=content.replace(/\$\{([^,]+),?([^,]+)?,?([^,]+)?,?([^,]+)?\}/g,(function(t,i,n,a,o){if(r="1"==o?1:0,!n&&!a)return e[i];a=parseInt(a);var s=e[i];return s?(a>0&&s.replace(/\[#([^#]+)#\]/g,(function(e,t,i,n){return(i<a&&i+e.length>=a||i<a)&&(a+=e.length-1),e})),e[i].substring(n,a)):""})):(content=e.content)||(content=t[0]),(r||i&&i.notPlainText)&&(content=function(e,t){return e&&(e+"").replace(/<(?:.|\s)*?>/gi,"").substring(0,t||100)}(content)),o?content&&(content=function(e,t){if(!e)return e;var i=a.default.emo;return i&&(e=e.replace(o,(function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),a=(n-56320+(t-55296<<10)+65536).toString(16);return i[a]?'<img class="img-emo" src="/res/emoji/32/'+a+'.png" />':i[t+"_"+n]?'<img class="img-emo" src="/res/emoji/32/'+t+"_"+n+'.png" />':e}))),e=e.replace(s,(function(e){var t=e.replace(/^\[#([\d\w_]+)#\]/g,"$1");return i&&i[t]||!i?'<img class="img-emo" src="/res/emoji/32/'+t+'.png" />':e}))}(content)):content&&(content=content.replace(s,"[face]")),content}},formatUnreadMsg:function(e){var t;return e.lastMsgContent?(t=n.default.lastMsgRule,a.default.needHttps&&e.companyLogo&&(e.companyLogo=e.companyLogo.replace(/^http:/,a.default.needHttps)),void 0!==e.unreadMsgNumber&&(e.unreadMsgCount=e.unreadMsgNumber),e.lastMsg=JSON.parse(e.lastMsgContent),e.msgContent=this.parseMsgByRule(e.lastMsg,t),{chatUrl:(this.loaderHost||location.origin)+"/visitor/mobile/chat.html?companyId="+e.companyId+"&platformSign="+encodeURIComponent(e.signature)+(this.queryParams.fvMsg?"&fvMsg="+encodeURIComponent(this.queryParams.fvMsg):"")+"&metaData="+encodeURIComponent(this.queryParams.metaData)+"&myData="+encodeURIComponent(this.queryParams.myData),msgId:e.mid,platformId:e.platformId||void 0,companyId:e.companyId,companyLogo:e.companyLogo,companyName:e.companyName,msgContent:e.msgContent,unreadMsgCount:e.unreadMsgCount}):{unreadMsgCount:e.unreadMsgNumber||e.unreadMsgCount||0}},sendMsgboxUnread:function(){var e,t={cookieName:"",cookieValue:"",readySendName:"",readySend:{lastMid:"",order:[123],123:{}},queue:[],pageTag:(new Date).getTime(),checkTimer:null,timeoutTimer:null},i=null;function n(){t.readySend=$.store(t.readySendName),t.readySend=t.readySend?JSON.parse(t.readySend):{order:[]}}function a(e,i){n();var a,o=t.readySend.order;if(0===i){if(e.mid&&(t.readySend.lastMid=e.mid),o.length>0)for(t.readySend[e.mid]=void 0,delete t.readySend[e.mid],a=0;a<o.length;a++)o[a]==e.mid&&o.splice(a,1)}else if(!t.readySend[e.mid]&&(t.readySend[e.mid]=e,t.readySend.order.unshift(e.mid),t.readySend.order.length>10)){for(a=10;a<o.length;a++)t.readySend[o[a]]=void 0,delete t.readySend[o[a]];t.readySend.order.length=10}$.store(t.readySendName,JSON.stringify(t.readySend))}function o(i){if(i&&(t.queue.push(i),a(i,1)),0!=t.queue.length){var n=$.cookie(t.cookieName);n&&(t.checkTimer||t.timeoutTimer)?t.checkTimer||t.timeoutTimer||(t.timeoutTimer=setTimeout((function(){t.timeoutTimer=null,o()}),300)):(!n&&t.checkTimer&&clearTimeout(t.checkTimer),!n&&t.timeoutTimer&&clearTimeout(t.timeoutTimer),e(t.queue.shift()))}}return e=function(e){if(e){if(n(),t.readySend.lastMid&&t.readySend.lastMid>=e.mid)return o();t.cookieValue=e.mid+"_"+t.pageTag,$.cookie(t.cookieName,t.cookieValue),t.checkTimer=setTimeout((function(){t.checkTimer=null,$.cookie(t.cookieName)==t.cookieValue&&(i(e),$.cookie(t.cookieName,""),a(e,0)),$.cookie(t.cookieName)?t.timeoutTimer=setTimeout((function(){t.timeoutTimer=null,o()}),300):o()}),200)}},{send:o,queue:t.queue,init:function(n){var a;!i&&_self.visitorId&&(t.cookieName="unreadNewMsg_"+_self.visitorId,t.readySendName="unreadNewMsgMap_"+_self.visitorId,$.cookie(t.readySendName,""),t.cookieValue=$.cookie(t.cookieName),t.readySend=$.store(t.readySendName),t.readySend?t.readySend=JSON.parse(t.readySend):(t.readySend={order:[]},$.store(t.readySendName,'{ "order": [] }')),t.cookieValue&&(a=t.cookieValue.split("_")[0],t.readySend[a]&&e(t.readySend[a])),i=n)}}}()};t.default=s},,,,,,function(e,t,i){"use strict";i(11),i(1),i(17),i(112),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=f(i(0)),a=f(i(20)),o=f(i(3)),s=i(10),r=f(i(40)),l=f(i(67)),c=f(i(95)),d=f(i(180)),u=f(i(181));function f(e){return e&&e.__esModule?e:{default:e}}var h,p={};function m(e){if((0,s.handleNetwok)())return!1;var t=o.default.getStatusData(),i=o.default.getConfig("busyCanSend");if(t.talkType!=a.default.talkTypeQueue||2!=t.chatStatus||i)return 0!=o.default.getStatusByKey("chatStatus")||(n.default.showTip("请先接入会话"),!1);n.default.publish("changeDom",{name:"#busyTipLine",removeCls:"hide"})}function g(e,t){var i=o.default.getStatusByKey("talkType");h==n.default.Constants.talkTypeQueue&&i==n.default.Constants.talkTypeChat||n.default.publish("setTheme",t),i!=n.default.Constants.talkTypeRobot&&n.default.publish("endRobot"),n.default.publish("setUrlList"),n.default.publish("_changeCloseBtn","1"),h=i}n.default.subscriber.call(p,"handle"),p.setSub("connect"),d.default.init(p),u.default.init(p),n.default.publish("_checkNetworkStatus"),n.default.addEventPoint("registChat",{once:!1,check:function(e){var t=o.default.getStatusData();return 0===t.chatStatus||(!(2!=t.chatStatus||t.talkType!=n.default.Constants.talkTypeRobot||!e||!e.robotToHumanKey)||void 0)},callback:function(e){var t,i=o.default.getVisitorInfo(),a=i.visEvt,s=i.routeEntranceId;t={et:109,media:6,osName:n.default.queryParams.osName||n.default.Device.OS,osVersion:n.default.queryParams.osVersion||"1",browserName:n.default.queryParams.browserName||"webview",browserVersion:"1",myData:i.myData,screenResolution:window.screen.width+"x"+window.screen.height,echatTag:i.echatTag,chatLaunchFrom:i.chatLaunchFrom,visEvt:a},s&&(t.routeEntranceId=s,o.default.setVisitorInfo({routeEntranceId:void 0,lastRouteEntranceId:s})),e&&$.extend(t,e),console.log("注册对话了"),p.publish("sendMessage",t)}}),n.default.subscribe("visitorClose",(function(e,t){function i(){o.default.setStatusData({visitorClose:!0}),2==o.default.getStatusData().chatStatus?n.default.publish("_endChat"):n.default.publish("chatEnded")}if(1===t||o.default.getStatusData().chatStatus<1)return i();n.default.showDialog({tip:o.default.getStatusData().isInWorkOrder?lanRes.visitor188:lanRes.closeTip,ok:i,cancel:function(){o.default.setStatusData({visitorClose:!1})}})})),n.default.addEventPoint("_sendMsgLocation",{once:!1,check:m,callback:c.default}),n.default.addEventPoint("_sendMsg",{once:!1,check:m,callback:function(e){var t,i,n=o.default.getStatusData(),r=2==n.chatStatus&&n.talkType==a.default.talkTypeRobot;(i=e||l.default.input.getInput(!0)).trim()&&(i.match(/^\[#echat::lihong#\]$/),l.default.input.plainText&&(i=(0,s.plainTextToSendMsg)(i)),t={data:{content:i,et:r?130:105},filterMsg:!1},(0,c.default)(t))}}),p.subscribe("displayRouter",(function(e,t){var i=o.default.formatRouteList();if(i){var a=i.chatBoxTitle||lanRes.onlineService;o.default.setConfig("pageTitle",a),n.default.publish("__setTitle",a),n.default.publish("displayRouterDom",i)}else n.default.triggerEventOnPoint("registChat")})),p.subscribe("waitingChat",(function(e,t){var i,a,r={isInWorkOrder:!1,isInEntryOrCode:!1},l=o.default.getStatusData();if(4==l.status&&t.jobWindowInfo)r.isInWorkOrder=!0,n.default.publish("enterWorkorder",t);else if(o.default.getEntryInfo(t))n.default.publish("displayEntryDom",t),r.isInEntryOrCode=!0;else if(o.default.getStatusByKey("captChaToken"))n.default.publish("displayCode",{captChaToken:o.default.getStatusByKey("captChaToken")}),r.isInEntryOrCode=!0;else if(1!=l.canChatNow){var c=o.default.getLeaveConfig(t);2===o.default.getStatusData().status&&c&&(a=(i=c).thirdPartyUrl,i&&2==i.enable&&a?(n.default.publish("__chatStatus","leaveToUrl"),n.default.publish("_changeCloseBtn","0"),a=(0,s.getADURL)(1==i.enableThirdPartyParams,i.thirdPartyParams,a),n.default.publish("__jumpToUrl",a),$("body").html("")):(2==i.enable&&!a||0==i.enable)&&(n.default.publish("__chatStatus","leaveDisabled"),n.default.publish("leaveDisabled",i)))}o.default.setStatusData(r)})),p.subscribe("startLeave",(function(e){n.default.publish("__setTitle",lanRes.leaveWord);var t=o.default.getStatusByKey("visitorEntryInput");t.entryVisitorMsg&&p.publish("sendMessage",{et:105,isSave:0,content:t.entryVisitorMsg}),t.entryLeaveContent&&(p.publish("sendMessage",{et:105,isSave:0,content:t.entryLeaveContent}),setTimeout((function(){n.default.publish("_endChat")}),100))})),p.subscribe("_endChat",(function(e,t){p.publish("sendMessage",{et:107})})),p.subscribe("startRobot",g),p.subscribe("startLeave",g),p.subscribe("startChat",g),p.subscribe("startQueue",g),p.subscribe("chatEnded",(function(e,t){var i=t?1==t.closeReason:o.default.getStatusByKey("visitorClose"),a=o.default.getStatusData(),s=o.default.getVisitorInfo(),l=t||{},c=1==l.changeRoute||1==l.closeTag,d=2==a.chatStatus&&a.talkType==n.default.Constants.talkTypeChat,u=!c&&d&&a.satisfySubmited!=a.talkId;h=0,n.default.publish("clearSendingMsg","endchat"),n.default.publish("endRobot"),p.unSubscribe("getMsgTyping"),p.unSubscribe("clearMsgTyping"),p.unSubscribe("textInputChangeEvt"),r.default.removeMsg({id:"restartChat"}),r.default.showMsg({id:"restartChat",mt:20,tm:(new Date).getTime(),content:'<span class="btn-restart">'+lanRes.toContinueChat+"</span>"}),1!=l.changeRoute&&n.default.publish("_changeCloseBtn","0"),u&&(u=n.default.publish("showSatisfy",1)),n.default.publish("__chatStatus","end-"+(l.closeReason||"0")+"-"+(u?1:0)),o.default.setStatusData({visitorClose:i,sendMsgNum:0,chatStatus:0,staffId:""}),s.lastRouteEntranceId&&o.default.setVisitorInfo({routeEntranceId:s.lastRouteEntranceId}),!i||c||u||n.default.publish("_closeWin"),delete n.default.queryParams.autoPop,delete n.default.queryParams.autoChat,n.default.publish("__setTitle","")})),n.default.subscribe("restartChat",(function(e,t){var i=o.default.getConfig("config672")||{};o.default.getStatusByKey("chatStatus")>0||n.default.triggerEventOnPoint("registChat",{nonce:i.nonce,reChatTag:i.reChatTag})})),n.default.subscribe("_addSendMsgNum",(function(e,t){var i=o.default.getStatusByKey("sendMsgNum");o.default.setStatusByKey("sendMsgNum",i+1),n.default.publish("initEvaluate",t)}));var v=p;t.default=v},function(e,t,i){},function(e,t,i){"use strict";var n;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i(61),i(63),i(90),i(38),i(27),i(64),i(22),i(113),i(60),i(120),i(11),i(59),i(37),i(33),i(1),i(26),i(92),i(17),i(5),i(28),i(93),i(7),function(o,s,r){function l(e,t){for(var i in this.wrapper="string"==typeof e?s.querySelector(e):e,this.scroller=this.wrapper.children[0],this.scrollerStyle=this.scroller.style,this.options={resizeScrollbars:!0,mouseWheelSpeed:20,snapThreshold:.334,disablePointer:!f.hasPointer,disableTouch:f.hasPointer||!f.hasTouch,disableMouse:f.hasPointer||f.hasTouch,startX:0,startY:0,scrollY:!0,directionLockThreshold:5,momentum:!0,bounce:!0,bounceTime:600,bounceEasing:"",preventDefault:!0,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:!0,useTransition:!0,useTransform:!0,bindToWrapper:void 0===o.onmousedown},t)this.options[i]=t[i];this.translateZ=this.options.HWCompositing&&f.hasPerspective?" translateZ(0)":"",this.options.useTransition=f.hasTransition&&this.options.useTransition,this.options.useTransform=f.hasTransform&&this.options.useTransform,this.options.eventPassthrough=!0===this.options.eventPassthrough?"vertical":this.options.eventPassthrough,this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault,this.options.scrollY="vertical"!=this.options.eventPassthrough&&this.options.scrollY,this.options.scrollX="horizontal"!=this.options.eventPassthrough&&this.options.scrollX,this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough,this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold,this.options.bounceEasing="string"==typeof this.options.bounceEasing?f.ease[this.options.bounceEasing]||f.ease.circular:this.options.bounceEasing,this.options.resizePolling=void 0===this.options.resizePolling?60:this.options.resizePolling,!0===this.options.tap&&(this.options.tap="tap"),this.options.useTransition||this.options.useTransform||/relative|absolute/i.test(this.scrollerStyle.position)||(this.scrollerStyle.position="relative"),"scale"==this.options.shrinkScrollbars&&(this.options.useTransition=!1),this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1,3==this.options.probeType&&(this.options.useTransition=!1),this.x=0,this.y=0,this.directionX=0,this.directionY=0,this._events={},this._init(),this.refresh(),this.scrollTo(this.options.startX,this.options.startY),this.enable()}function c(e,t,i){var n=s.createElement("div"),a=s.createElement("div");return!0===i&&(n.style.cssText="position:absolute;z-index:9999",a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"),a.className="iScrollIndicator","h"==e?(!0===i&&(n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0",a.style.height="100%"),n.className="iScrollHorizontalScrollbar"):(!0===i&&(n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px",a.style.width="100%"),n.className="iScrollVerticalScrollbar"),n.style.cssText+=";overflow:hidden",t||(n.style.pointerEvents="none"),n.appendChild(a),n}function d(e,t){for(var i in this.wrapper="string"==typeof t.el?s.querySelector(t.el):t.el,this.wrapperStyle=this.wrapper.style,this.indicator=this.wrapper.children[0],this.indicatorStyle=this.indicator.style,this.scroller=e,this.options={listenX:!0,listenY:!0,interactive:!1,resize:!0,defaultScrollbars:!1,shrink:!1,fade:!1,speedRatioX:0,speedRatioY:0},t)this.options[i]=t[i];if(this.sizeRatioX=1,this.sizeRatioY=1,this.maxPosX=0,this.maxPosY=0,this.options.interactive&&(this.options.disableTouch||(f.addEvent(this.indicator,"touchstart",this),f.addEvent(o,"touchend",this)),this.options.disablePointer||(f.addEvent(this.indicator,f.prefixPointerEvent("pointerdown"),this),f.addEvent(o,f.prefixPointerEvent("pointerup"),this)),this.options.disableMouse||(f.addEvent(this.indicator,"mousedown",this),f.addEvent(o,"mouseup",this))),this.options.fade){this.wrapperStyle[f.style.transform]=this.scroller.translateZ;var n=f.style.transitionDuration;if(!n)return;this.wrapperStyle[n]=f.isBadAndroid?"0.0001ms":"0ms";var a=this;f.isBadAndroid&&u((function(){"0.0001ms"===a.wrapperStyle[n]&&(a.wrapperStyle[n]="0s")})),this.wrapperStyle.opacity="0"}}var u=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(e){o.setTimeout(e,1e3/60)},f=function(){function e(e){return!1!==n&&(""===n?e:n+e.charAt(0).toUpperCase()+e.substr(1))}var t={},i=s.createElement("div").style,n=function(){for(var e=["t","webkitT","MozT","msT","OT"],t=0,n=e.length;t<n;t++)if(e[t]+"ransform"in i)return e[t].substr(0,e[t].length-1);return!1}();t.getTime=Date.now||function(){return(new Date).getTime()},t.extend=function(e,t){for(var i in t)e[i]=t[i]},t.addEvent=function(e,t,i,n){e.addEventListener(t,i,!!n)},t.removeEvent=function(e,t,i,n){e.removeEventListener(t,i,!!n)},t.prefixPointerEvent=function(e){return o.MSPointerEvent?"MSPointer"+e.charAt(7).toUpperCase()+e.substr(8):e},t.momentum=function(e,t,i,n,a,o){var s,l,c=e-t,d=r.abs(c)/i;return l=d/(o=void 0===o?6e-4:o),(s=e+d*d/(2*o)*(c<0?-1:1))<n?(s=a?n-a/2.5*(d/8):n,l=(c=r.abs(s-e))/d):s>0&&(s=a?a/2.5*(d/8):0,l=(c=r.abs(e)+s)/d),{destination:r.round(s),duration:l}};var l=e("transform");return t.extend(t,{hasTransform:!1!==l,hasPerspective:e("perspective")in i,hasTouch:"ontouchstart"in o,hasPointer:!(!o.PointerEvent&&!o.MSPointerEvent),hasTransition:e("transition")in i}),t.isBadAndroid=function(){var e=o.navigator.appVersion;if(/Android/.test(e)&&!/Chrome\/\d/.test(e)){var t=e.match(/Safari\/(\d+.\d)/);return!(t&&"object"==a(t)&&t.length>=2)||parseFloat(t[1])<535.19}return!1}(),t.extend(t.style={},{transform:l,transitionTimingFunction:e("transitionTimingFunction"),transitionDuration:e("transitionDuration"),transitionDelay:e("transitionDelay"),transformOrigin:e("transformOrigin"),touchAction:e("touchAction")}),t.hasClass=function(e,t){return new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)},t.addClass=function(e,i){if(!t.hasClass(e,i)){var n=e.className.split(" ");n.push(i),e.className=n.join(" ")}},t.removeClass=function(e,i){if(t.hasClass(e,i)){var n=new RegExp("(^|\\s)"+i+"(\\s|$)","g");e.className=e.className.replace(n," ")}},t.offset=function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return{left:t,top:i}},t.preventDefaultException=function(e,t){for(var i in t)if(t[i].test(e[i]))return!0;return!1},t.extend(t.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3}),t.extend(t.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(e){return e*(2-e)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(e){return r.sqrt(1- --e*e)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(e){return(e-=1)*e*(5*e+4)+1}},bounce:{style:"",fn:function(e){return(e/=1)<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},elastic:{style:"",fn:function(e){return 0===e?0:1==e?1:.4*r.pow(2,-10*e)*r.sin((e-.055)*(2*r.PI)/.22)+1}}}),t.tap=function(e,t){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.pageX=e.pageX,i.pageY=e.pageY,e.target.dispatchEvent(i)},t.click=function(e){var t,i=e.target;/(SELECT|INPUT|TEXTAREA)/i.test(i.tagName)||((t=s.createEvent(o.MouseEvent?"MouseEvents":"Event")).initEvent("click",!0,!0),t.view=e.view||o,t.detail=1,t.screenX=i.screenX||0,t.screenY=i.screenY||0,t.clientX=i.clientX||0,t.clientY=i.clientY||0,t.ctrlKey=!!e.ctrlKey,t.altKey=!!e.altKey,t.shiftKey=!!e.shiftKey,t.metaKey=!!e.metaKey,t.button=0,t.relatedTarget=null,t._constructed=!0,i.dispatchEvent(t))},t.getTouchAction=function(e,t){var i="none";return"vertical"===e?i="pan-y":"horizontal"===e&&(i="pan-x"),t&&"none"!=i&&(i+=" pinch-zoom"),i},t.getRect=function(e){if(e instanceof SVGElement){var t=e.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}return{top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}},t}();l.prototype={version:"5.2.0-snapshot",_init:function(){this._initEvents(),(this.options.scrollbars||this.options.indicators)&&this._initIndicators(),this.options.mouseWheel&&this._initWheel(),this.options.snap&&this._initSnap(),this.options.keyBindings&&this._initKeys()},destroy:function(){this._initEvents(!0),clearTimeout(this.resizeTimeout),this.resizeTimeout=null,this._execEvent("destroy")},_transitionEnd:function(e){e.target==this.scroller&&this.isInTransition&&(this._transitionTime(),this.resetPosition(this.options.bounceTime)||(this.isInTransition=!1,this._execEvent("scrollEnd")))},_start:function(e){if(1!=f.eventType[e.type]&&0!==(e.which?e.button:e.button<2?0:4==e.button?1:2))return;if(this.enabled&&(!this.initiated||f.eventType[e.type]===this.initiated)){!this.options.preventDefault||f.isBadAndroid||f.preventDefaultException(e.target,this.options.preventDefaultException)||e.preventDefault();var t,i=e.touches?e.touches[0]:e;this.initiated=f.eventType[e.type],this.moved=!1,this.distX=0,this.distY=0,this.directionX=0,this.directionY=0,this.directionLocked=0,this.startTime=f.getTime(),this.options.useTransition&&this.isInTransition?(this._transitionTime(),this.isInTransition=!1,t=this.getComputedPosition(),this._translate(r.round(t.x),r.round(t.y)),this._execEvent("scrollEnd")):!this.options.useTransition&&this.isAnimating&&(this.isAnimating=!1,this._execEvent("scrollEnd")),this.startX=this.x,this.startY=this.y,this.absStartX=this.x,this.absStartY=this.y,this.pointX=i.pageX,this.pointY=i.pageY,this._execEvent("beforeScrollStart")}},_move:function(e){if(this.enabled&&f.eventType[e.type]===this.initiated){this.options.preventDefault&&e.preventDefault();var t,i,n,a,o=e.touches?e.touches[0]:e,s=o.pageX-this.pointX,l=o.pageY-this.pointY,c=f.getTime();if(this.pointX=o.pageX,this.pointY=o.pageY,this.distX+=s,this.distY+=l,n=r.abs(this.distX),a=r.abs(this.distY),!(c-this.endTime>300&&n<10&&a<10)){if(this.directionLocked||this.options.freeScroll||(n>a+this.options.directionLockThreshold?this.directionLocked="h":a>=n+this.options.directionLockThreshold?this.directionLocked="v":this.directionLocked="n"),"h"==this.directionLocked){if("vertical"==this.options.eventPassthrough)e.preventDefault();else if("horizontal"==this.options.eventPassthrough)return void(this.initiated=!1);l=0}else if("v"==this.directionLocked){if("horizontal"==this.options.eventPassthrough)e.preventDefault();else if("vertical"==this.options.eventPassthrough)return void(this.initiated=!1);s=0}s=this.hasHorizontalScroll?s:0,l=this.hasVerticalScroll?l:0,t=this.x+s,i=this.y+l,(t>0||t<this.maxScrollX)&&(t=this.options.bounce?this.x+s/3:t>0?0:this.maxScrollX),(i>0||i<this.maxScrollY)&&(i=this.options.bounce?this.y+l/3:i>0?0:this.maxScrollY),this.directionX=s>0?-1:s<0?1:0,this.directionY=l>0?-1:l<0?1:0,this.moved||this._execEvent("scrollStart"),this.moved=!0,this._translate(t,i),c-this.startTime>300&&(this.startTime=c,this.startX=this.x,this.startY=this.y,1==this.options.probeType&&this._execEvent("scroll")),this.options.probeType>1&&this._execEvent("scroll")}}},_end:function(e){if(this.enabled&&f.eventType[e.type]===this.initiated){this.options.preventDefault&&!f.preventDefaultException(e.target,this.options.preventDefaultException)&&e.preventDefault();var t,i,n=(e.changedTouches&&e.changedTouches[0],f.getTime()-this.startTime),a=r.round(this.x),o=r.round(this.y),s=r.abs(a-this.startX),l=r.abs(o-this.startY),c=0,d="";if(this.isInTransition=0,this.initiated=0,this.endTime=f.getTime(),!this.resetPosition(this.options.bounceTime)){if(this.scrollTo(a,o),!this.moved)return this.options.tap&&f.tap(e,this.options.tap),this.options.click&&f.click(e),void this._execEvent("scrollCancel");if(this._events.flick&&n<200&&s<100&&l<100)return void this._execEvent("flick");if(this.options.momentum&&n<300&&(t=this.hasHorizontalScroll?f.momentum(this.x,this.startX,n,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:a,duration:0},i=this.hasVerticalScroll?f.momentum(this.y,this.startY,n,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:o,duration:0},a=t.destination,o=i.destination,c=r.max(t.duration,i.duration),this.isInTransition=1),this.options.snap){var u=this._nearestSnap(a,o);this.currentPage=u,c=this.options.snapSpeed||r.max(r.max(r.min(r.abs(a-u.x),1e3),r.min(r.abs(o-u.y),1e3)),300),a=u.x,o=u.y,this.directionX=0,this.directionY=0,d=this.options.bounceEasing}return a!=this.x||o!=this.y?((a>0||a<this.maxScrollX||o>0||o<this.maxScrollY)&&(d=f.ease.quadratic),void this.scrollTo(a,o,c,d)):void this._execEvent("scrollEnd")}}},_resize:function(){var e=this;clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout((function(){e.refresh()}),this.options.resizePolling)},resetPosition:function(e){var t=this.x,i=this.y;return e=e||0,!this.hasHorizontalScroll||this.x>0?t=0:this.x<this.maxScrollX&&(t=this.maxScrollX),!this.hasVerticalScroll||this.y>0?i=0:this.y<this.maxScrollY&&(i=this.maxScrollY),(t!=this.x||i!=this.y)&&(this.scrollTo(t,i,e,this.options.bounceEasing),!0)},disable:function(){this.enabled=!1},enable:function(){this.enabled=!0},refresh:function(){f.getRect(this.wrapper),this.wrapperWidth=this.wrapper.clientWidth,this.wrapperHeight=this.wrapper.clientHeight;var e=f.getRect(this.scroller);this.scrollerWidth=e.width,this.scrollerHeight=e.height,this.maxScrollX=this.wrapperWidth-this.scrollerWidth,this.maxScrollY=this.wrapperHeight-this.scrollerHeight,this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0,this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0,this.hasHorizontalScroll||(this.maxScrollX=0,this.scrollerWidth=this.wrapperWidth),this.hasVerticalScroll||(this.maxScrollY=0,this.scrollerHeight=this.wrapperHeight),this.endTime=0,this.directionX=0,this.directionY=0,f.hasPointer&&!this.options.disablePointer&&(this.wrapper.style[f.style.touchAction]=f.getTouchAction(this.options.eventPassthrough,!0),this.wrapper.style[f.style.touchAction]||(this.wrapper.style[f.style.touchAction]=f.getTouchAction(this.options.eventPassthrough,!1))),this.wrapperOffset=f.offset(this.wrapper),this._execEvent("refresh"),this.resetPosition()},on:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)},off:function(e,t){if(this._events[e]){var i=this._events[e].indexOf(t);i>-1&&this._events[e].splice(i,1)}},_execEvent:function(e){if(this._events[e]){var t=0,i=this._events[e].length;if(i)for(;t<i;t++)this._events[e][t].apply(this,[].slice.call(arguments,1))}},scrollBy:function(e,t,i,n){e=this.x+e,t=this.y+t,i=i||0,this.scrollTo(e,t,i,n)},scrollTo:function(e,t,i,n){n=n||f.ease.circular,this.isInTransition=this.options.useTransition&&i>0;var a=this.options.useTransition&&n.style;!i||a?(a&&(this._transitionTimingFunction(n.style),this._transitionTime(i)),this._translate(e,t)):this._animate(e,t,i,n.fn)},scrollToElement:function(e,t,i,n,a){if(e=e.nodeType?e:this.scroller.querySelector(e)){var o=f.offset(e);o.left-=this.wrapperOffset.left,o.top-=this.wrapperOffset.top;var s=f.getRect(e),l=f.getRect(this.wrapper);!0===i&&(i=r.round(s.width/2-l.width/2)),!0===n&&(n=r.round(s.height/2-l.height/2)),o.left-=i||0,o.top-=n||0,o.left=o.left>0?0:o.left<this.maxScrollX?this.maxScrollX:o.left,o.top=o.top>0?0:o.top<this.maxScrollY?this.maxScrollY:o.top,t=null==t||"auto"===t?r.max(r.abs(this.x-o.left),r.abs(this.y-o.top)):t,this.scrollTo(o.left,o.top,t,a)}},_transitionTime:function(e){if(this.options.useTransition){e=e||0;var t=f.style.transitionDuration;if(t){if(this.scrollerStyle[t]=e+"ms",!e&&f.isBadAndroid){this.scrollerStyle[t]="0.0001ms";var i=this;u((function(){"0.0001ms"===i.scrollerStyle[t]&&(i.scrollerStyle[t]="0s")}))}if(this.indicators)for(var n=this.indicators.length;n--;)this.indicators[n].transitionTime(e)}}},_transitionTimingFunction:function(e){if(this.scrollerStyle[f.style.transitionTimingFunction]=e,this.indicators)for(var t=this.indicators.length;t--;)this.indicators[t].transitionTimingFunction(e)},_translate:function(e,t){if(this.options.useTransform?this.scrollerStyle[f.style.transform]="translate("+e+"px,"+t+"px)"+this.translateZ:(e=r.round(e),t=r.round(t),this.scrollerStyle.left=e+"px",this.scrollerStyle.top=t+"px"),this.x=e,this.y=t,this.indicators)for(var i=this.indicators.length;i--;)this.indicators[i].updatePosition()},_initEvents:function(e){var t=e?f.removeEvent:f.addEvent,i=this.options.bindToWrapper?this.wrapper:o;t(o,"orientationchange",this),t(o,"resize",this),this.options.click&&t(this.wrapper,"click",this,!0),this.options.disableMouse||(t(this.wrapper,"mousedown",this),t(i,"mousemove",this),t(i,"mousecancel",this),t(i,"mouseup",this)),f.hasPointer&&!this.options.disablePointer&&(t(this.wrapper,f.prefixPointerEvent("pointerdown"),this),t(i,f.prefixPointerEvent("pointermove"),this),t(i,f.prefixPointerEvent("pointercancel"),this),t(i,f.prefixPointerEvent("pointerup"),this)),f.hasTouch&&!this.options.disableTouch&&(t(this.wrapper,"touchstart",this),t(i,"touchmove",this),t(i,"touchcancel",this),t(i,"touchend",this)),t(this.scroller,"transitionend",this),t(this.scroller,"webkitTransitionEnd",this),t(this.scroller,"oTransitionEnd",this),t(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var e,t,i=o.getComputedStyle(this.scroller,null);return this.options.useTransform?(e=+((i=i[f.style.transform].split(")")[0].split(", "))[12]||i[4]),t=+(i[13]||i[5])):(e=+i.left.replace(/[^-\d.]/g,""),t=+i.top.replace(/[^-\d.]/g,"")),{x:e,y:t}},_initIndicators:function(){function e(e){if(o.indicators)for(var t=o.indicators.length;t--;)e.call(o.indicators[t])}var t,i=this.options.interactiveScrollbars,n="string"!=typeof this.options.scrollbars,a=[],o=this;this.indicators=[],this.options.scrollbars&&(this.options.scrollY&&(t={el:c("v",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:!1},this.wrapper.appendChild(t.el),a.push(t)),this.options.scrollX&&(t={el:c("h",i,this.options.scrollbars),interactive:i,defaultScrollbars:!0,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:!1},this.wrapper.appendChild(t.el),a.push(t))),this.options.indicators&&(a=a.concat(this.options.indicators));for(var s=a.length;s--;)this.indicators.push(new d(this,a[s]));this.options.fadeScrollbars&&(this.on("scrollEnd",(function(){e((function(){this.fade()}))})),this.on("scrollCancel",(function(){e((function(){this.fade()}))})),this.on("scrollStart",(function(){e((function(){this.fade(1)}))})),this.on("beforeScrollStart",(function(){e((function(){this.fade(1,!0)}))}))),this.on("refresh",(function(){e((function(){this.refresh()}))})),this.on("destroy",(function(){e((function(){this.destroy()})),delete this.indicators}))},_initWheel:function(){f.addEvent(this.wrapper,"wheel",this),f.addEvent(this.wrapper,"mousewheel",this),f.addEvent(this.wrapper,"DOMMouseScroll",this),this.on("destroy",(function(){clearTimeout(this.wheelTimeout),this.wheelTimeout=null,f.removeEvent(this.wrapper,"wheel",this),f.removeEvent(this.wrapper,"mousewheel",this),f.removeEvent(this.wrapper,"DOMMouseScroll",this)}))},_wheel:function(e){if(this.enabled){e.preventDefault();var t,i,n,a,o=this;if(void 0===this.wheelTimeout&&o._execEvent("scrollStart"),clearTimeout(this.wheelTimeout),this.wheelTimeout=setTimeout((function(){o.options.snap||o._execEvent("scrollEnd"),o.wheelTimeout=void 0}),400),"deltaX"in e)1===e.deltaMode?(t=-e.deltaX*this.options.mouseWheelSpeed,i=-e.deltaY*this.options.mouseWheelSpeed):(t=-e.deltaX,i=-e.deltaY);else if("wheelDeltaX"in e)t=e.wheelDeltaX/120*this.options.mouseWheelSpeed,i=e.wheelDeltaY/120*this.options.mouseWheelSpeed;else if("wheelDelta"in e)t=i=e.wheelDelta/120*this.options.mouseWheelSpeed;else{if(!("detail"in e))return;t=i=-e.detail/3*this.options.mouseWheelSpeed}if(t*=this.options.invertWheelDirection,i*=this.options.invertWheelDirection,this.hasVerticalScroll||(t=i,i=0),this.options.snap)return n=this.currentPage.pageX,a=this.currentPage.pageY,t>0?n--:t<0&&n++,i>0?a--:i<0&&a++,void this.goToPage(n,a);n=this.x+r.round(this.hasHorizontalScroll?t:0),a=this.y+r.round(this.hasVerticalScroll?i:0),this.directionX=t>0?-1:t<0?1:0,this.directionY=i>0?-1:i<0?1:0,n>0?n=0:n<this.maxScrollX&&(n=this.maxScrollX),a>0?a=0:a<this.maxScrollY&&(a=this.maxScrollY),this.scrollTo(n,a,0),this.options.probeType>1&&this._execEvent("scroll")}},_initSnap:function(){this.currentPage={},"string"==typeof this.options.snap&&(this.options.snap=this.scroller.querySelectorAll(this.options.snap)),this.on("refresh",(function(){var e,t,i,n,a,o,s,l=0,c=0,d=0,u=this.options.snapStepX||this.wrapperWidth,h=this.options.snapStepY||this.wrapperHeight;if(this.pages=[],this.wrapperWidth&&this.wrapperHeight&&this.scrollerWidth&&this.scrollerHeight){if(!0===this.options.snap)for(i=r.round(u/2),n=r.round(h/2);d>-this.scrollerWidth;){for(this.pages[l]=[],e=0,a=0;a>-this.scrollerHeight;)this.pages[l][e]={x:r.max(d,this.maxScrollX),y:r.max(a,this.maxScrollY),width:u,height:h,cx:d-i,cy:a-n},a-=h,e++;d-=u,l++}else for(e=(o=this.options.snap).length,t=-1;l<e;l++)s=f.getRect(o[l]),(0===l||s.left<=f.getRect(o[l-1]).left)&&(c=0,t++),this.pages[c]||(this.pages[c]=[]),d=r.max(-s.left,this.maxScrollX),a=r.max(-s.top,this.maxScrollY),i=d-r.round(s.width/2),n=a-r.round(s.height/2),this.pages[c][t]={x:d,y:a,width:s.width,height:s.height,cx:i,cy:n},d>this.maxScrollX&&c++;this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0),this.options.snapThreshold%1==0?(this.snapThresholdX=this.options.snapThreshold,this.snapThresholdY=this.options.snapThreshold):(this.snapThresholdX=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold),this.snapThresholdY=r.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold))}})),this.on("flick",(function(){var e=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.x-this.startX),1e3),r.min(r.abs(this.y-this.startY),1e3)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,e)}))},_nearestSnap:function(e,t){if(!this.pages.length)return{x:0,y:0,pageX:0,pageY:0};var i=0,n=this.pages.length,a=0;if(r.abs(e-this.absStartX)<this.snapThresholdX&&r.abs(t-this.absStartY)<this.snapThresholdY)return this.currentPage;for(e>0?e=0:e<this.maxScrollX&&(e=this.maxScrollX),t>0?t=0:t<this.maxScrollY&&(t=this.maxScrollY);i<n;i++)if(e>=this.pages[i][0].cx){e=this.pages[i][0].x;break}for(n=this.pages[i].length;a<n;a++)if(t>=this.pages[0][a].cy){t=this.pages[0][a].y;break}return i==this.currentPage.pageX&&((i+=this.directionX)<0?i=0:i>=this.pages.length&&(i=this.pages.length-1),e=this.pages[i][0].x),a==this.currentPage.pageY&&((a+=this.directionY)<0?a=0:a>=this.pages[0].length&&(a=this.pages[0].length-1),t=this.pages[0][a].y),{x:e,y:t,pageX:i,pageY:a}},goToPage:function(e,t,i,n){n=n||this.options.bounceEasing,e>=this.pages.length?e=this.pages.length-1:e<0&&(e=0),t>=this.pages[e].length?t=this.pages[e].length-1:t<0&&(t=0);var a=this.pages[e][t].x,o=this.pages[e][t].y;i=void 0===i?this.options.snapSpeed||r.max(r.max(r.min(r.abs(a-this.x),1e3),r.min(r.abs(o-this.y),1e3)),300):i,this.currentPage={x:a,y:o,pageX:e,pageY:t},this.scrollTo(a,o,i,n)},next:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;++i>=this.pages.length&&this.hasVerticalScroll&&(i=0,n++),this.goToPage(i,n,e,t)},prev:function(e,t){var i=this.currentPage.pageX,n=this.currentPage.pageY;--i<0&&this.hasVerticalScroll&&(i=0,n--),this.goToPage(i,n,e,t)},_initKeys:function(e){var t,i={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};if("object"==a(this.options.keyBindings))for(t in this.options.keyBindings)"string"==typeof this.options.keyBindings[t]&&(this.options.keyBindings[t]=this.options.keyBindings[t].toUpperCase().charCodeAt(0));else this.options.keyBindings={};for(t in i)this.options.keyBindings[t]=this.options.keyBindings[t]||i[t];f.addEvent(o,"keydown",this),this.on("destroy",(function(){f.removeEvent(o,"keydown",this)}))},_key:function(e){if(this.enabled){var t,i=this.options.snap,n=i?this.currentPage.pageX:this.x,a=i?this.currentPage.pageY:this.y,o=f.getTime(),s=this.keyTime||0;switch(this.options.useTransition&&this.isInTransition&&(t=this.getComputedPosition(),this._translate(r.round(t.x),r.round(t.y)),this.isInTransition=!1),this.keyAcceleration=o-s<200?r.min(this.keyAcceleration+.25,50):0,e.keyCode){case this.options.keyBindings.pageUp:this.hasHorizontalScroll&&!this.hasVerticalScroll?n+=i?1:this.wrapperWidth:a+=i?1:this.wrapperHeight;break;case this.options.keyBindings.pageDown:this.hasHorizontalScroll&&!this.hasVerticalScroll?n-=i?1:this.wrapperWidth:a-=i?1:this.wrapperHeight;break;case this.options.keyBindings.end:n=i?this.pages.length-1:this.maxScrollX,a=i?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:n=0,a=0;break;case this.options.keyBindings.left:n+=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:a+=i?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:n-=i?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:a-=i?1:5+this.keyAcceleration>>0;break;default:return}if(i)return void this.goToPage(n,a);n>0?(n=0,this.keyAcceleration=0):n<this.maxScrollX&&(n=this.maxScrollX,this.keyAcceleration=0),a>0?(a=0,this.keyAcceleration=0):a<this.maxScrollY&&(a=this.maxScrollY,this.keyAcceleration=0),this.scrollTo(n,a,0),this.keyTime=o}},_animate:function(e,t,i,n){var a=this,o=this.x,s=this.y,r=f.getTime(),l=r+i;this.isAnimating=!0,function c(){var d,h,p,m=f.getTime();return m>=l?(a.isAnimating=!1,a._translate(e,t),void(a.resetPosition(a.options.bounceTime)||a._execEvent("scrollEnd"))):(p=n(m=(m-r)/i),d=(e-o)*p+o,h=(t-s)*p+s,a._translate(d,h),a.isAnimating&&u(c),void(3==a.options.probeType&&a._execEvent("scroll")))}()},handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(e);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(e);break;case"keydown":this._key(e);break;case"click":this.enabled&&!e._constructed&&(e.preventDefault(),e.stopPropagation())}}},d.prototype={handleEvent:function(e){switch(e.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(e);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(e);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(e)}},destroy:function(){this.options.fadeScrollbars&&(clearTimeout(this.fadeTimeout),this.fadeTimeout=null),this.options.interactive&&(f.removeEvent(this.indicator,"touchstart",this),f.removeEvent(this.indicator,f.prefixPointerEvent("pointerdown"),this),f.removeEvent(this.indicator,"mousedown",this),f.removeEvent(o,"touchmove",this),f.removeEvent(o,f.prefixPointerEvent("pointermove"),this),f.removeEvent(o,"mousemove",this),f.removeEvent(o,"touchend",this),f.removeEvent(o,f.prefixPointerEvent("pointerup"),this),f.removeEvent(o,"mouseup",this)),this.options.defaultScrollbars&&this.wrapper.parentNode&&this.wrapper.parentNode.removeChild(this.wrapper)},_start:function(e){var t=e.touches?e.touches[0]:e;e.preventDefault(),e.stopPropagation(),this.transitionTime(),this.initiated=!0,this.moved=!1,this.lastPointX=t.pageX,this.lastPointY=t.pageY,this.startTime=f.getTime(),this.options.disableTouch||f.addEvent(o,"touchmove",this),this.options.disablePointer||f.addEvent(o,f.prefixPointerEvent("pointermove"),this),this.options.disableMouse||f.addEvent(o,"mousemove",this),this.scroller._execEvent("beforeScrollStart")},_move:function(e){var t,i,n,a,o=e.touches?e.touches[0]:e,s=f.getTime();this.moved||this.scroller._execEvent("scrollStart"),this.moved=!0,t=o.pageX-this.lastPointX,this.lastPointX=o.pageX,i=o.pageY-this.lastPointY,this.lastPointY=o.pageY,n=this.x+t,a=this.y+i,this._pos(n,a),1==this.scroller.options.probeType&&s-this.startTime>300?(this.startTime=s,this.scroller._execEvent("scroll")):this.scroller.options.probeType>1&&this.scroller._execEvent("scroll"),e.preventDefault(),e.stopPropagation()},_end:function(e){if(this.initiated){if(this.initiated=!1,e.preventDefault(),e.stopPropagation(),f.removeEvent(o,"touchmove",this),f.removeEvent(o,f.prefixPointerEvent("pointermove"),this),f.removeEvent(o,"mousemove",this),this.scroller.options.snap){var t=this.scroller._nearestSnap(this.scroller.x,this.scroller.y),i=this.options.snapSpeed||r.max(r.max(r.min(r.abs(this.scroller.x-t.x),1e3),r.min(r.abs(this.scroller.y-t.y),1e3)),300);this.scroller.x==t.x&&this.scroller.y==t.y||(this.scroller.directionX=0,this.scroller.directionY=0,this.scroller.currentPage=t,this.scroller.scrollTo(t.x,t.y,i,this.scroller.options.bounceEasing))}this.moved&&this.scroller._execEvent("scrollEnd")}},transitionTime:function(e){e=e||0;var t=f.style.transitionDuration;if(t&&(this.indicatorStyle[t]=e+"ms",!e&&f.isBadAndroid)){this.indicatorStyle[t]="0.0001ms";var i=this;u((function(){"0.0001ms"===i.indicatorStyle[t]&&(i.indicatorStyle[t]="0s")}))}},transitionTimingFunction:function(e){this.indicatorStyle[f.style.transitionTimingFunction]=e},refresh:function(){this.transitionTime(),this.options.listenX&&!this.options.listenY?this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none":this.options.listenY&&!this.options.listenX?this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none":this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none",this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll?(f.addClass(this.wrapper,"iScrollBothScrollbars"),f.removeClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="8px":this.wrapper.style.bottom="8px")):(f.removeClass(this.wrapper,"iScrollBothScrollbars"),f.addClass(this.wrapper,"iScrollLoneScrollbar"),this.options.defaultScrollbars&&this.options.customStyle&&(this.options.listenX?this.wrapper.style.right="2px":this.wrapper.style.bottom="2px")),f.getRect(this.wrapper),this.options.listenX&&(this.wrapperWidth=this.wrapper.clientWidth,this.options.resize?(this.indicatorWidth=r.max(r.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8),this.indicatorStyle.width=this.indicatorWidth+"px"):this.indicatorWidth=this.indicator.clientWidth,this.maxPosX=this.wrapperWidth-this.indicatorWidth,"clip"==this.options.shrink?(this.minBoundaryX=8-this.indicatorWidth,this.maxBoundaryX=this.wrapperWidth-8):(this.minBoundaryX=0,this.maxBoundaryX=this.maxPosX),this.sizeRatioX=this.options.speedRatioX||this.scroller.maxScrollX&&this.maxPosX/this.scroller.maxScrollX),this.options.listenY&&(this.wrapperHeight=this.wrapper.clientHeight,this.options.resize?(this.indicatorHeight=r.max(r.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8),this.indicatorStyle.height=this.indicatorHeight+"px"):this.indicatorHeight=this.indicator.clientHeight,this.maxPosY=this.wrapperHeight-this.indicatorHeight,"clip"==this.options.shrink?(this.minBoundaryY=8-this.indicatorHeight,this.maxBoundaryY=this.wrapperHeight-8):(this.minBoundaryY=0,this.maxBoundaryY=this.maxPosY),this.maxPosY=this.wrapperHeight-this.indicatorHeight,this.sizeRatioY=this.options.speedRatioY||this.scroller.maxScrollY&&this.maxPosY/this.scroller.maxScrollY),this.updatePosition()},updatePosition:function(){var e=this.options.listenX&&r.round(this.sizeRatioX*this.scroller.x)||0,t=this.options.listenY&&r.round(this.sizeRatioY*this.scroller.y)||0;this.options.ignoreBoundaries||(e<this.minBoundaryX?("scale"==this.options.shrink&&(this.width=r.max(this.indicatorWidth+e,8),this.indicatorStyle.width=this.width+"px"),e=this.minBoundaryX):e>this.maxBoundaryX?"scale"==this.options.shrink?(this.width=r.max(this.indicatorWidth-(e-this.maxPosX),8),this.indicatorStyle.width=this.width+"px",e=this.maxPosX+this.indicatorWidth-this.width):e=this.maxBoundaryX:"scale"==this.options.shrink&&this.width!=this.indicatorWidth&&(this.width=this.indicatorWidth,this.indicatorStyle.width=this.width+"px"),t<this.minBoundaryY?("scale"==this.options.shrink&&(this.height=r.max(this.indicatorHeight+3*t,8),this.indicatorStyle.height=this.height+"px"),t=this.minBoundaryY):t>this.maxBoundaryY?"scale"==this.options.shrink?(this.height=r.max(this.indicatorHeight-3*(t-this.maxPosY),8),this.indicatorStyle.height=this.height+"px",t=this.maxPosY+this.indicatorHeight-this.height):t=this.maxBoundaryY:"scale"==this.options.shrink&&this.height!=this.indicatorHeight&&(this.height=this.indicatorHeight,this.indicatorStyle.height=this.height+"px")),this.x=e,this.y=t,this.scroller.options.useTransform?this.indicatorStyle[f.style.transform]="translate("+e+"px,"+t+"px)"+this.scroller.translateZ:(this.indicatorStyle.left=e+"px",this.indicatorStyle.top=t+"px")},_pos:function(e,t){e<0?e=0:e>this.maxPosX&&(e=this.maxPosX),t<0?t=0:t>this.maxPosY&&(t=this.maxPosY),e=this.options.listenX?r.round(e/this.sizeRatioX):this.scroller.x,t=this.options.listenY?r.round(t/this.sizeRatioY):this.scroller.y,this.scroller.scrollTo(e,t)},fade:function(e,t){if(!t||this.visible){clearTimeout(this.fadeTimeout),this.fadeTimeout=null;var i=e?250:500,n=e?0:300;e=e?"1":"0",this.wrapperStyle[f.style.transitionDuration]=i+"ms",this.fadeTimeout=setTimeout(function(e){this.wrapperStyle.opacity=e,this.visible=+e}.bind(this,e),n)}}},l.utils=f,e.exports?e.exports=l:void 0===(n=function(){return l}.call(t,i,t,e))||(e.exports=n)}(window,document,Math)},function(e,t,i){"use strict";i(27),i(22),i(11),i(21),i(94),i(163),i(37),i(9),i(1),i(26),i(17),i(5),i(28),Object.defineProperty(t,"__esModule",{value:!0}),t.init=function(e){l=e},t.getMsgContent=y,t.handleMap=void 0;var n=r(i(20)),a=r(i(0)),o=r(i(3)),s=i(10);function r(e){return e&&e.__esModule?e:{default:e}}var l,c,d,u,f=o.default.getConfig("locationBase");var h={etmt:{10:1,20:1,30:1,40:1,161:1,162:1,163:1,127:1,105:1,130:1,640:1,641:1,642:1,644:1,647:1,648:1,655:1,658:1,680:1,688:1,864:1,865:1,866:1,959:1,10001:1,10011:1,12001:1},text:{10:1,20:1,30:1,40:1,105:1,130:1,864:1,640:1,644:1,648:1},visitor:{30:1,127:1,105:1,130:1,161:1,162:1,163:1,864:1,865:1,866:1},staff:{10:1,640:1,641:1,642:1,644:1,680:1},sysMsg:function(e){return 647==e.mt||648==e.mt||20==e.mt||10010==e.mt||10001==e.mt||12001==e.mt&&(7==e.type||3==e.type)||10011==e.mt&&(3==e.mst||2==e.customizeMsgType)},sysToStaff:function(e){return 647==e.mt&&(5==e.type||10==e.type)||10011==e.mt&&2==e.mst},sysToVisitor:function(e){return 10011==e.mt&&1==e.mst},sysToRobot:function(e){return 647==e.mt&&10==e.type},robotAnswer:function(e){return 12001==e.mt&&(1==e.type||2==e.type||5==e.type||6==e.type)},robotTip:function(e){return 12001==e.mt&&7==e.type},location:function(e){return 127==e.et},msgParser:function(e){var t,i,n=e.mt||e.et;if(u[n])return u[n];for(t=["push","video","voice","img","file"],i=0;i<t.length;i++)if(h[t[i]](e))return u[t[i]]},push:function(e){return 655==e.mt||658==e.mt},video:function(e){return 162==e.et&&4==e.fileType||(642==e.mt||866==e.mt)&&2==e.fileType},voice:function(e){return 163==e.et&&3==e.fileType||(642==e.mt||866==e.mt)&&1==e.fileType},img:function(e){return 161==e.et&&1==e.fileType||641==e.mt||865==e.mt},file:function(e){return 161==e.et&&2==e.fileType||(642==e.mt||866==e.mt)&&0==e.fileType}};function p(e){if(!e||"string"!=typeof e)return e;var t=o.default.getDataByName("emoMap");return t&&(e=e.replace(n.default.regFace,(function(e){var i=e.charCodeAt(0),n=e.charCodeAt(1),a=(n-56320+(i-55296<<10)+65536).toString(16);return t[a]?'<img class="img-emo" src="'+f+"/res/emoji/32/"+a+'.png" />':t[i+"_"+n]?'<img class="img-emo" src="'+f+"/res/emoji/32/"+i+"_"+n+'.png" />':e}))),e=e.replace(n.default.regEmo,(function(e){var i=e.replace(/^\[#([\d\w_]+)#\]/g,"$1");return t&&t[i]||!t?'<img class="img-emo" src="'+f+"/res/emoji/32/"+i+'.png" />':e}))}function m(e){if("string"!=typeof e||e.match(/(msg\-tel)|(msg\-link)|(msg\-mail)/))return e;var t=a.default.isMobile,i=n.default.regPhone,o=n.default.regMail,s=n.default.regLink;return i.lastIndex=0,o.lastIndex=0,s.lastIndex=0,(e=e.replace(s,(function(e){var i=arguments.length,n=arguments[i-2];if(n>0){var a=arguments[i-1].substring(0,n);if(/(\<(a|img|link|iframe|script)[^>]*>([^<]+(?!\<\/a\>))?$)|(\<[a-zA-Z]+[^>]*$)/gi.test(a))return e}return t?'<a class="msg-link" href="'+e+'" target="visitorSiteIframe">'+e+"</a>":'<a class="msg-link" target="_blank" href="'+e+'">'+e+"</a>"}))).indexOf("@")>1&&(e=e.replace(o,(function(e){var t=arguments.length,i=arguments[t-2];if(i>0){var n=arguments[t-1].substring(0,i);if(/(\<(a|img|link|iframe|script)[^>]*>[^<]+(?!\<\/a\>)$)|(\<[a-zA-Z]+[^>]*$)/gi.test(n))return e}return'<a class="msg-mail" target="_blank" href="mailto:'+e+'">'+e+"</a>"}))),e=e.replace(i,(function(e,i){var n,a,o=arguments.length,s=arguments[o-2];if(s>0){var r=arguments[o-1].substring(0,s);if(/(\<(a|img|link|iframe|script)[^>]*>[^<]+(?!\<\/a\>)$)|(\<[a-zA-Z]+[^>]*$)/gi.test(r))return e}return n=i,a=e.replace(/^[^\d]|\b/,""),(n||"")+(t?'<a class="msg-tel" href="tel:'+a+'">'+a+"</a>":'<span class="msg-tel">'+a+"</span>")}))}function g(e,t,i){return'<img onerror="_echat0.imgError(this)"'+(t?"":' onload="javascript:_echat0.scrollToBottom()"')+' src="'+e+'" class="msg-img '+(i||"")+'"/>'}function v(e,t,i,n){var a=/\bsrc\b\s*=\s*[\'\"]?([^\'\"]*)[\'\"]?/i;return t=t||{},e=e&&e.replace(/<img\b.*?(?:\>|\/>)/gi,(function(e){var o=n||a.exec(e);return o?g(o=n||o[1],t.notEnd,i):e}))}function b(e){return p(v(e.localMsg||e.content))}function y(e,t){var i,n=h.msgParser(e);return i=n?n.apply(this,arguments):b(e),680==e.mt?i:i&&m(i).replace(/((\r\n)|\n)/g,"</br>")}function w(e){return(e.toStaffNickName||lanRes.serviceStaff)+" "+lanRes.transferStaff}function S(e,t,i){var n=e.sendStatus;return 161!=e.et&&162!=e.et&&163!=e.et||2==n||t?"":function(e){var t=e.sendStatus,i=o.default.getMsgFromHistory(e.clientFileId);return i&&2==i.sendStatus?"":1==t||0==t?'<div class="msg-preview-info"><div class="msg-preview-progress">'+(e.progress||0)+"%</div></div>":""}(e)+(i?"</div>":"")+(3==n?'<div class="msg-error file-resend"></div>':"")}function I(e,t){if(1!=t.feedback||!o.default.getConfig("robotFeedback"))return"";var i,n,s=o.default.getStatusData(),r=e.feedback||e.allExtra.h5Extra.feedback,l=e.feedbackSubitem||e.allExtra.h5Extra.feedbackSubitem;return e.talkId==s.talkId||r?(!c&&(i=o.default.getConfig("config649").robotWordsInfo,n=a.default.dji,a.default.needHttps&&(i.solvedButton&&(i.solvedButton=i.solvedButton.replace(/^http:/,a.default.needHttps)),i.unsolvedButton&&(i.unsolvedButton=i.unsolvedButton.replace(/^http:/,a.default.needHttps))),i.solvedSubitem||i.unsolvedSubitem?!n||i.unsolvedWords||i.solvedWords?c=function(e){e=e||{};var t,a="",o='<div class="feedback-tip">'+(i.fedBackWords||"")+'</div><div class="feedback-tag"><i class="feed-icon-sel"></i><span>'+lanRes.hasSelected+'</span></div><div class="feedback-btns clearfix"><div class="feedback-btn-solve '+(1==e.feedback?"feedback-btn-solve-sel":"")+(n&&!i.solvedWords?" hide":"")+'" type="1">'+(i.solvedButton?'<img onerror="_echat0.imgError(this)" src="'+i.solvedButton+'"/>':"")+"<span>"+(i.solvedWords||"")+'</span></div><div class="feedback-btn-unsolve '+(2==e.feedback?"feedback-btn-unsolve-sel":"")+(n&&!i.unsolvedWords?" hide":"")+'" type="2">'+(i.unsolvedButton?'<img onerror="_echat0.imgError(this)" src="'+i.unsolvedButton+'"/>':"")+"<span>"+(i.unsolvedWords||"")+"</span></div></div>";if(e.feedbackSubitem||e.currentTalk){if(i.solvedSubitem&&"string"==typeof i.solvedSubitem&&(i.solvedSubitem=JSON.parse(i.solvedSubitem)),i.unsolvedSubitem&&"string"==typeof i.unsolvedSubitem&&(i.unsolvedSubitem=JSON.parse(i.unsolvedSubitem)),2!=e.feedback&&i.solvedSubitem&&i.solvedSubitem.length>0){for(a+='<div class="feedback-sub-solved"><div class="robot-tip">'+lanRes.solvedReason+'</div><ul class="feedback-sub-list '+(e.feedbackSubitem?"robot-feedback-sub-had":"")+'">',t=0;t<i.solvedSubitem.length;t++)a+='<li class="feedback-sub-li sub-solved-li '+(e.feedbackSubitem==i.solvedSubitem[t].content?"feedback-sub-sel1":"")+'"><span class="list-style-dot">'+(t+1)+'.</span><span class="feedback-sub-content" type="1">'+i.solvedSubitem[t].content+"</span></li>";a+="</ul></div>"}if(1!=e.feedback&&i.unsolvedSubitem&&i.unsolvedSubitem.length>0){for(a+='<div class="feedback-sub-unsolved"><div class="robot-tip">'+lanRes.unsolvedReason+'</div><ul class="feedback-sub-list '+(e.feedbackSubitem?"robot-feedback-sub-had":"")+'">',t=0;t<i.unsolvedSubitem.length;t++)a+='<li class="feedback-sub-li sub-unsolved-li '+(e.feedbackSubitem==i.unsolvedSubitem[t].content?"feedback-sub-sel2":"")+'"><span class="list-style-dot">'+(t+1)+'.</span><span class="feedback-sub-content" type="2">'+i.unsolvedSubitem[t].content+"</span></li>";a+="</ul>"}}return o+a+"</div></div>"}:hasRobotFeedback=!1:c=function(e){return e=e||{},'<div class="feedback-tip">'+(i.fedBackWords||"")+'</div><div class="feedback-tag"><i class="feed-icon-sel"></i><span>'+lanRes.hasSelected+'</span></div><div class="feedback-btns clearfix"><div class="feedback-btn-solve '+(1==e.feedback?"feedback-btn-solve-sel":"")+'" type="1">'+(i.solvedButton?'<img onerror="_echat0.imgError(this)" src="'+i.solvedButton+'"/>':"")+"<span>"+(i.solvedWords||"")+'</psan></div><div class="feedback-btn-unsolve '+(2==e.feedback?"feedback-btn-unsolve-sel":"")+'" type="2">'+(i.unsolvedButton?'<img onerror="_echat0.imgError(this)" src="'+i.unsolvedButton+'"/>':"")+"<span>"+(i.unsolvedWords||"")+"</span></div></div></div></div>"}),c?'<div class="robot-feedback '+(r?" robot-feedback-had robot-feedback-had"+r:"")+'">'+c({currentTalk:e.talkId==s.talkId,feedback:r,feedbackSubitem:l,answerItem:t}):(console.log("设置反馈打开但是没找到反馈配置"),"")):""}t.handleMap=h,d=function(e,t){var i=t?" border0":"";return e?'<div class="custom-event'+i+'"><div class="custom-event-wrap">{{imageUrl}}<div class="custom-event-content"><div class="custom-event-title" style="height:auto;margin-bottom:0;" title="{{title1}}">{{title}}</div><div class="custom-event-detail">{{content}}</div></div></div>{{memo}}</div>':'<a class="custom-event'+i+'" {{linkset}}><div class="custom-event-wrap">{{imageUrl}}<div class="custom-event-content"><div class="custom-event-title" style="height:auto;margin-bottom:0;" title="{{title1}}">{{title}}</div><div class="custom-event-detail">{{content}}</div></div></div>{{memo}}</a>'},u={647:function(e){if(10!=e.type)return b(e);var t,i,n=e.content;if(n=v(n,e),(i=e.commonQuestions&&JSON.parse(e.commonQuestions))&&i.length){for(e.commonQuesWords?n+='<div class="common-ques-tip">'+e.commonQuesWords+'</div><ul class="common-ques-list">':n+='<ul class="common-ques-list">',t=0;t<i.length;t++)n+='<li class="common-ques-li" did="'+i[t].id+'" ques="'+escape(i[t].question||i[t].content)+'"><span class="list-style-dot">'+(t+1)+'.</span><span class="link-robot-ques">'+(i[t].question||i[t].content)+"</span></li>";n+="</ul>"}return n},688:function(e,t){if(!e.template)return"";var i=e.template,n=1==Number(a.default.windowType)?"info_frame3":"inner",s=e.formUrl.replace(/^http(s)?:\/\/(.*?)\//,(f||location.origin)+"/")+a.default.addMapParams({showResult:688==e.mt?1:void 0,isVisitor:1,visitorId:e.visitorId,talkId:e.talkId,formInfoId:e.formInfoId,companyId:o.default.getVisitorInfo("companyId"),dataHost:o.default.getVisitorInfo("dataHost")}),r=encodeURI(s),l=688==e.mt?i.desc:1==e.visitorCommitSuccess?i.commitMsg:i.desc;if(t='<a class="push-url clearfix" style="height: 67px; max-width: 300px;" target="'+n+'" href="'+r+'"><div class="pushform-icon echat bg1" style="line-height: 64px;"><img src="'+i.iconUrl+'"/></div><div class="push-content"><div class="push-name">'+i.name+'</div><div class="pushform-desc">'+l+"</div></div></a>",1==i.openType&&688==e.mt&&0==e.isForward)switch(Number(a.default.windowType)){case 1:a.default.publish("handlePushURL",encodeURI(s));break;default:a.default.publish("showURLLink",i.name,encodeURI(s))}return t},10011:function(e,t){if(2!=e.visibility){if(t[0]=t[0]+"anglebgwhite ",e.urlForVisitor){e.urlForVisitor=e.urlForVisitor.replace(/\s/g,"");var i=e.urlForVisitor.match(/^http\(['"]?([^'",]+)['"]?(\,['"]?(blank|inner)['"]?)?\)/i)||e.urlForVisitor.match(/^xcx\(['"]?([^'",]+)['"]?(\,['"]?(navigateTo|redirectTo|switchTab)['"]?)?\)/i);i?(e.url=i[1],e.openType=i[3]):e.url=""}else if(0==e.urlEnableForVisitor&&(e.url=void 0,delete e.url),e.url){var n=e.url.replace(/\s/g,"").match(/^apiUrl\(['"]?(\d+)['"]?(\,['"]?(reload|hash)['"]?)?\)/);n?e.toCrmUrlId=n[1]:(e.url.match(/(^http[s]?:)|(^file:)/i)||(e.url=""),e.toCrmUrlId=!1)}var o="";return e.imageUrl&&(e.imageUrl=e.imageUrl.replace(/["']/,""),o=e.imageUrl?'<img onerror="_echat0.imgError" class="custom-event-img" src="'+e.imageUrl+'"/>':"",e.url&&!e.toCrmUrlId||(o=v(o,e,"custom-event-img",e.imageUrl))),d(!e.url||e.toCrmUrlId,3==e.mst).replace(/\{\{linkset\}\}/,!e.url||e.toCrmUrlId?"":' href="'+e.url+("inner"==e.openType?'" target="inner" title="'+(e.title||lanRes.interactWnd)+'" ':"navigateTo"==e.openType||"redirectTo"==e.openType||"switchTab"==e.openType?'" target="'+e.openType+'" ':'" target="_blank" ')).replace(/\{\{title1\}\}/,a.default.HTMLDecode(e.title)||"").replace(/\{\{title\}\}/,e.title||"").replace(/\{\{imageUrl\}\}/,o).replace(/\{\{content\}\}/,e.content||"").replace(/\{\{memo\}\}/,e.memo?'<div class="custom-event-memo">'+e.memo+"</div>":"")}},10001:w,680:function(e){var t=e.pushUrlDetail.url,i="";return a.default.needHttps&&t.match(/^http:/i)&&(i=" push-blank"),'<a class="push-url clearfix'+i+'" target="info_frame3" href="'+t+'"><div class="push-icon echat bg1"></div><div class="push-content"><div class="push-name">'+a.default.HTMLDecode(e.pushUrlDetail.urlName)+' </div><div class="push-url-link">'+e.pushUrlDetail.url+"</div></div></a>"},604:w,12001:function(e){var t,i,n,o,r=e.knowledgeAnswerList||[],c="",d='<ul class="question-list">';if(e.nonTextMsg)return y(c=e.nonTextMsg);if(1==e.type||2==e.type){if((t=r[0])?1==t.answerType?c+=e.tips||"":2==t.answerType?(c+='<div class="robot-tip">'+(e.tips||"")+"</div>",c+=t.answer||"",i=t.relateKnowledges,d+='<div class="robot-tip margin-top10">'+(e.tipsExt||"")+"</div>"):3==t.answerType?(i=t.suggestions,d+='<div class="robot-tip">'+(e.tips||"")+"</div>"):4==t.answerType?c+=t.answer||"":5==t.answerType?(c+=t.answer||"",i=t.relateKnowledges,d+='<div class="robot-tip">'+(e.tips||"")+"</div>"):6==t.answerType&&(c+=t.answer||"",i=t.relateKnowledges,d+='<div class="robot-tip margin-top10">'+(e.tips||"")+"</div>"):c+=e.tips||"",i&&i.length){for(o=0;o<i.length;o++)d+='<li class="question-list-li" index="'+o+'" ><span class="list-style-dot">'+(o+1)+'. </span><span class="color-link">'+i[o].question+"</span></li>";d+="</ul>"}else d="";return n=I(e,t),'<div class="msg-item-robot"> '+(c=(c=v(c,e)).replace(/&nbsp;([^&\s])/g," $1"))+d+"</div>"+n}if(c=(c=e.tip||e.tips||e.content)&&c.replace(/&nbsp;([^&\s])/g," $1"),5==e.type&&0==c.isForward)try{var u=$("#q"+e.robotDetailId),f=(0,s.getMsgByDom)(u.results[0]),h=e.feedbackSubitem;n=e.feedback,a.default.publish("setExtraMessage",f,{feedback:n,feedbackSubitem:h}),l(f)}catch(e){console.log("处理反馈没有找到机器人消息")}return c},127:function(e){var t=e.locationX||e.x,i=e.locationY||e.y,n="https://restapi.amap.com/v3/staticmap?location="+i+","+t+"&zoom="+(e.scale||15)+"&size=400*200&key=5349312538cf80d1f6c008eb059b732c&markers=mid,,A:"+i+","+t;return'<div class="msg-map"><a target="cover" href="http://uri.amap.com/marker?position='+i+","+t+"&name="+encodeURIComponent(e.label)+'&coordinate=gaode"><div class="msg-map-title"><div>'+e.label+'</div><div class="msg-map-addr">'+(e.address||"")+'</div></div><img onerror="_echat0.imgError(this)" onload="_echat0.scrollToBottom()" class="view_img" src="'+n+'" draggable="false"/></a></div>'},push:function(e,t){var i=e.staffNickName||o.default.getStaff(e.staffId).name,n=[];return 1==e.allExtra.h5Extra.read&&(t[0]=t[0]+" unfold "),n.push('<div class="msg-leave" ><div class="msg-leave-title"><i class="msg-leave-i"></i><span class="msg-leave-t">'),n.push('<span class="color0">'+i+"&nbsp;</span>"),n.push(658==e.mt?lanRes.visitor174:4==e.chatInfoType?lanRes.staffLeave:lanRes.leaveStaffReply),n.push("</span></div>"),n.push('<div class="msg-leave-con" ><div class="msg-leave-content">'),n.push(p(a.default.HTMLDecode(e.brief))),n.push('</div><div class="msg-leave-dot">...</div><div class="msg-leave-link color0">'),n.push(lanRes.viewAll),n.push("</div></div></div>"),n.join("")},video:function(e){var t=e.localThumbnailPath||e.remoteThumbnaiLPath||e.videoThumbUrl;return'<div class="msg-video">'+(t?'<img class="msg-video-poster" onerror="_echat0.imgError(this)" src="'+t+'" '+(e.notEnd?"":'onload="javascript:_echat0.scrollToBottom()"')+'alt=""/>':'<div class="msg-video-poster" ></div>')+'<div class="msg-video-angle"></div>'+S(e,!1,!0)},voice:function(e){var t,i;return t=(i=parseInt((e.voiceDuration||e.duration||0)/1e3)||1)<4?60:15*i,'<div class="msg-voice" style="width:'+(t=Math.min(t,.75*window.innerWidth-40))+'px;"><span class="msg-voice-info">'+i+'"</span><i></i>'+S(e,!0,!0)},img:function(e){return'<div class="msg-imgs">'+g(e.smallImg||e.localFile,e.notEnd,e.customClass)+S(e,!1,!0)},file:function(e){var t=e.allExtra.nativeExtra||{},i=t.loadStatus,n=void 0===i?0:i,a=t.progress,o=void 0===a?0:a,s={0:"点击下载",1:"点击打开",2:o+"%",3:"点击重新下载",4:'<span class="red">下载失败</span>重新下载'};return'<div class="msg-file file-load-status'+n+'" ><div class="file-icon echat"></div><div class="file-info file-info-btn"><div class="file-name">'+e.fileName+'</div><div class="file-size">文件大小（'+((parseInt((e.fileSize||0)/1024)||1)/1024).toFixed(3)+'M）</div></div><div class="file-load-bar clearfix"><div class="file-load-bar-info">'+s[n||0]+'</div><div class="file-load-progress"><div class="file-load-progress0" style="width:'+(o||0)+'%"></div></div></div></div>'+S(e,!1,!0)}}},,,,function(e,t,i){"use strict";i(27),i(167),i(11),i(1),i(17),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(i(0)),a=l(i(29)),o=i(10),s=l(i(3)),r=l(i(95));function l(e){return e&&e.__esModule?e:{default:e}}var c,d,u=a.default.callEchatNative,f=!1;function h(e){var t=$(e).parents(".msgli").attr("id"),i=s.default.getMsgFromHistory(t);return i&&i.msg}function p(){$(".msg-voice").each((function(e,t){$(t).removeClass("playing")}))}var m={init:function(e){c=e,n.default.subscribe("recordEvent",(function(e,t){t&&6==t.type&&(d=null,p())})),n.default.subscribe("downloadEvent",(function(e,t){var i=t.identityKey,n=t.fileIdentity,a=t.nativeExtra,o=a.loadStatus,r=a.progress,l=a.localFile,d=i||n,u=s.default.getMsgFromHistory(i||n).msg;l=u.localFile||l,s.default.updateMsgByIndetity(u.clientFileId||d,{localFile:l}),s.default.updateHistoryMsgNativeExt(u.clientFileId||d,"loadStatus",o),s.default.updateHistoryMsgNativeExt(u.clientFileId||d,"progress",r),u.allExtra.nativeExtra||(u.allExtra.nativeExtra={}),u.allExtra.nativeExtra.loadStatus=o,u.allExtra.nativeExtra.progress=r,c.updateMsg(u)})),$("#content").on("click",".msg-voice",(function(e){var t=h(this),i=d&&d.clientFileId,n=t.clientFileId||t.fileIdentity;i&&(u("voice",{type:7,clientFileId:t.clientFileId,localFile:t.localFile}),p()),i!=n?(u("voice",{type:6,url:t.remoteFileUrl,identityKey:t.identityKey||t.fileIdentity,clientFileId:t.clientFileId,localFile:t.localFile}),d=t,$(this).addClass("playing")):d=null})).on("click",".msg-video",(function(e){var t,i,n,a=h(this),o=a.fileName||(new Date).getTime()+".mp4";t="video",i={type:"play",identityKey:a.identityKey||a.fileIdentity,clientFileId:a.clientFileId,url:a.remoteVideoPath||a.remoteFileUrl||a.fileUrl||a.localVideoPath,localVideoPath:a.localVideoPath,downloadUrl:(n=a.remoteVideoPath||a.remoteFileUrl||a.fileUrl,n?n+(-1==n.indexOf("?")?"?":"&")+"attname="+encodeURIComponent(o):a.localVideoPath||""),fileName:o},f||(f=!0,u(t,i),setTimeout((function(){f=!1}),700))})).on("click",".msg-imgs",(function(e){var t=$(".msg-img",this).results[0],i=[],n=0;$(".msg-img",_$("content")).each((function(e,a){var o,s,r,l,c=h(a);c&&(o=c.clientFileId||c.identityKey||c.fileIdentity)?(r=c.fileName,i.push({bigImg:c.bigImg||c.localFile,smallImg:c.smallImg,sourceImg:c.sourceImg,identityKey:c.identityKey||c.fileIdentity,clientFileId:c.clientFileId,localFile:c.localFile})):(o=(new Date).getTime()+"",r=s=$(a).attr("src"),i.push({bigImg:s,smallImg:s,sourceImg:s,identityKey:o,clientFileId:o,isOrignal:1})),t==a&&(n=i.length),l=(l=(r||"temp.png").match(/[^.]+$/))&&l[0]||"png",i[i.length-1].fileName=o+"."+l})),u("previewImage",{urls:i,current:n})})).on("click",".file-resend",(function(e){if(!(0,o.handleNetwok)()){var t=h(this);t&&n.default.showDialog({tip:"发送失败，是否重发该消息",ok:function(){u("resendFile",t.clientFileId)}}),$(this).attr("resend","1")}})).on("click",".msg-file",(function(e){var t,i,n,a,r=h(this),l=r.allExtra.nativeExtra||{},c=l.loadStatus,d=void 0===c?0:c,f=l.localFile;if(r){if(n=r.identityKey||r.fileIdentity,t=r.fileUrl||r.remoteFileUrl,t+=(-1==t.indexOf("?")?"?":"&")+"attname="+encodeURIComponent(r.fileName),0==d||3==d||4==d){if((0,o.handleNetwok)())return;i=2,u("downloadFile",{identityKey:n,url:t,isNeedOpen:0,downloadType:0,fileName:r.fileName,windowType:0}),a="0%",$(".file-load-progress0",this).css("width","0px")}else 2==d?(u("cancelDownloadFile",{identityKey:n,url:t}),i=3,a="点击重新下载"):1==d&&u("openFile",{identityKey:n,clientFileId:r.clientFileId,localFile:f||r.localFile});i&&(s.default.updateHistoryMsgNativeExt(r.clientFileId||n,"loadStatus",i),s.default.updateHistoryMsgNativeExt(r.clientFileId||n,"progress",0)),this.className="msg-file file-load-status"+d,a&&$(".file-load-bar-info",this).html(a)}})).on("click",".msg-leave",(function(e){var t=$(this).parents(".msgli").attr("id"),i=t&&s.default.getMsgFromHistory(t);if(i){var a,o=i.msg,r=658==o.mt,l=s.default.getConfig("locationBase"),c=s.default.getVisitorInfo(),d=s.default.getConfig("config600"),u=s.default.getApiDomain()+"/chatapi/paodm/qd?companyId="+c.companyId+n.default.addMapParams({visitorId:c.visitorId,chatInfoType:o.chatInfoType||9,talkId:o.newsMsgId||o.jobId,tm:o.tm,token:o.signature}),f="in"==window.lanResName?"id":window.lanResName,h=l+"/visitor/common/"+(r?"order.html":"record.html")+"?lan="+(r?d.lan:f)+"&sdkVersion=21&url="+encodeURIComponent(u);r&&(h+=n.default.addMapParams({token:o.token,nonce:o.nonce,uploadFileSize:d.uploadFileSize,fileUploadInfos:(a=d.fileUploadInfos.reduce((function(e,t){return e.push(t.uploadServiceType),e}),[]),JSON.stringify(a)),photo:s.default.getVisitorImg()})),n.default.publish("showURLLink",r?lanRes.visitor173:lanRes.leaveMsgTitle,h,{needOpen:!0,from:5,workorder:r?1:void 0}),1!=o.allExtra.h5Extra.read&&($(this).parents(".msgli").addClass("unfold"),s.default.updateHistoryMsgExt(t,{read:1}),n.default.publish("setExtraMessage",o,{read:1}))}})),$(".action-close").on("touchend",(function(){n.default.publish("visitorClose")})),$("#pre_his").on("touchend",(function(){n.default.publish("loadHistory")})),$(document).on("click",".resend",(function(e){if(!(0,o.handleNetwok)()){var t,i,a=(t=$(this).parents(".msgli").attr("id"),(i=s.default.getMsgFromHistory(t))&&i.originData),l=s.default.getStatusData();l.chatStatus,2==l.chatStatus&&(l.talkType,n.default.Constants.talkTypeRobot);(0,r.default)(a)}})).on("click",".btn-restart",(function(){(0,o.handleNetwok)()||(setTimeout((function(){n.default.publish("restartChat")}),10),$(".btn-restart").removeClass("btn-restart"),$(this).text(lanRes.chatContinued))}))}};t.default=m},,,,function(e,t,i){},function(e,t,i){"use strict";i(9),i(1),i(17),i(5),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=this,t=this;this.textRange=null,this.getInputDoc=function(){var t;return 2==e.editorType?(t=_$("html_input").contentDocument)||(t=document.frames.html_input.document):t=document,t},this.getInputDocBody=function(){var t,i,n=e.editorType;return 3==n?(i=_$("html_pre_input")).blur||(i.blur=function(){window.focus()}):2==n?((t=_$("html_input").contentDocument)||(t=document.frames.html_input.document),i=t.body||t.getElementsByTagName("body")[0]):i=_$("textInput"),i},this.focusInput=function(t){var i,n,a,o=e.editorType;return 3==o?i=_$("html_pre_input"):2==o?(i=_$("html_input").contentWindow||document.frames.html_input,(n=_$("html_input").contentDocument)||(n=document.frames.html_input.document),a=n.body||n.getElementsByTagName("body")[0],!t&&a.focus()):i=_$("textInput"),!t&&i.focus(),!t&&a&&a.focus(),i},this.filterPasteData=function(e,t,i){var n=i?"\r\n":"<br/>";return e&&t?e.replace(/(^[\s\r\n]+)|[\r]|([\s\r\n]+$)/g,"").replace(/[\r\n]+([\r\n\s]+)*/g,n):e&&e.replace(/<(br|hr)\/?> /gi,"\n").replace(/<\/(br|p|div|table|section|footer|article|li|ul|ol)>/gi,"\n").replace(/(<[a-z]+(\s+[^>]*)?\/?>)|(<\/[a-z]+>)/gi,"").replace(/([\s]+[\r\n]+)|([\r\n]+[\s]+)/g,"\n").replace(/([\r\n]+)/g,"\n").replace(/[\n]+/g,n)},this.filterPasteText=function(t,i,n,a){var o,s,r=_$("textInput");if(void 0===i&&(i=n.clipboardData&&clipboardData.setData?n.clipboardData.getData("text"):(t.originalEvent||t).clipboardData.getData("text/plain")||prompt("在这里输入文本")),i){if(i=e.filterPasteData(i,void 0,!0),t.returnValue=!1,t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation(),i&&e.plainText)if(a.selection)a.selection.createRange().text=i;else if("number"==typeof r.selectionStart&&"number"==typeof r.selectionEnd){var l=r.selectionStart,c=r.selectionEnd,d=l,u=r.value;r.value=u.substring(0,l)+i+u.substring(c,u.length),d+=i.length,r.selectionStart=r.selectionEnd=d}else r.value+=i;else i&&a.body.createTextRange?(a.selection?textRange=a.selection.createRange():n.getSelection&&(o=n.getSelection().getRangeAt(0),(s=a.createElement("span")).innerHTML="&#FEFF;",o.deleteContents(),o.insertNode(s),textRange=a.body.createTextRange(),textRange.moveToElementText(s),s.parentNode.removeChild(s)),textRange.text=i,textRange.collapse(!1),textRange.select()):i&&a.execCommand("insertText",!1,i);return!1}return!0},this.sendMsg=function(e){n.default.triggerEventOnPoint("_sendMsg");try{3==t.editorType?window.getSelection().empty():2==t.editorType&&t.win.getSelection().empty()}catch(e){}e&&"enter"==e.from&&t.isMobile&&"qq"!=n.default.Browser.browser&&"weixin"!=n.default.Browser.browser&&"uc"!=n.default.Browser.browser&&t.getInputDocBody().blur(),t.textInputChange()},this.textInputChange=function(e){var i=t.getInput(),s=o.default.getStatusData(),l=o.default.getConfig("inputMaxLength"),c=o.default.getConfig("maxRobotLength"),d=-1;2==s.chatStatus&&s.talkType==a.default.talkTypeRobot?function(e,i){var n,a,o=0,s=0;for(i*=2,n=0;n<e.length;n++){if(null!=e.charAt(n).match(/[^\x00-\xff]/gi)?(o+=2,s+=1):o+=1,o>=i)return t.setInput(e.substr(0,o-s)),void $("#inputLengthTip").html(lanRes.inputLengthTip1+" 0 "+lanRes.inputLengthTip2);a=i/2-(parseInt(o/2)+o%2),$("#inputLengthTip").html(lanRes.inputLengthTip1+" "+a+" "+lanRes.inputLengthTip2)}}(i,l?Math.min(c,l):c):l&&l<i.length&&(i.substr(l-8,16).replace(n.default.Constants.regEmo,(function(e,t,i){d=i})),d=d>-1?8-d:0,t.setInput(i.substr(0,l-d))),i!=r&&(r=i),n.default.publish("textInputChangeEvt",e)}};var n=s(i(0)),a=s(i(20)),o=s(i(3));function s(e){return e&&e.__esModule?e:{default:e}}var r=""},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(96);var n=l(i(0)),a=l(i(32)),o=l(i(97)),s=l(i(173)),r=l(i(174));function l(e){return e&&e.__esModule?e:{default:e}}var c;a.default.infoScroll;n.default.subscribe("changeNetStatus",(function(e,t){t?n.default.publish("changeDom",{name:"#networkDisconnected",cls:"hide"}):n.default.publish("changeDom",{name:"#networkDisconnected",removeCls:"hide"})}));var d={init:function(e){c=e,s.default.init(e),o.default.init(e),r.default.init(),$("#sa_advise").on("blur",(function(){window.scrollTo(0,0)})),$("#content").on("click",(function(e){c.getInputDocBody().blur()}))}};t.default=d},function(e,t,i){"use strict";i(11),i(9),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(3)),a=r(i(29)),o=r(i(0)),s=r(i(10));function r(e){return e&&e.__esModule?e:{default:e}}var l,c,d=a.default.callEchatNative,u=null,f=null,h=-1;o.default.subscribe("recordEvent",(function(e,t){if(0==t.type||1==t.type)u&&u(t.type);else if(2==t.type&"number"==typeof t.db){var i;i=t.db<40?0:(i=parseInt((t.db-40)/10))>5?5:i<1?1:i,$(".icon-record-sound").results[0].className="icon-record-sound echat icon-record-sound"+i}else 3==t.type&&"number"==typeof t.timeout?(console.log("record-countdown",t.timeout),$("body").addClass("record-countdown"),$(".icon-record-countdown").html(t.timeout)):4==t.type?f&&f():5==t.type?(f&&f(),o.default.showTip("说话时间太短")):7==t.type&&f&&f()}));var p={init:function(){var e=n.default.getVisitorInfo().companyId;function t(e){d("voice",{type:5}),f&&f()}e&&"522166"!=e&&$(".record-switch").removeClass("limit-hide"),$(".record-switch").on("click",(function(){$("#chatText").hasClass("recording")?$("#chatText").removeClass("recording"):$("#chatText").addClass("recording")})),l="getSelection"in window?function(){window.getSelection().removeAllRanges()}:function(){document.selection.empty()},$(".btn-record").on("contextmenu",(function(e){e.preventDefault&&e.preventDefault()})).on("touchstart",(function(e){if(s.default.handleNetwok())return!0;l();var i,n,a=c?e:e.touches[0];(c=function(e,t){return e.type=="pointer"+t||e.type.toLowerCase()=="mspointer"+t}(e,"down"))&&("touch"!=(n=e).pointerType&&n.pointerType!=n.MSPOINTER_TYPE_TOUCH||!n.isPrimary)||(i={x1:a.pageX,y1:a.pageY,start:(new Date).getTime()},h=0,u=function(e){u=null,0===h&&(1==e?($("body").addClass("record-touching").removeClass("record-canceling").removeClass("record-countdown"),$(".btn-record").html("松开&nbsp;&nbsp;结束"),d("voice",{type:2}),h=1,o.default.hideTip()):o.default.showTip("请打开麦克风权限"))},setTimeout((function(){0==h&&d("voice",{type:1,record_time:60})}),0),f=function(){h=-1,$("body").removeClass("record-touching").removeClass("record-canceling"),$(".btn-record").html("按住&nbsp;&nbsp;说话"),$(document).off("touchmove",r).off("touchend",t),f=null,u=null,l()},$(document).on("touchmove",r).on("touchend",t),!1!==e.cancelable&&e.preventDefault&&e.preventDefault());function r(e){l(),a=c?e:e.touches[0],i.x2=a.pageX,i.y2=a.pageY,1!=h&&2!=h||(Math.abs(i.y1-i.y2)>30?1==h&&($("body").addClass("record-canceling"),d("voice",{type:3}),h=2):2==h&&($("body").removeClass("record-canceling"),d("voice",{type:4}),h=1))}}))}};t.default=p},function(e,t,i){"use strict";i(38),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i(96);var n=r(i(29)),a=r(i(0)),o=r(i(3)),s=i(10);function r(e){return e&&e.__esModule?e:{default:e}}var l=n.default.callEchatNative;a.default.subscribe("showURLLink",(function(e,t,i,n){var a={url:i,openType:"half"};n&&n.workorder?(a.openType="coverChat",a.registerBridge=15,a.isCanOtherHandle=0):n&&5==n.from&&(a.registerBridge=7,a.isCanOtherHandle=1),l("openUrl",a)}));var c={init:function(){$("#urlList").on("click",".list-url-item",(function(e){var t=o.default.getConfig("urlListConfig"),i=t&&t[this.getAttribute("data-index")],n=i&&i.url;i&&n&&(n=(0,s.getADURL)(!0,i.openWindowParamList.concat(i.afterConnectParamList||[]),n),l("openUrl",{url:n,openType:1==i.openType?"default":"half"}))})),$("body").on("click","a",(function(e){var t,i,n=this;if($.fn.contains(_$("list_his"),n)||$.fn.contains(_$("innerADWrap"),n))return t=n.getAttribute("href"),i=n.getAttribute("target"),!!t&&(t=(0,s.addFixedParam)(t),"inner"==i||"menuSiteIframe"==i?l("openUrl",{url:t,openType:"half"}):i&&"cover"==i?l("openUrl",{url:t,openType:"coverChat"}):i&&"_blank"==i||i&&_$(i)?l("openUrl",{url:t,openType:"default"}):l("openUrl",{url:t,openType:"half"}),e.preventDefault&&e.preventDefault(),!1)}))}};t.default=c},function(e,t,i){"use strict";i(11),i(9),i(1),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(0)),a=s(i(3)),o=i(10);function s(e){return e&&e.__esModule?e:{default:e}}var r={innerAD:{notEnableParam:!1,params:"[]",element:"#inner_frame",hash:!0,srcUrl:void 0,attr:"src",url:""},innerImgUrl:{attr:"href"},rightAD:null,leftAD:null,innerURL:{},merchantLink:null,staffInfo:null,urlList:null};n.default.subscribe("updateChatStaffInfo",(function(){function e(e){if(e.srcUrl){var t,i=(0,o.getADURL)(!e.notEnableParam,e.params,e.srcUrl,(0,o.getParamChat)(),e.hash);$(e.element).each((function(n,a){t=i,"IFRAME"==a.tagName&&(t=(0,o.addEchatInnerFrameParam)(i)),"src"==e.attr?a.src=t:"href"==e.attr?a.href=t:$(a).attr(e.attr,t)})),e.url=t}}var t,i,a;for(t in r)if(i=r[t])if(n.default.isArray(i))for(a=0;a<i.length;a++)e(i[a]);else e(i)}));var l={init:function(){n.default.subscribe("setTheme",(function(){!function(){console.log("**************** 设置主题色了 ***************");var e=n.default.setCss,t=a.default.getChatbox(),i=a.default.getConfig("config649"),o=i.robotWordsInfo;a.default.setConfigs({echatSourceTagEnable:i.echatSourceTagEnable,showAvatar:"1"==t.chatBoxStaffImgEnable,busyCanSend:"1"!=t.busyNotAllowSendStatus,robotFeedback:o&&"1"==o.enableFedBack}),t.chatColor=t.chatColor||t.chatThemeBackColor,e(".bg0",[{attr:"color",value:t.chatThemeTxtColor},{attr:"backgroundColor",value:t.chatColor}]),e(".border0",{attr:"borderColor",value:t.chatColor}),e(".color0",{attr:"color",value:t.chatColor}),e(".bg1",[{attr:"backgroundColor",value:t.chatStaffBackColor},{attr:"borderColor",value:t.chatStaffBackColor},{attr:"color",value:t.chatStaffTxtColor}]),e(".colorbg1",{attr:"color",value:t.chatStaffBackColor}),e(".bg3",[{attr:"backgroundColor",value:t.chatVisitorBackColor},{attr:"borderColor",value:t.chatVisitorBackColor},{attr:"color",value:t.chatVisitorTxtColor}]),e(".colorbg3",{attr:"color",value:t.chatVisitorBackColor}),e(".msg-info",[{attr:"backgroundColor",value:t.sysMsgBackground},{attr:"color",value:t.sysMsgFontColor}]);var s=n.default.getBackground(t.windowThemeBackColor,t.windowThemeBackTransparency);t.sysMsgBackground&&(e(".color1",{attr:"color",value:t.windowTextColor}),e(".msg-staff-name",{attr:"color",value:t.windowTextColor}),e(".hr-left",{attr:"backgroundColor",value:t.windowTextColor}),e(".hr-right",{attr:"backgroundColor",value:t.windowTextColor})),t.windowThemeBackColor&&(e(".bg4",{attr:"backgroundColor",value:s}),e(".hr-left",{attr:"background",value:"linear-gradient(to right,"+s+" 0%, "+t.windowTextColor+" 40%, "+t.windowTextColor+" 100%)"}),e(".hr-right",{attr:"background",value:"linear-gradient(to left,"+s+" 0%, "+t.windowTextColor+" 40%, "+t.windowTextColor+" 100%)"})),t.evaluateThemeColor&&(e("body .sub-selected",[{attr:"color",value:t.evaluateThemeColor},{attr:"borderColor",value:t.evaluateThemeColor}]),e(".emcolor",{attr:"color",value:t.evaluateThemeColor}),e(".embgcolor",{attr:"backgroundColor",value:t.evaluateThemeColor})),o&&(e(".feedback-btn-solve",{attr:"backgroundColor",value:(t=o).solvedBackColor}),e(".sub-solved-li",{attr:"backgroundColor",value:t.solvedBackColor}),e(".feedback-btn-solve-sel",{attr:"backgroundColor",value:t.solvedSelectColor}),e(".feedback-sub-sel1",{attr:"backgroundColor",value:t.solvedSelectColor}),e(".feedback-btn-unsolve",{attr:"backgroundColor",value:t.unsolvedBackColor}),e(".sub-unsolved-li",{attr:"backgroundColor",value:t.unsolvedBackColor}),e(".feedback-btn-unsolve-sel",{attr:"backgroundColor",value:t.unsolvedSelectColor}),e(".feedback-sub-sel2",{attr:"backgroundColor",value:t.unsolvedSelectColor}))}(),2==a.default.getStatusByKey("chatStatus")&&function(){var e,t,i,s,l=a.default.getChatbox(),c=l.chatBoxAdHeight,d=1==l.chatBoxAdImgLinkFixed;function u(){n.default.publish("changeDom",{name:"#innerADWrap",removeCls:"hide"})}c=c?parseInt(c):0,$(".innerAD").each((function(){$("#list_msg").contains(this)||$(this).remove()})),2==l.chatBoxInnerAdType?e=l.chatBoxInnerAdContent:3==l.chatBoxInnerAdType?e=c&&l.chatBoxInnerAdImg:1==l.chatBoxInnerAdType&&(e=c&&l.chatBoxInnerAdUrl),e&&(2==l.chatBoxInnerAdType?t='<li class="clearfix innerAD innerAD-text"><div>'+e+"</div></li>":3==l.chatBoxInnerAdType?(s=(new Date).getTime(),window["resetInnerAdHeight"+s]=function(e,t,i){if(i==s){var n=(t>e?e:t)+20;d&&$("#innerADWrap").css("height",n+"px"),u()}},n.default.needHttps&&(e=e.replace(/^http:/,n.default.needHttps)),l.chatBoxInnerAdImgLinkUrl?(i=(0,o.getADURL)(l.chatBoxAdPostEnable,l.chatBoxInnerAdPostParamList||"{}",l.chatBoxInnerAdImgLinkUrl,1!=l.chatBoxInnerAdParamAppendType),t='<li class="clearfix innerAD innerAD-img"><a id="innerADLink" target="'+(1==l.chatBoxInnerAdImgLinkOpenType?window.SDK?"cover":"_blank":"inner")+'" href="'+i+'"><img onload="resetInnerAdHeight'+s+"(this.height,"+c+","+s+')" onerror="resetInnerAdHeight'+s+"(this.height,"+c+","+s+')" style="max-height:'+c+'px" src="'+e+'"/></a></li>',$.extend(r.innerImgUrl,{notEnableParam:1!=l.chatBoxAdPostEnable,srcUrl:l.chatBoxInnerAdImgLinkUrl,url:e,params:l.chatBoxInnerAdPostParamList||"{}",hash:1!=l.chatBoxInnerAdParamAppendType,element:"#innerADLink"})):t='<li class="clearfix innerAD innerAD-img"><img onload="resetInnerAdHeight'+s+"(this.height,"+c+","+s+')" style="max-height:'+c+'px" src="'+e+'"/></li>'):1==l.chatBoxInnerAdType&&(n.default.needHttps&&(e=e.replace(/^http:/,n.default.needHttps)),e=(0,o.getADURL)(l.chatBoxAdPostEnable,l.chatBoxInnerAdPostParamList||"{}",e,1!=l.chatBoxInnerAdParamAppendType),t='<li class="clearfix innerAD innerAD-url"><iframe id="inner_frame" class="ps-child" height="'+l.chatBoxAdHeight+'px" border="0" allowtransparency="true" scrolling="no" frameborder="0" style="width:100%;height:'+l.chatBoxAdHeight+'px" src="'+(0,o.addEchatInnerFrameParam)(e)+'" ></iframe></li>',$.extend(r.innerAD,{notEnableParam:1!=l.chatBoxAdPostEnable,srcUrl:l.chatBoxInnerAdUrl,url:e,params:l.chatBoxInnerAdPostParamList||"{}",hash:1!=l.chatBoxInnerAdParamAppendType,element:"#inner_frame"})),d?($("#innerADWrap").html(t).removeClass("hide"),u()):($("#list_msg").append(t),n.default.publish("changeDom",{name:"#innerADWrap",cls:"hide"})),2==l.chatBoxInnerAdType&&(setTimeout(u,1e3),setTimeout(u,5e3)))}()}))}};t.default=l},function(e,t,i){"use strict";i(36),i(9),i(1),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(0)),a=r(i(3)),o=r(i(32));i(177),i(178),i(179);var s=r(i(20));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function d(){var e=$(this).attr("dataindex"),t=a.default.getConfig("config695").routeEntranceInfo.entranceDetails[parseInt(e)],i={routeId:t.routeId,routeEntranceTheme:t.theme};a.default.setVisitorInfo(i),n.default.triggerEventOnPoint("registChat",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({echatTag:t.routeEntranceEchatTag||t.theme},i)),$("#router").remove(),$("#mask").hide()}n.default.subscribe("displayRouterDom",(function(e,t){var i,a,s,r,l,c,u,f,h,p=0,m=t.lines,g=t.entranceDetails,v=150*m,b='<div id="router" class="router slideUp router-line'+m+'"><div id="routerTitle" class="router-title '+(t.title?"":"router-hide")+'">'+t.title+'</div><div id="routerList" class="router-list"><ul class="clearfix">';for(r=0;r<g.length;r++)i=++p%m==0,a=(s=g[r]).icon&&!s.content?1:s.icon&&s.content?2:!s.icon&&s.content?3:s.icon||s.content?"":3,n.default.needHttps&&s.icon&&(s.icon=s.icon.replace(/^http:/,n.default.needHttps)),b+='<li class="router-item router-item-content'+a+'" dataindex="'+r+'" '+(i?'style="border-right:none;"':"")+'><div class="router-item-content"><div class="router-item-icon '+(g[r].icon?"":"router-hide")+'">'+(g[r].icon?'<img onload="_echat0.checkImg&&_echat0.checkImg(this)" src="'+g[r].icon+'"/>':"")+'</div></div><div class="router-item-theme">'+g[r].theme+"</div></li>";b+="</ul></div></div>",$("#mask").show(),$("body").append(b),$(".router-item").off("click").on("click",d),u=window.innerHeight||document.body.clientHeight,f=$("#routerList").height(),h=$("#routerTitle").height(),.8*u<f+h?($("#router").css({height:.8*u+"px"}),$("#routerList").css({height:.8*u-h+"px",position:"relative"}),c=o.default.initScroll("routerScroll","routerList"),setTimeout((function(){c.refresh()}),600)):$("#routerList").css({height:"auto"}),l=$("#router").height()||200,$("#router").css({width:n.default.px2rem?n.default.px2rem(v):v+"px",marginLeft:n.default.px2rem?n.default.px2rem(-v/2):-v/2+"px",marginTop:-l/2+"px"}).removeClass("slideUp")}));var u={init:function(){n.default.Browser.isIOS&&$("body").addClass("ios"),$(".robot-staff-close").on("click",(function(){var e=this.parentNode;$(e).addClass("hide")}));var e=n.default.isMobile?"touchend":"click";$("#chat").on(e,".robot-staff",(function(){2==a.default.getStatusByKey("chatStatus")&&a.default.getStatusByKey("talkType")==s.default.talkTypeRobot&&n.default.publish("sendMessage",{et:131})})).on(e,".end-chat",(function(){n.default.publish("visitorClose")})).on(e,".to-leave-word",(function(){a.default.getStatusByKey("chatStatus")>0&&a.default.getStatusByKey("talkType")!=s.default.talkTypeLeave&&n.default.publish("sendMessage",{et:107,toLeaveWord:1},(function(){}))})),$(".leave-bar-btn").on("click",(function(){n.default.publish("restartChat")}))},reset:function(){$(".btn-qcode").addClass("hide"),$(".btn-close").addClass("hide")}};t.default=u},function(e,t,i){"use strict";i(22),i(59),i(21),i(9),i(1),i(5),i(7);var n=l(i(0));i(123),i(124);var a=l(i(3)),o=l(i(10)),s=l(i(32)),r=i(125);function l(e){return e&&e.__esModule?e:{default:e}}var c,d,u,f,h,p,m,g=n.default.isMobile,v=!g&&2==n.default.windowType;function b(){function e(){var e;$("#verify_change").hasClass("loadin")||($("#verify_change").addClass("loadin"),e={et:122,windowType:n.default.windowType,content:"refresh code"},"1"==n.default.queryParams.autoPop&&(e.isAutoPop=1),n.default.publish("sendMessage",e))}$("#verify_change").removeClass("loadin"),$("#verify_input").removeClass("error").val(""),$("#verify_img").off("click").on("click",e),$("#verify_change").off("click").bind("click",e),$("#verify_input").off("click").bind("keydown",(function(){$("#verify_input").removeClass("error")})),$("#verify_ok").off("click").bind("click",(function(){if(!$("#verify_change").hasClass("loadin")){var e,t=$("#verify_input").val();t?($("#verify_change").addClass("loadin"),e={et:106,captcha:t,windowType:n.default.windowType},"1"==n.default.getQueryParams.autoPop&&(e.isAutoPop=1),n.default.publish("sendMessage",e)):$("#verify_input").addClass("error")}}))}n.default.subscribe("displayCode",(function(e,t){c(t)})),n.default.subscribe("displayEntryDom",(function(e,t){if(n.default.dji&&1==t.entranceInfo.entranceLevel)return a.default.setStatusByKey("isInEntryOrCode",!1),n.default.triggerEventOnPoint("registChat"),!1;var i=t.entranceInfo,o=2==a.default.getStatusByKey("status"),s=!1,r=i.fieldSettings||[],l=o&&"0"==i.offlineStartType,c=decodeURIComponent($.store("ECHAT_"+a.default.getStatusByKey("companyId")+"_ENTRY_HIS")||"{}");if(c=JSON.parse(c),1!=i.entranceLevel&&l&&(i.entranceLevel=1,s=!0,r=[{enable:1,field:"gender",fieldId:7106,isSystem:1,label:"性别",lan:"default",settings:[{configs:[{item:lanRes.male,sort:1,value:"1"},{item:lanRes.female,sort:2,value:"2"}],lan:"default"}],type:4},{enable:1,field:"maritalStatus",fieldId:7107,isSystem:1,label:"婚否",lan:"default",settings:[{configs:[{item:lanRes.married,sort:1,value:"2"},{item:lanRes.unmarried,sort:2,value:"1"}],lan:"default"}],type:4},{enable:1,field:"age",fieldId:7109,isSystem:1,label:"年龄",lan:"default",settings:[{configs:{end:127,start:1,stepSize:1},lan:"default"}],type:7},{enable:1,field:"birthday",fieldId:7108,isSystem:1,label:"生日",settings:[],type:6}],i.upgradeOfflineVisitorInfoConfiguration=i.offlineVisitorInfoConfiguration,i.upgradeOfflineWelcomeWord=i.offlineWelcomeWord),1==i.entranceLevel)return d(i,c,s,r);f(i,c),n.default.publish("__setTitle",l?lanRes.leaveWord:"")})),f=function(e,t){var i,o,s,r,l,c,d=2==a.default.getStatusByKey("status"),f=(d?e.offlineVisitorInfoConfiguration:e.visitorInfoConfiguration)||[],p=f&&f.length||0,g=!a.default.getStatusByKey("captChaToken")&&function(e){var t,i=!0;for(t=0;t<e.length&&(i=i&&"1"==e[t].configInline);t++);return i?"1":"0"}(f),v=a.default.getConfig("isVip"),b=0,y=0,w="",S=0;for(e=$.extend({},e),!0===d&&(e.welcomeWord=e.offlineWelcomeWord,e.welcomeWordPos=e.offlineWelcomeWordPos,e.entryCanClose=e.offlineEntryCanClose,e.visitorInfoCloseImg=e.offlineVisitorInfoCloseImg,e.visitorInfoClosePos=e.offlineVisitorInfoClosePos,e.visitorInfoFormPos=e.offlineVisitorInfoFormPos,e.visitorInfoBackImg=e.offlineVisitorInfoBackImg,e.visitorInfoLabelColor=e.offlineVisitorInfoLabelColor,e.visitorInfoInputColor=e.offlineVisitorInfoInputColor,e.visitorInfoSubmitPos=e.offlineVisitorInfoSubmitPos,e.visitorInfoSubmitTxt=e.offlineVisitorInfoSubmitTxt,e.buttonBackgroundColor=e.offlineButtonBackgroundColor,e.visitorInfoBackgroundColor=e.offlineVisitorInfoBackgroundColor,e.visitorInfoSubmitImg=e.offlineVisitorInfoSubmitImg),n.default.needHttps&&(e.visitorInfoCloseImg&&(e.visitorInfoCloseImg=e.visitorInfoCloseImg.replace(/^http:/,n.default.needHttps)),e.visitorInfoBackImg&&(e.visitorInfoBackImg=e.visitorInfoBackImg.replace(/^http:/,n.default.needHttps)),e.visitorInfoSubmitImg&&(e.visitorInfoSubmitImg=e.visitorInfoSubmitImg.replace(/^http:/,n.default.needHttps))),console.log(e.visitorInfoBackImg),r=' <div id="entryWrap" class="'+("1"==g?"book-all-line ":"")+'" >'+(1==e.entryCanClose&&e.visitorInfoCloseImg?'<div id="cancelEntryBtn" style="'+e.visitorInfoClosePos+'"><img src="'+e.visitorInfoCloseImg+'" onload="imgLoadResizeSelf(this)" /></div>':"")+(e.visitorInfoBackImg?'<div><img id="entryWrapImg" class="book-table-img hide" src="'+e.visitorInfoBackImg+'" onload="imgLoadResize(this,-1)" /></div>':"")+'<form id="entryForm" name="entryForm" class="book-items" ><div class="book-form-title0" style="'+e.welcomeWordPos+'">'+(e.welcomeWord||"")+'</div> <div class="clearfix book-items-list" style="'+e.visitorInfoFormPos+';">',c=0;c<p;c++)w=1==(l=f[c]).configRequired?" req ":"","1"==l.configInline?b=parseInt(b+1.5):b+=.5,"1"==l.configWebVipVisitor&&v||"1"==l.configWebVisitor&&!v?("1"==l.configInline?y=parseInt(y+1.5):y+=.5,o=t[i=l.configName],s=window.ltIE10?"text":"birthday"==i?"date":"age"==i?"number":"text",r+='<div class="book-half book-item'+w+("1"==l.configInline?" book-one-line":"")+("gender"==i||"maritalStatus"==i?" book-item-opts":"")+'"><label class="book-label" style="color:'+e.visitorInfoLabelColor+'"><span class="req-span color0">*</span><span class="name-span">'+l.configDesc+"</span></label>"+("gender"==i?'<label class="input-radio-lb" style="color:'+e.visitorInfoLabelColor+'"><input type="radio" class="book-radio '+w+'" name="gender" value="1" '+(1==o?'checked="checked"':"")+' lb="'+l.configDesc+'"/><span class="radio-span">'+lanRes.male+'</span></label><label class="input-radio-lb" style="color:'+e.visitorInfoLabelColor+'"><input type="radio" class="book-radio '+w+'" name="gender" value="2" '+(2==o?'checked="checked"':"")+' lb="'+l.configDesc+'" /><span class="radio-span">'+lanRes.female+"</span></label>":"maritalStatus"==i?'<label class="input-radio-lb" style="color:'+e.visitorInfoLabelColor+'"><input type="radio" class="book-radio '+w+'" name="maritalStatus" value="1" '+(1==o?'checked="checked"':"")+' lb="'+l.configDesc+'"/><span class="radio-span">'+lanRes.unmarried+'</span></label><label class="input-radio-lb" style="color:'+e.visitorInfoLabelColor+'"><input type="radio" class="book-radio '+w+'" name="maritalStatus" value="2" '+(2==o?'checked="checked"':"")+' lb="'+l.configDesc+'"/><span class="radio-span">'+lanRes.married+"</span></label>":'<input type="'+s+'" lb="'+l.configDesc+'" class="book-ipt '+w+'" name="'+i+'" value="'+(o||"")+'" style="border-bottom-color:'+e.visitorInfoInputColor+";color:"+e.visitorInfoInputColor+';"/>')+"</div>"):(f[c].disabled=!0,S++);if(a.default.getStatusByKey("captChaToken")&&(r+='<div class="clearfix"><div class="book-half book-item req" id="verifyInner"><label class="book-label" style="color:'+e.visitorInfoLabelColor+'"><span class="req-span color0">*</span><span class="name-span">'+lanRes.validateCode+'</span></label><input type="text" id="verify_input" class="book-ipt req" lb="'+lanRes.validateCode+'" style="border-color:'+e.visitorInfoInputColor+'"/></div><div class="book-half book-item verify-line"><img onerror="this.className=this.className.replace(\'loadin\',\'\')" alt="'+lanRes.validateCode+'" id="verify_img" src="'+m(e)+'"/><span class="color0 cursor-p" id="verify_change">'+lanRes.nextPic+"</span></div></div>"),r+="</div>",r+='<div id="submitBtnentry" style="'+e.visitorInfoSubmitPos+'" class="book-btn"> <span class="book-btn-text">'+(e.visitorInfoSubmitTxt||"")+"</span></div>",r+="</form></div>",$("body").append('<div id="entry" class="entry-wrap0" style="display:block">'+r+"</div>"),$("body").addClass("entry"),1==n.default.windowType&&(b=parseInt(b+.5),y=parseInt(y+.5),S=b-y),S>0&&setTimeout((function(){$(".book-items-list").css("paddingBottom",view.px2rem?view.px2rem(30*S):30*S+"px")}),10),e.visitorInfoSubmitImg){var I=new Image;I.onload=function(){var t=_$("submitBtnentry").style;t.backgroundImage="url('"+e.visitorInfoSubmitImg+"')",t.backgroundSize=(view.px2rem?view.px2rem(this.width):this.width+"px")+" "+(view.px2rem?view.px2rem(this.height):this.height+"px"),t.lineHeight=view.px2rem?view.px2rem(this.height):this.height+"px",t.height=view.px2rem?view.px2rem(this.height):this.height+"px",t.width=view.px2rem?view.px2rem(this.width):this.width+"px",t=null,I=null},I.src=e.visitorInfoSubmitImg}return u({list:f,entry:e,submitSelector:"#submitBtnentry"}),$("#cancelEntryBtn").on("click",h),setTimeout((function(){var e=_$("entryForm").offsetHeight+20+_$("entryForm").offsetTop;_$("entry").style.minHeight=e+"px"}),100),!0},d=function(e,t,i,o){var s,l,c,d,f,p,b,y,w=a.default.getConfig("config600").lan||e.lan||"default",S=a.default.getConfig("isVip"),I=2==a.default.getStatusByKey("status"),T=I&&"0"==e.offlineStartType,k='<div class="entry2-item"><div class="entry2-label {{req}}"><span class="req-span">*</span><span class="entry2-name">{{configDesc}}:</span></div><div class="entry2-typeline {{req}}" lb="{{configDesc}}">{{typeline}}</div></div>',C=!0===I?e.upgradeOfflineVisitorInfoConfiguration:e.upgradeVisitorInfoConfiguration,x=C&&C.length||0,E="",_="",M=[],D={};for(!0===I&&(e.upgradeVisitorInfoSubmitTxt=e.upgradeOfflineVisitorInfoSubmitTxt,e.upgradeWelcomeWord=e.upgradeOfflineWelcomeWord),M.push(1!=n.default.windowType||n.default.dji?"entry2-mb":"entry2-pc"),!g&&v&&M.push("entry2-pc-mini"),M.push(T?"entry2-form":"entry2-half"),d=D,f=0;f<o.length;f++)if(c=d[o[f].field]=o[f],s=null,(c=o[f]).settings&&c.settings.length>0)if(1==c.settings.length)c.configs=c.settings[0].configs;else{for(p=0;p<c.settings.length;p++){if(c.settings[p].lan==w){c.configs=c.settings[p].configs;break}"default"==c.settings[p].lan&&(s=c.settings[p].configs)}!c.configs&&(c.configs=s||c.settings[0].configs)}for(b=0;b<x;b++)if(0==(l=C[b]).configWebVipVisitor&&S||0==l.configWebVisitor&&!S)l.disabled=!0;else{if(!D[l.configName]){if(!i){l.disabled=!0;continue}D[l.configName]={type:1}}var B=D[l.configName].type,P=t[l.configName];E=(0,r.getElementByFieldType)(D,B,l,P),_+=k.replace("{{typeline}}",E).replace(/\{\{configName\}\}/g,l.configName).replace(/\{\{configDesc\}\}/g,l.configDesc).replace(/\{\{wordDesc\}\}/g,"").replace(/\{\{value\}\}/g,P||"").replace(/\{\{req\}\}/g,1==l.configRequired?"req":"")}return T&&(_+=k.replace(/\{\{req\}\}/g,"req").replace(/\{\{configDesc\}\}/g,lanRes.leaveWordContent).replace("{{typeline}}",'<textarea rows="4" lb="'+lanRes.leaveWordContent+'" autoHeight="true"  class="entry2-textarea leave-entry-text req"></textarea>')),a.default.getStatusByKey("captChaToken")&&(_+=k.replace(/\{\{req\}\}/g,"req").replace(/\{\{configDesc\}\}/g,lanRes.validateCode).replace("{{typeline}}",'<input type="text" id="verify_input" lb="'+lanRes.validateCode+'" class="entry2-input entry2-input-code req" /><img alt="'+lanRes.validateCode+'" id="verify_img" src="'+m(e)+'" onerror="this.className=this.className.replace(\'loadin\',\'\')" /><span class="color0 cursor-p" id="verify_change">'+lanRes.nextPic+"</span>")),_='<div id="entry" class="{{entryClass}}"><form id="entryForm" class="entry2-wrap"><div class="entry2-title bg0">{{upgradeWelcomeWord}}</div><div class="entry2-content"><div class="entry2-items">{{list}}</div>{{btns}}</form></div>'.replace("{{entryClass}}",M.join(" ")).replace("{{list}}",_).replace("{{upgradeWelcomeWord}}",e.upgradeWelcomeWord).replace("{{btns}}",1==n.default.windowType&&!n.default.dji&&T?"":'<div class="entry2-submit"><div class="entry2-btn-submit bg0">{{upgradeVisitorInfoSubmitTxt}}</div></div></div>').replace("{{upgradeVisitorInfoSubmitTxt}}",T?lanRes.submit:e.upgradeVisitorInfoSubmitTxt).replace("{{close}}",lanRes.close).replace("{{submit}}",lanRes.submit),T?(1!=n.default.windowType||n.default.dji?$("body").append(_):$("#leave").html(_).removeClass("hide"),$("html").addClass("page-leave entry2"),y=1==n.default.windowType&&!n.default.dji&&T?".leave-enter-btn":".entry2-btn-submit"):($("body").append(_),$("html").addClass("entry2"),$(".entry2-btn-close").on("click",h),y=".entry2-btn-submit"),u({list:C,entry:e,submitSelector:y}),$("textarea[autoHeight]").autoHeight(),!0},h=function(e){a.default.setStatusByKey("visitorClose",!1),n.default.publish("chatEnded"),delete n.default.queryParams.autoPop,delete n.default.queryParams.autoChat},u=function(e,t){var i=e.list,s=e.entry,l=e.submitSelector,c=2==a.default.getStatusByKey("status")&&"0"==s.offlineStartType,d=n.default.checkIpt.bind(n.default),u=!1;function f(e){if(u)return!1;var s,l,f,h,p,m,g,v=_$("entryForm"),b={windowType:n.default.windowType},y="",w=!0;for(f=0,s=i.length;f<s;f++)if(null,"",p=i[f].configName,h=v[p],!i[f].disabled){if(l=(m=(0,r.getFormItemValue)(null,h,p)).val,!(w=d(h,l,p,(function(e){h.nodeType?e?$(h).removeClass("error"):$(h).addClass("error"):h[0]&&h[0].nodeType&&$(h[0].parentNode.parentNode).addClass("error")}))&&w))return!1;l&&w&&(y+=m.label+" "+(m.inputValue||l)+"\r\n "),b[p]=l}if(o.default.handleNetwok())return!1;if(b.leaveContent=void 0,c&&(g=$(".leave-entry-text").results[0],d(g,g.value,"content",(function(e){g.nodeType&&(e?$(g).removeClass("error"):$(g).addClass("error"))})),!g.value))return!1;if(a.default.getStatusByKey("captChaToken")){if($("#verify_change").hasClass("loadin"))return!1;var S=$("#verify_input").val();if(!S)return $("#verify_input").addClass("error"),!1;$("#verify_change").addClass("loadin"),b.captcha=S}return b.et=106,"1"==n.default.queryParams.autoPop&&(b.isAutoPop=1),u=!0,a.default.setStatusByKey("visitorEntryInput",{entryParam:b,entryVisitorMsg:y,entryLeaveContent:c?g&&g.value:void 0}),n.default.publish("sendMessage",b,(function(e){e&&e.successful&&t&&t(),a.default.getStatusByKey("captChaToken")&&$("#verify_change").removeClass("loadin"),u=!1})),!1}a.default.getStatusByKey("captChaToken")&&p(),$("input",_$("entryForm")).bind("blur",(function(){var e=this.name,t=(0,r.getFormItemValue)(null,this,e).val;d(this,t,e,(function(e){}))})),$("textarea",_$("entryForm")).bind("blur",(function(){var e=this.value.replace(/^[\s]+|[\s]+$/gi,"");d(this,e,"textarea",(function(e){}))})),$("select",_$("entryForm")).bind("change",(function(){var e=this.value;d(this,e,"select",(function(e){}))})),$(".date-input",_$("entryForm")).bind("change",(function(e){var t=$(".date-show",this.parentNode);t&&t.val(this.value)})),u=!1,_$("entryForm").onsubmit=f,$(l).off("click").on("click",f)},m=function(){return a.default.getVisitorInfo().dataHost+"/chatCaptCha.jpg?captChatToken="+a.default.getStatusByKey("captChaToken")},p=function(e){$(".verify-change").attr("id",""),$(".verify-img").attr("id",""),$(".verify-ok").attr("id",""),$(".verify-input").attr("id",""),b()},c=function(e){$("#entry").html("").addClass("hide"),$(".verify-change").attr("id","verify_change"),$(".verify-img").attr("id","verify_img"),$(".verify-ok").attr("id","verify_ok"),$(".verify-input").attr("id","verify_input"),b(),$("#verify_img").attr("src",m(e)),$("#verify").show(),$("#mask").show()},n.default.subscribe("refreshCode",(function(e,t){$("#verify_change").removeClass("loadin"),0==t.status||1==t.status&&$("#verify_input").addClass("error"),$("#verify_img").attr("src",m(t))})),n.default.subscribe("entryCallback",(function(e,t){if(t.success&&(n.default.publish("changeDom",{name:"#footer",bottom:0,scrollTime:500}),t.mid&&(delete n.default.queryParams.autoPop,delete n.default.queryParams.autoChat),a.default.setStatusByKey("captChaToken",void 0),a.default.setStatusByKey("isInEntryOrCode",!1),t.mt)){n.default.triggerEventOnPoint("registChat",{et:103});var i,o=a.default.getStatusByKey("visitorEntryInput").entryParam,s="ECHAT_"+a.default.getStatusByKey("companyId")+"_ENTRY_HIS";o&&(delete o.et,delete o.captcha,i=(i=$.store(s))?JSON.parse(i):{},o=$.extend(i,o),$.store(s,JSON.stringify(o)))}})),window.imgLoadResizeSelf=function(e){n.default.px2rem&&(e.style.width=n.default.px2rem(e.naturalWidth||e.width))},window.imgLoadResize=function(e,t){Math.random();var i=-1==t?"entry":"inviteBook"+t,a=-1==t?"entryWrapImg":"inviteBookImg"+t;function o(){var e=1==n.default.windowType?600:260,o=this.naturalWidth||this.width,r=_$(i);r&&(o>e&&(o=e),r.style.width=n.default.px2rem?n.default.px2rem(o):o+"px",console.log('Util.px2rem ? (Util.px2rem(w)) : (w + "px");',n.default.px2rem?n.default.px2rem(o):o+"px"),-1==t&&(r.style.marginLeft=n.default.px2rem?n.default.px2rem(-o/2):-o/2+"px"),$("#"+a).removeClass("hide").css("width",n.default.px2rem?n.default.px2rem(o):o+"px"),s.default.scrollToBottom())}if(e.naturalWidth)o.call(e);else{var r=new Image;r.onload=o,r.src=e.src}}},function(e,t,i){"use strict";i(9),i(1),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=l(i(0)),a=i(10),o=l(i(3)),s=l(i(97)),r=l(i(122));function l(e){return e&&e.__esModule?e:{default:e}}var c,d,u,f,h,p=!1,m={satisfyFocus:!1};function g(e){$("#satisfy").removeClass("satisfy-show").hide(),$("#mask").hide().off("click",g),_$("sa_advise").blur(),$("#footer").removeClass("hide-satisfy"),n.default.publish("changeDom",{name:"#footer",bottom:0}),!0!==e&&(2!=o.default.getStatusByKey("chatStatus")?(n.default.publish("__evaluate","0-2"),n.default.publish("_closeWin")):n.default.publish("__evaluate","0-1"))}function v(e){var t=$(".menu-satisfy"),i="hide",n="limit-hide";1==e?t.addClass(i).removeClass("show"):2==e?t.removeClass(i):3==e?t.addClass(n):4==e?t.removeClass(n):5==e?t.addClass("show").removeClass(i):6==e&&t.hide(),s.default.checkMenuNums()}function b(e){var t=o.default.getEvaluateAndLimit(),i=o.default.getStatusByKey("sendMsgNum");if(t.limit>i&&1==e)return!1;if(h=e,2==e||3==e||d&&!o.default.getStatusByKey("satisfySubmited")){r.default.inputBlur(),u();var n=setTimeout((function(){clearTimeout(n),$("#mask").off("click",g).on("click",g).show(),$("#satisfy").show()}),0);return!0}return!1}f=function(e,t,i){function n(e,i){var n,a,o=parseInt(e)-1;if(!t)for(a=$(".sa-sli").results,n=0;n<5;n++)n<=o?$(a[n]).addClass("sa-star").html("&#xe64d;"):$(a[n]).removeClass("sa-star").html("&#xe6cd;");_$("satisfyConfig").className="sa-sel-"+(o+1),i&&$("#satisfy_ipt").val(o+1)}function a(){var e,i,n=parseInt($("#satisfy_ipt").val()||5)-1;if(!t)for(e=$(".sa-sli").results,i=0;i<5;i++)i<=n?$(e[i]).addClass("sa-star"):$(e[i]).removeClass("sa-star");_$("satisfyConfig").className="sa-sel-"+(n+1),$(".sub-tab-sel").removeClass("sub-tab-sel"),$(".sub-tab"+(n+1)).addClass("sub-tab-sel")}i&&$(".sub-tab"+i).addClass("sub-tab-sel"),$(".sa-stars").on("touchstart touchmove touchend",(function(e){var t;if(e.touches&&e.touches.length&&e.clientX)try{t=document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY)}catch(i){t=document.elementFromPoint(e.clientX,e.clientY)}else;t=t||e.target||e.srcElement,$(t).hasClass("sa-sli")&&n($(t).attr("v"),!0)})),$(".sa-stars").on("touchend",a),$(".sa-imgs").on("touchend",a),$(".sa-imgs").on("touchstart touchmove touchend",(function(e){var t;if(e.touches&&e.touches.length&&e.clientX)try{t=document.elementFromPoint(e.touches[0].pageX,e.touches[0].pageY)}catch(i){t=document.elementFromPoint(e.clientX,e.clientY)}else;t=t||e.target||e.srcElement,($(t).hasClass("sa-un-img")||$(t).hasClass("sa-s-img"))&&n($(t).attr("v"),!0)})),$(".sa-cli").on("click",(function(e){$(this).hasClass("sub-selected")?$(this).removeClass("sub-selected"):$(this).addClass("sub-selected")})),$("#sa_advise").on("focus",(function(e){m.satisfyFocus=!0})).on("blur",(function(e){m.satisfyFocus=!1,_$("satisfyContent").style.marginBottom="0"}))},u=function(){var e,t,i;if($("#sa_advise").val(""),!p)for(e=$(".sa-sli").results,t=0;t<e.length;t++)$(e[t]).addClass("sa-star").html("&#xe64d;");i=$("#satisfyConfig").attr("default"),$("#satisfyConfig").attr("class","sa-sel-"+i),$(".sub-tab-sel").removeClass("sub-tab-sel"),$(".sub-tab"+i).addClass("sub-tab-sel"),$("#satisfy_ipt").val(i)},n.default.subscribe("inviteSatisfy",(function(e,t){b(2),n.default.publish("__newMsg",{f:"s",m:0,c:"[evaluate]:客服邀请您评价"})})),n.default.subscribe("showSatisfy",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return b(t)})),n.default.subscribe("initEvaluate",(function(){var e=o.default.getStatusByKey("sendMsgNum"),t=o.default.getEvaluateAndLimit();if(!t.config)return d=!1,void v(3);t.enable?(d=!0,t.limit>0&&(e<t.limit?v(3):v(4))):(d=!1,v(3)),c||function(e){var t,i,s,r=!1;if(c=!0,(i=(t=p=1==e.evaluateType)?1==e.bestEnable?5:1==e.betterEnable?4:1==e.commonEnable?3:1==e.worseEnable?2:1==e.worstEnable&&1:5)||(i=5,r=!0),$("#satisfy_ipt").val(i),s='<div class="sa-title tc"><div class="sa-title-left"></div><div class="sa-title-content"><span langs="evaluateTip">'+lanRes.evaluateTip+'</span><span class="sa-name sa-name5 emcolor">'+n.default.HTMLDecode(e.bestDesc)+'</span><span class="sa-name sa-name4 emcolor">'+n.default.HTMLDecode(e.betterDesc)+'</span><span class="sa-name sa-name3 emcolor">'+n.default.HTMLDecode(e.commonDesc)+'</span><span class="sa-name sa-name2 emcolor">'+n.default.HTMLDecode(e.worseDesc)+'</span><span class="sa-name sa-name1 emcolor">'+n.default.HTMLDecode(e.worstDesc)+'</span></div><div class="sa-title-right"></div></div>',t&&!r?(s+='<ul class="sa-imgs clearfix">',1==e.worstEnable&&(s+='<li class="sa-img sa-img1" v="1"><img class="sa-s-img" v="1" src="'+e.worstSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/><img class="sa-un-img" v="1" src="'+e.worstUnSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/></li>'),1==e.worseEnable&&(s+='<li class="sa-img sa-img2" v="2"><img class="sa-s-img" v="2" src="'+e.worseSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/><img class="sa-un-img" v="2" src="'+e.worseUnSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/></li>'),1==e.commonEnable&&(s+='<li class="sa-img sa-img3" v="3"><img class="sa-s-img" v="3" src="'+e.commonSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/><img class="sa-un-img" v="3" src="'+e.commonUnSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/></li>'),1==e.betterEnable&&(s+='<li class="sa-img sa-img4" v="4"><img class="sa-s-img" v="4" src="'+e.betterSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/><img class="sa-un-img" v="4" src="'+e.betterUnSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/></li>'),1==e.bestEnable&&(s+='<li class="sa-img sa-img5 sa-sli5" v="5"><img class="sa-s-img" v="5" src="'+e.bestSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/><img class="sa-un-img" v="5" src="'+e.bestUnSelected.replace(/^http:/,n.default.needHttps||"http:")+'"/></li>'),s+="</ul>"):s+='<ul class="sa-stars clearfix"><li class="sa-sli sa-star emcolor" v="1">&#xe64d;</li><li class="sa-sli sa-star emcolor" v="2">&#xe64d;</li><li class="sa-sli sa-star emcolor" v="3">&#xe64d;</li><li class="sa-sli sa-star emcolor" v="4">&#xe64d;</li><li class="sa-sli sa-star emcolor sa-sli5" v="5">&#xe64d;</li></ul>',!t||!r){s+='<div class="sub-tabs clearfix " >',s+="<div>";var l,d,u,m,v,b=["worstConfiguration","worseConfiguration","commonConfiguration","betterConfiguration","bestConfiguration"];for(l=5;l>0;l--){for(s+='<ul class="sub-tab sub-tab'+l+'" '+((v=(u=e[b[l-1]]||[]).length)>0?"":'style="display:none"')+' id="subEvaluate'+l+'"> ',d=0;d<v;d++)s+='<li class="sa-cli" dataname="'+(m=u[d]).configName+'">'+n.default.HTMLDecode(m.configDesc)+"</li>";s+="</ul>"}s+="</div>",s+="</div>"}$("#satisfyConfig").html(s).addClass("sa-sel-"+i).attr("default",i),f(r,t,i),$("#sa_ok").on(n.default.isMobile?"touchend":"click",(function(e){if((0,a.handleNetwok)())return!1;n.default.isMobile&&e.preventDefault();var t,i,s,l=n.default.HTMLDecode($("#sa_advise").val()),c=$("#satisfy_ipt").val(),d="";if("0"!=c&&c){if(!r&&(i=(t=$(".sa-cli",_$("subEvaluate"+c)).results||[]).length)>0)for(s=0;s<i;s++)d+="&"+[$(t[s]).attr("dataname")]+"="+($(t[s]).hasClass("sub-selected")?1:0);var u=o.default.getVisitorInfo(),f=o.default.getStatusData(),p=o.default.getConfig("config672")||{},m=u.dataHost+"/ces?companyId="+u.companyId+d+n.default.addMapParams({talkId:f.talkId,visitorId:u.visitorId,appId:u.appId,nonce:p.nonce,reChatTag:p.reChatTag,mainItem:c,evaluateType:h,comment:l,media:u.media,windowType:n.default.windowType,lan:u.lan});console.log("评价 url***",m),$.ajax({url:m,type:"jsonp",jsonpCB:"jsonpCallback",success:function(e){if(console.log(e),o.default.setStatusByKey("satisfySubmited",o.default.getStatusByKey("talkId")),1==e)c,n.default.showTip(lanRes.successSubmitEval,"ok"),0==o.default.getStatusByKey("chatStatus")?n.default.publish("__evaluate","1-2"):n.default.publish("__evaluate","1-1"),l&&n.default.publish("__evaluateComment",{comment:l,chatting:2==o.default.getStatusByKey("chatStatus")}),0==o.default.getStatusByKey("chatStatus")&&n.default.publish("_closeWin");else{var t=lanRes.unkownErrorSubmitEval;129==e?t=lanRes.evaluateTimeout:130==e?t=lanRes.evaluateRepeat:133==e&&(t=lanRes.evaluateRepeatTime),n.default.showTip(t)}},error:function(){n.default.showTip(lanRes.unkownErrorSubmitEval)}}),g(!0)}})),$("#sa_cancel").on(n.default.isMobile?"touchend":"click",(function(e){g(),n.default.isMobile&&e.preventDefault()}))}(t.config)}));var y=m;t.default=y},function(e,t,i){"use strict";i(61),i(63),i(22),i(59),i(21),i(1),i(5),i(7);var n=r(i(0));i(123),i(124);var a=r(i(3));r(i(29));i(126);var o=i(10),s=(r(i(32)),i(125));function r(e){return e&&e.__esModule?e:{default:e}}var l,c,d,u=window.fileUtil,f=(!n.default.isMobile&&n.default.windowType,u.orderUploadData),h=[];n.default.subscribe("enterWorkorder",(function(e,t){var i,o,r,d,f,h="",p="",m=[],g=a.default.getConfig("config600"),v=a.default.getVisitorInfo(),b=t.jobWindowInfo,y=b.configuration;for(u.setParamData({token:b.token,nonce:b.nonce,visitorId:v.visitorId,companyId:v.companyId,apiServerDomain:a.default.getApiDomain()}),m.push(1!=n.default.windowType||n.default.dji?"entry2-mb":"entry2-pc"),!n.default.isMobile&&n.default.mini&&m.push("entry2-pc-mini"),m.push("entry2-form"),$("#orderSubmit")&&$("#orderSubmit").remove(),i='<div id="orderSubmit" class="{{entryClass}} order-form"><header class="ordertitle"><div class="margin-b5" style="font-size: 14px;">{{title}}</div><div class="order-tip">{{description}}</div></header><div class="entry2-wrap entry2-items order-content"><form id="orderForm">{{element}}</form><span class="order-button magr0 bg-c order-upload-button"><form class="order-upload" name="orderUploadForm" id="orderUploadForm" enctype="multipart/form-data" method="post"><input type="file" title="'+lanRes.visitor189+'" name="file" id="orderUpload">'+lanRes.visitor189+'</form></span><div id="orderFileslist" class="order-fileslist"></div><div class="order-tip">'+lanRes.visitor178+'</div></div><footer class="order-footer"><span class="order-submit order-button bg0">{{submit}}</span></footer></div>',o='<div class="entry2-item"><div class="entry2-label {{req}}"><span class="req-span">*</span><span class="entry2-name">{{configDesc}}:</span></div><div class="entry2-typeline {{req}}" lb="{{configDesc}}">{{typeline}}</div></div>',r=0;r<y.length;r++)d=y[r],c(d.configName,b.fieldSettings,d.lan,(function(e,t,i){var n=t.type;h=(0,s.getElementByFieldType)(e,n,d,""),p+=o.replace("{{typeline}}",h).replace(/\{\{configName\}\}/g,d.configName).replace(/\{\{configDesc\}\}/g,d.configDesc).replace(/\{\{wordDesc\}\}/g,d.wordDesc).replace(/\{\{value\}\}/g,"").replace(/\{\{req\}\}/g,1==d.configRequired?"req":"")}));if(f=n.default.SDKNative?"jpg，png，gif，bmp，avi，mov，rmvb，rm，flv，mp4，3gp":"jpg，png，gif，txt，rar，zip，doc，docx，xls，xlsx，bmp，avi，mov，rmvb，rm，flv，mp4，3gp",p=i.replace("{{entryClass}}",m.join(" ")).replace("{{element}}",p).replace(/\{\{title\}\}/g,b.title).replace(/\{\{description\}\}/g,b.description).replace(/\{\{cancel\}\}/g,lanRes.cancel).replace(/\$\{uploadFileSize\}/g,g.uploadFileSize/1024/1024).replace(/\$\{filesTip\}/g,f).replace(/\{\{submit\}\}/g,lanRes.submit),1!=n.default.windowType||n.default.dji?$("body").append(p):$("#leave").html(p).removeClass("hide"),n.default.isMobile&&$("#orderSubmit").off("click").bind("click","img",(function(e){setTimeout((function(){}),500)})),n.default.isMobile||1!=n.default.windowType||n.default.dji)self===window.top&&($(".btn-close").addClass("hide"),setTimeout((function(){$(".btn-close").addClass("hide")}),100)),$("#container").addClass("hide");else{$("#chat").addClass("hide"),$("#orderSubmit footer").remove(),window.opener||($(".btn-close").addClass("hide"),setTimeout((function(){$(".btn-close").addClass("hide")}),100));var w='<div class="order-submit order-button bg0">'+lanRes.submit+"</div>";$(".leave-entry-foot").html(w)}$("html").addClass("page-leave entry2"),$("#footer").addClass("hide"),setTimeout((function(){$("#mask").hide()}),100),$("#orderUpload").off("click").bind("click",(function(e){e.stopPropagation()})),u.bindOrderUpload(".order-upload-button","#orderUpload"),l(y,".order-submit")})),c=function(e,t,i,n){var a,o,s,r,l,c={};for(i=i||"default",r=0;r<t.length;r++){if(o=null,(a=c[t[r].field]=t[r]).settings&&a.settings.length>0)if(1==a.settings.length)a.configs=a.settings[0].configs;else{for(l=0;l<a.settings.length;l++){if(a.settings[l].lan==i){a.configs=a.settings[l].configs;break}"default"==a.settings[l].lan&&(o=a.settings[l].configs)}!a.configs&&(a.configs=o||a.settings[0].configs)}t[r].field===e&&(s=t[r])}n&&n(c,s,o)},l=function(e,t){var i=n.default.checkIpt.bind(n.default),r=!1,l=_$("orderForm");function c(e,t){var i=a.default.getConfig("config649"),o=a.default.getVisitorInfo(),s="1"===i.jobWindowInfo.jobQRCodeEnable;$._ajax({url:a.default.getApiDomain()+"/chatapi/jobh/cmj?companyId="+o.companyId+"&requesterVisitorId="+o.visitorId+n.default.addMapParams(e),type:"jsonp",jsonpCB:"jsonpCallback",success:function(e){e.successful?(t&&t(!0),d(e.result.data,s)):(t&&t(!1),n.default.showDialog({tip:e.errorMsg,cancel:!1}))}})}function p(t){if(t.stopPropagation(),r)return!1;var d,p,m,g,v,b,y,w=l,S={},I=!0,T=!0,k=a.default.getConfig("config649"),C=a.default.getConfig("config600"),x=k.jobWindowInfo,E=(0,o.getParamChat)();for(p=0,m=e.length;p<m;p++)if(null,"",b=(g=e[p]).configName,v=w[b],!e[p].disabled){if(d=(0,s.getFormItemValue)(w,v,b).val,!(I=i(v,d,b,(function(e){v.nodeType?e?$(v).removeClass("error"):$(v).addClass("error"):v[0]&&v[0].nodeType&&$(v[0].parentNode.parentNode).addClass("error")}))&&I))return!1;S[b]=d}if((0,o.handleNetwok)())return!1;if(S.routeId=k.routeId,S.token=x.token,S.nonce=x.nonce,S.styleId=k.styleId,S.jobTemplateId=x.jobTemplateId,S.requesterLan=C.lan,n.default.SDKNative&&f.length>0)S.attachments=[],h=[],T=u.getSubmitItems(S.attachments),S.attachments=JSON.stringify(S.attachments);else if(h.length>0){for(S.attachments=[],y=0;y<h.length;y++)(g=h[y]).name=encodeURIComponent(g.name),g.fileValue?S.attachments.push({type:g.type,fileValue:g.fileValue}):T=!1;S.attachments=JSON.stringify(S.attachments)}if(E.acdStaffId&&(S.acdStaffId=E.acdStaffId),E.acdType&&(S.acdType=E.acdType),r=!0,T)return c(S,(function(e){r=!!e})),!1;n.default.showDialog({tip:lanRes.visitor190,ok:function(){for(y=0;y<h.length;y++)h[y].xhr&&h[y].xhr.abort();c(S,(function(e){r=!!e}))},cancel:function(){}})}$(".entry2-input",l).bind("blur",(function(){var e=this.name,t=(0,s.getFormItemValue)(l,this,e).val;i(this,t,e,(function(e){}))})),$("textarea",l).bind("blur",(function(){var e=this.value.replace(/^[\s]+|[\s]+$/gi,"");i(this,e,"textarea",(function(e){}))})),$("input",l).bind("change",(function(){var e=this.name,t=(0,s.getFormItemValue)(l,this,e).val;i(this,t,e,(function(e){}))})),$("select",l).bind("change",(function(){var e=this.value;i(this,e,"select",(function(e){}))})),$(".date-input",l).bind("change",(function(e){var t=$(".date-show",this.parentNode);t&&t.val(this.value)})),_$("orderForm").onsubmit=p,$(t).off("click").bind("click",p)},d=function(e,t){if(e.codeUrl){$("html").removeClass("entry2"),$("html").removeClass("page-leave"),$("#orderSubmit")&&$("#orderSubmit").remove();var i=t?e.codeUrl:locationBase+"/res/imgs/"+(n.default.SDK?"order_sdk.png":"order_web.png"),a=t?"order-complete":"order-complete-auto",o=t?'<div class="tip2">'+lanRes.visitor184+"</div>":"",s='<div id="orderSubmit"><div class="'+a+'"><img src="'+i+'" /><div class="tip1">'+lanRes.visitor183+"</div>"+o+"</div></div>";1==n.default.windowType?$("#leave").html(s).removeClass("hide"):$("body").append(s),$(".leave-entry-foot")&&$(".leave-entry-foot").remove()}}},function(e,t,i){"use strict";i(21),i(9),i(33),i(1),i(26),i(17),i(5),i(28),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o,s,r,l=m(i(0)),c=m(i(3)),d=i(10),u=m(i(67)),f=m(i(95)),h=m(i(32)),p=m(i(40));function m(e){return e&&e.__esModule?e:{default:e}}function g(){var e=c.default.getStatusData();return 2==e.chatStatus&&e.talkType==l.default.Constants.talkTypeRobot}function v(){l.default.publish("changeDom",{name:"#inputSuggest",cls:"hide",html:" "})}o=function(){var e,t,i,n=c.default.getMsgList(),a=c.default.getStatusData().talkId;for(i=n.length-1;i>=0;i--)if(t=(e=n[i]).data.mt,e.data.talkId==a)12001==t&&p.default.updateMsg(e);else if(e.data.talkId&&e.data.talkId!=a)break},r=function(e){c.default.setConfigs({hasSearchInSameScreen:"1"==e.enableSearchInTheSameScreen,hasInputAssociation:"1"==e.enableInputAssociate}),$("#inputLengthTip").html(lanRes.inputLengthTip1+Math.min(c.default.getConfig("inputMaxLength"),c.default.getConfig("maxRobotLength"))+lanRes.inputLengthTip2),l.default.publish("clearSendingMsg","robot"),l.default.queryParams.autoPop&&delete l.default.queryParams.autoPop,l.default.queryParams.autoChat&&delete l.default.queryParams.autoChat,s&&s(),l.default.subscribe("_sendQuestion",(function(e,t){var i={et:130,docId:t.docId,originDocId:t.originDocId,content:t.content};(0,f.default)(i),v()})),l.default.publish("__setTitle",c.default.getRobotInfo().name)},s=function(){function e(e,t){var i=function(e,t){var i=(0,d.getMsgByDom)(e);if(i){var n=i.allExtra.h5Extra||{},a=n.feedback,o=n.feedbackSubitem;if(!(t&&o||!t&&a))return i}}(e,t);if(i&&2==c.default.getStatusByKey("chatStatus")&&c.default.getStatusByKey("talkType")==l.default.Constants.talkTypeRobot&&i.talkId==c.default.getStatusByKey("talkId")){var n=i.knowledgeAnswerList[0],a=$(e).parents(".robot-feedback"),o=$(e).attr("type")||void 0,s=t?$(e).text():void 0,r=n.docId,u=n.queryId,f=n.robotDetailId,p=n.searchId,m=n.originQuestion;l.default.publish("sendMessage",{et:133,feedBack:o,feedBackSubitem:s,docId:r,queryId:u,robotDetailId:f,searchId:p,originQuestion:m}),l.default.publish("setExtraMessage",i,{feedback:o,feedbackSubitem:s}),t?(a.addClass("robot-feedback-sub-had"),$(e.parentNode).addClass("feedback-sub-sel"+o)):(a.addClass("robot-feedback-had robot-feedback-had"+o),$(e).addClass("feedback-btn-"+(1==o?"solve":"unsolve")+"-sel")),h.default.scrollToElement($(e).parents(".msgli").attr("id"))}}s=null,$("#list_msg").on("click",".common-ques-li",(function(e){l.default.publish("_sendQuestion",{docId:$(this).attr("did"),content:unescape($(this).attr("ques"))})})),$("#robotToStaffWord").on("click",(function(){g()&&l.default.publish("sendMessage",{et:131}),u.default.input.inputBlur()})),$("#inputSuggest").on("click",".ipt-list-li",(function(e){if(!(0,d.handleNetwok)()&&(u.default.input.setInput(unescape($(this).attr("ques"))),g())){l.default.publish("_sendQuestion",{docId:$(this).attr("did"),content:unescape($(this).attr("ques"))});u.default.input.getInput(!0)}})),$("#list_msg").on("click",".question-list-li",(function(e){var t=(0,d.getMsgByDom)(this);if(t){var i=t.knowledgeAnswerList[0],n=i.docId,a=i.relateKnowledges&&i.relateKnowledges.length?i.relateKnowledges:i.suggestions,o=$(this).attr("index"),s=a[parseInt(o)];l.default.publish("_sendQuestion",{docId:s.docId,originDocId:n,content:s.question})}})),$("#list_his").on("click",".feedback-btn-unsolve",(function(t){e(this)})).on("click",".feedback-btn-solve",(function(t){e(this)})).on("click",".feedback-sub-content",(function(t){e(this,!0)}))},a=function(){var e;return l.default.subscribe("__visitorSendMsg",v),function(){var t=u.default.input.getInput(!1);t||v(),!t||n==t&&e==t||(n=t,(0,f.default)({et:132,content:n})),e=t}},l.default.subscribe("getMsgRobot",(function(e,t){if(function(e){if(1!=e.isForward){var t=c.default.getStatusData();if(2==t.chatStatus&&t.talkType==l.default.Constants.talkTypeRobot&&e.talkId==t.talkId)return!0}}(t)){var i,a,o,s,r,d,u,f,h,p,m=t.knowledgeAnswerList||[],g="",v=!1,b=0;if(4!=t.type)3!=t.type||(204==t.result||205==t.result?(c.default.setVisitorInfo({robotToHumanKey:t.robotToHumanKey}),l.default.triggerEventOnPoint("registChat",{robotToHumanKey:t.robotToHumanKey})):207==t.result&&l.default.publish("changeDom",{name:"#robotToStaff",removeCls:"hide"}));else{for(o=t.segWords,r=0;r<m.length;r++){if(a=(i=m[r]).question,v=!1,a==n){r++,b=1,g='<div class="ipt-list"><a class="ipt-list-li" did="'+i.docId+'" ques="'+escape(i.question)+'"><b class="words-seg">'+a+"</b></a>";break}if(o)for(0,d=0;d<o.length;d++)s=o[d],s=l.default.escapeRegExp(s),a=a.replace(new RegExp(s,"igm"),(function(e,t){if(v=!0,!((f=arguments[(u=arguments.length)-2])>0))return'<b class="words-seg">'+e+"</b>";if(h=arguments[u-1].substring(0,f),p=arguments[u-1].substring(f),s.match(/^s|sp|spa|span$/)&&h.match(/<$/))return e;if(s.match(/^n|an|pan|span$/)){var i="</span>".replace(s,",").split(",");if(h.match(new RegExp(i[0])&&p.match(i[1])))return e}return/(\<span[^>]*>([^<]+(?!\<\/span\>))?$)|(\<[a-zA-Z]+[^>]*$)/gi.test(h)?e:'<b class="words-seg">'+e+"</b>"}));v&&(b++,g+='<a class="ipt-list-li" did="'+i.docId+'" ques="'+escape(i.question)+'">'+a+"</a>")}b>0?l.default.publish("changeDom",{name:"#inputSuggest",removeCls:"hide",html:g+"</ul>"}):l.default.publish("changeDom",{name:"#inputSuggest",cls:"hide",html:" "})}}}));var b={init:function(e){var t=!1;e.subscribe("startRobot",(function(){var i=c.default.getConfig("config649");e.unSubscribe("textInputChangeEvt"),"1"==i.enableInputAssociate&&e.subscribe("textInputChangeEvt",(0,d.throttle)(a(),1e3)),r(i),t||(t=!0,2==c.default.getStatusData().fisrtChatstatus&&o())})),e.subscribe("endRobot",(function(){l.default.unSubscribe("_sendQuestion"),c.default.getStatusData().talkType==l.default.Constants.talkTypeRobot&&($(".robot-feedback").each((function(e,t){$(t).hasClass("robot-feedback-had")?$(t).hasClass("robot-feedback-sub-had")||($(".feedback-sub-solved",t).remove(),$(".feedback-sub-unsolved",t).remove()):$(t).remove()})),h.default.refreshChatScroll())}))}};t.default=b},function(e,t,i){"use strict";i(21),i(36),i(1),i(5),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,o=d(i(0)),s=d(i(3)),r=i(10),l=d(i(40)),c=d(i(67));function d(e){return e&&e.__esModule?e:{default:e}}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function f(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function h(){n&&clearInterval(n),a&&l.default.removeMsg(a)}function p(e,t){var i,o=lanRes.staffInput,s=0;h(),function e(){if(s>5)return h();var a;switch(s%3){case 0:a=o+"&nbsp;.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";break;case 1:a=o+"&nbsp;.&nbsp;.&nbsp;&nbsp;&nbsp;";break;case 2:a=o+"&nbsp;.&nbsp;.&nbsp;.&nbsp;"}s++,(i=_$("serviceTypingLine"))&&$(".msg-item",i).html(a),t.content=a,!l.default.updateMsg(t)&&l.default.showMsg(t),n=setTimeout(e,500)}(),a=t}var m={init:function(e){e.subscribe("startChat",(function(){var t;o.default.publish("__chatStatus","chatting"),delete o.default.queryParams.autoPop,delete o.default.queryParams.autoChat,o.default.publish("__chatStart",s.default.getStaff().name),e.subscribe("getMsgTyping",p),e.subscribe("clearMsgTyping",h),e.unSubscribe("textInputChangeEvt"),e.subscribe("textInputChangeEvt",(0,r.throttle)((t=null,function(){var e=c.default.input.getInput(!1),i=e;function n(e){o.default.publish("sendMessage",{et:104,content:e})}e&&(e=e.replace(/^[\n\r\s]+$/,""))&&t!=e&&(t=e,c.default.input.plainText&&(i=(0,r.plainTextToSendMsg)(e)),1!=o.default.filterMsg&&3!=o.default.filterMsg||!i?n(i):o.default.filterAndSendToServer({},(function(e,t,i){i||n(t)}),i))}),1e3)),o.default.publish("initEvaluate")})),e.subscribe("startQueue",(function(){o.default.publish("__chatStatus","waiting"),o.default.publish("__setTitle",lanRes.waitting)})),e.subscribe("getPosMsg",(function(e,t){var i=s.default.getConfig("config649"),n=i.queueTxt||i.mobileQueueTxt;(t=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){f(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t)).id="positionInfo",t.content=n.replace("${waitcount}",t.position),l.default.removeMsg(t),l.default.showMsg(t),o.default.publish("__chatQueue",t.position)}))}};t.default=m},function(e,t,i){"use strict";i(65),i(127),i(11),i(58),i(36),i(9),i(1),i(5),i(66),i(7),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=u(i(29)),a=u(i(0)),o=i(10),s=u(i(3)),r=u(i(183)),l=u(i(184)),c=u(i(40)),d=u(i(185));function u(e){return e&&e.__esModule?e:{default:e}}function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(null==e)return{};var i,n,a=function(e,t){if(null==e)return{};var i,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||(a[i]=e[i]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)i=o[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(a[i]=e[i])}return a}function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach((function(t){g(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i(126),i(186);var v,b,y,w,S,I,T,k=a.default.Constants,C=window.fileUtil,x=n.default.callEchatNativeConnect,$=0,E=0,_=!0;function M(e){e?(s.default.setDataByName("hasPreHistory",!0),a.default.publish("changeDom",{name:"#pre_his",removeCls:"hide"})):(s.default.setDataByName("hasPreHistory",!1),a.default.publish("changeDom",{name:"#pre_his",cls:"hide"}))}function D(e){return a.default.isArray(e)||(e=[e]),e.forEach((function(e){e.data||(e.data=m({},e)),!e.data.tm&&e.createTime&&(e.data.tm=e.createTime),e.data.et&&(e.data.et=parseInt(e.data.et)),e.data.mt&&(e.data.mt=parseInt(e.data.mt)),e.data.isForward=e.isForward,!e.data.bridgeMsgId&&e.bridgeMsgId&&(e.data.bridgeMsgId=e.bridgeMsgId);e.data;var t=h(e,["data"]);return e.data.allExtra=t||{},e.data.allExtra.h5Extra=e.data.allExtra.h5Extra||{},e})),e}function B(e,t){var i=(e=D(e)[0]).data,n=s.default.getStatusByKey("isInWorkOrder"),a=s.default.getMsgFromHistory(i.clientFileId);if(a){if(2==a.msg.sendStatus)return;s.default.updateMsgByIndetity(i.clientFileId)}else e.data.isInWorkOrder=n,s.default.updateMsgList(e,"push");if(n)return"prepareUpload"==t?C.prepareAddOrderFile(i):"uploadSuccess"==t?C.successOrderFile(i):C.updateOrderFile(i);c.default.showMsg(i)}function P(e,t){return function(i){!(e=e.replace(i+",",""))&&t&&(t(),t=null)}}C.setUtil(a.default),C.setNative(n.default.callEchatNative),v={forwardConfigMessage:function(e){if(e&&a.default.isArray(e)&&0!=e.length){var t,i,n=s.default.getConfig("config600").mt,o=s.default.getConfig("config649").mt;for(i=0;i<e.length;i++)if((t=e[i].data).mt=parseInt(t.mt),s.default.setConfig("config"+t.mt,t),600==t.mt){var r=t,c=r.city,d=r.province,u=r.country,f=r.photo,h=r.visitorId,p=r.firstUrl,m=r.keyword,g=r.referrer,v=r.searcher,b=r.apiServerDomain;s.default.setVisitorInfo({city:c,province:d,country:u,firstUrl:p,keyword:m,referrer:g,searcher:v,photo:f,apiServerDomain:b,visitorId:h}),s.default.setConfigs({inputMaxLength:"1"==t.limitVisitorInputContentLengthEnable?t.visitorInputContentMaxLength:2e3,companyVersionType:t.companyVersionType,isVip:1==t.visitorType})}else 649==t.mt?(n&&(0,l.default)(t),o||0!=s.default.getStatusByKey("chatStatus")||a.default.publish("setTheme",t)):(0,l.default)(t);y("forwardConfigMessage"),S("forwardConfigMessage"),w("forwardConfigMessage")}},forwardStaffInfo:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(t=0;t<i.length;t++)(e={})[i[t].staffId]=i[t];s.default.setStaffInfo(e),y("forwardStaffInfo"),S("forwardStaffInfo")},forwardHistoryMessage:function(e){return e&&a.default.isArray(e)||(e=[]),e=D(e),s.default.updateMsgList(e,"unshift"),$&&e[e.length-1].echatId<=$?($=0,void a.default.publish("checkHistory",e)):(e.length<10&&M(!1),_?(S("forwardHistoryMessage"),void w("forwardHistoryMessage")):void e.reverse().forEach((function(e){return(0,l.default)(e.data)})))},forwardChatMessage:function(e){!e||a.default.isArray(e)&&!e.length||(e=D(e),s.default.updateMsgList(e,"push"),e.forEach((function(e){return(0,l.default)(e.data)})))},forwardMessageCallback:function(e){if(e){var t=e.successful,i=e.bridgeMsgId;null!=f(t)&&i&&(s.default.updateMsgByIndetity(e.bridgeMsgId,{mid:e.mid,sendStatus:1}),d.default.callback(e))}},nativeReady:function(e){s.default.setVisitorInfo(e),y("nativeReady")},forwardChatStatus:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=s.default.getStatusData(),i=-1==t.fisrtChatstatus;i&&(e.fisrtChatstatus=e.chatStatus),s.default.setStatusData(e),y("forwardChatStatus"),2==e.chatStatus&&e.talkType==k.talkTypeChat||y("forwardStaffInfo"),w("forwardChatStatus"),i||t.chatStatus==e.chatStatus||(console.log("可能是异常状态后，收到了最新的状态",e),b(void 0,!1))},ackChangeStatus:function(e){if(e){var t=s.default.getStatusByKey("websocketStatus");e.successful?(s.default.setDataByName("websocketStatus",k.websocketConnected),(0,o.networkStatusChange)(!0),t!=k.websocketConnected&&d.default.flashMsg(!0)):(s.default.setDataByName("websocketStatus",k.websocketConnecting),t==k.websocketConnecting&&(0,o.networkStatusChange)(!1))}},prepareUpload:function(e){B(e,"prepareUpload")},uploadStart:function(e){B(e)},uploadProgress:function(e){B(e)},uploadSuccess:function(e){B(e,"uploadSuccess")},uploadFailure:function(e){var t=s.default.getMsgFromHistory(e).originData;t.data.sendStatus=3,B(t)}},n.default.initNativeAPI(v,"callEchatJsConnect"),w=P("forwardChatStatus,forwardConfigMessage,forwardHistoryMessage,",(function(){var e,t,i=s.default.getStatusData();2==i.chatStatus&&i.talkType==k.talkTypeChat&&((e=(0,o.checkHistory)()).noLimit?e.last673&&(0,l.default)(e.last673):(t=s.default.getMsgListFirst())&&t.echatId&&(a.default.subscribe("checkHistory",(function(e,t){var i=(0,o.checkHistory)(t).last673;i&&(0,l.default)(i)})),$=t.echatId,x("getChatMessage",{rowId:t.echatId,visitorId:s.default.getVisitorInfo().visitorId,companyId:T,selectCount:50})))})),y=P("forwardChatStatus,forwardConfigMessage,forwardStaffInfo,nativeReady,",b=function(e){var t=s.default.getStatusData();2!=t.chatStatus?t.unreadCount>0?(a.default.publish("enterUnread"),c.default.showMsg({id:"unreadMarkLine",mt:40,tm:(new Date).getTime(),content:'<div class="tc color1"><i class="hr-left"></i> <span>您有'+t.unreadCount+'条未读消息</span> <i class="hr-right"></i></div>'})):e||a.default.triggerEventOnPoint("registChat"):t.talkType==k.talkTypeChat?(a.default.publish("startChat"),a.default.publish("updateChatStaffInfo")):t.talkType==k.talkTypeRobot?a.default.publish("startRobot"):t.talkType==k.talkTypeLeave?a.default.publish("startLeave"):t.talkType==k.talkTypeQueue&&a.default.publish("startQueue")}),S=P("forwardHistoryMessage,forwardStaffInfo,forwardConfigMessage,",(function(){_=!1;var e=s.default.getMsgList(),t=!1;M(e.length>=10),a.default.publish("changeDom",{name:"#content",cls:"fading"}),e.forEach((function(e){!t&&0===e.isForward&&e.data.mt&&(t=!0,c.default.showMsg({id:"unreadMarkLine",mt:40,tm:(new Date).getTime(),content:'<div class="tc color1"><i class="hr-left"></i> <span>以下是未读消息</span> <i class="hr-right"></i></div>'})),(0,l.default)(e.data)})),setTimeout((function(e){a.default.publish("changeDom",{name:"#content",removeCls:"fading"})}),100)})),I={callNative:x,pageReady:function(){var e,t,i,n=s.default.getVisitorInfo(),o=n.visitorId;T=n.companyId,x("getChatMessage",m(m({},e={visitorId:o,companyId:T}),{},{selectCount:10})),x("pageReady"),x("getConfigMessage",e),x("getStaffInfo",e),(t=a.default.getQueryString("noConsole"))&&"1"==t&&(i=0,r.default.map((function(e){i+=e.delay||200,"evt"==e.type?setTimeout(e.value,i):setTimeout((function(){window.callEchatJsConnect(e)}),i)})))},init:function(){}},a.default.subscribe("loadHistory",(function(){var e=s.default.getMsgListFirst();e&&e.echatId&&(E=e.echatId,s.default.setDataByName("historyLastRowId",E),x("getChatMessage",{rowId:e.echatId,visitorId:s.default.getVisitorInfo().visitorId,companyId:T,selectCount:10}))})),a.default.subscribe("setExtraMessage",(function(e,t,i){if(i){var n,a=t.allExtra.h5Extra;for(n in a&&(i=Object.assign(a,i)),i)void 0!==i[n]&&s.default.updateHistoryMsgExt(t.mid||t.bridgeMsgId,n,i[n]);x("setExtraMessage",{companyId:T,visitorId:s.default.getVisitorInfo().visitorId,rowId:t.allExtra.echatId,bridgeMsgId:t.allExtra.bridgeMsgId,h5Extra:i})}})),a.default.subscriber.call(I,"connect"),I.setSub("handle"),I.subscribe("sendMessage",d.default.send);var N=I;t.default=N},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=[{functionName:"nativeReady",value:{echatTag:"lh"}},{functionName:"forwardHistoryMessage",value:[{companyId:521582,createTime:1622620210939,data:{bin:28,chatInfoType:1,companyId:521582,content:"你好，很高兴为您服务，请问有什么可以帮您的吗？",id:0,mid:60049,mst:3,mt:"647",rph:0,sendStatus:1,staffId:146,talkId:"2553",tm:1622620210664,type:5,vcs:1,visitorId:"sdk11889"},echatId:85,isForward:1,mid:60049,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622620283216,data:{bin:28,companyId:521582,content:"<p>发的嗷嗷</p>",id:80,jobId:27,media:1,mid:5493,mst:2,mt:"658",nonce:"LvFMQTDYAA",replyId:0,rph:0,sendStatus:1,signature:"66192C6FF6D1553D3A2EF9718A903314",staffId:146,talkId:"27",talkType:4,tm:1622620282954,token:"0c1d046a5e8848e3c5be6added666c41374a4a05",vcs:1,visitorId:"sdk11889"},echatId:86,h5Extra:{read:1},isForward:1,mid:5493,mt:"658",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622620330518,data:{bin:28,chatStaffId:146,chatStaffNickName:"aaa",companyId:521582,content:"http://chats.rainbowred.com/visitor/common/order.html?lan=zhcn&sdkVersion=21&url=https%3A%2F%2Fdevapi.rainbowred.com%2Fchatapi%2Fpaodm%2Fqd%3FcompanyId%3D521582%26visitorId%3Dsdk11889%26chatInfoType%3D9%26talkId%3D27%26tm%3D1622620282954%26token%3D66192C6FF6D1553D3A2EF9718A903314&token=0c1d046a5e8848e3c5be6added666c41374a4a05&nonce=LvFMQTDYAA&uploadFileSize=1073741824&fileUploadInfos=%5B1%2C2%2C3%5D&photo=http%3A%2F%2Fes.echatsoft.com%2Fres%2Fstyle%2Fe%2Fs3%2Fvisitor.png",id:0,mid:60088,mst:2,mt:"640",relateId:0,rph:0,sendStatus:1,staffId:146,staffNickName:"aaa",talkId:"2553",tm:1622620330283,vcs:1,visitorId:"sdk11889"},echatId:87,isForward:1,mid:60088,mt:"640",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622620631227,data:{bin:28,chatInfoType:1,companyId:521582,content:"您已长时间未响应客服对话，如果时间过长未响应，对话将结束!",id:0,mid:60090,mst:3,mt:"647",rph:0,sendStatus:1,staffId:0,talkId:"2553",tm:1622620630996,type:4,vcs:1,visitorId:"sdk11889"},echatId:88,isForward:1,mid:60090,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622620831109,data:{bin:28,chatInfoType:1,companyId:521582,content:"非常抱歉，因为很久没有收到您的消息，系统将要关闭会话窗了，我们非常重视您的业务，如仍需帮助，您可再次来访。感谢您的支持～",id:0,mid:60094,mst:3,mt:"647",rph:0,sendStatus:1,staffId:0,talkId:"2553",tm:1622620830890,type:4,vcs:1,visitorId:"sdk11889"},echatId:89,isForward:1,mid:60094,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622620831209,data:{bin:28,chatInfoType:1,companyId:521582,content:"endTxt",id:0,mid:60096,mst:3,mt:"647",rph:0,sendStatus:1,staffId:0,talkId:"2553",tm:1622620830934,type:3,vcs:1,visitorId:"sdk11889"},echatId:90,isForward:1,mid:60096,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622624365335,data:{bin:28,chatInfoType:1,companyId:521582,content:"您好，请问有什么可以帮助到您？",id:0,mid:60290,mst:3,mt:"647",rph:0,sendStatus:1,staffId:146,talkId:"2558",tm:1622624365003,type:2,vcs:1,visitorId:"sdk11889"},echatId:91,isForward:1,mid:60290,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622624365357,data:{bin:28,chatInfoType:1,companyId:521582,content:"你好，很高兴为您服务，请问有什么可以帮您的吗？",id:0,mid:60292,mst:3,mt:"647",rph:0,sendStatus:1,staffId:146,talkId:"2558",tm:1622624365032,type:5,vcs:1,visitorId:"sdk11889"},echatId:92,isForward:1,mid:60292,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622626104702,data:{bin:28,chatInfoType:1,companyId:521582,content:"endTxt",id:0,mid:60303,mst:3,mt:"647",rph:0,sendStatus:1,staffId:0,talkId:"2558",tm:1622626104449,type:3,vcs:1,visitorId:"sdk11889"},echatId:95,isForward:1,mid:60303,mt:"647",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"},{companyId:521582,createTime:1622626515262,data:{bin:28,companyId:521582,content:"<p>发送到发第三方</p>",id:86,jobId:29,media:1,mid:60324,mst:2,mt:"658",nonce:"Mu2Yx4YOKV",replyId:0,rph:0,sendStatus:3,signature:"7D626F954A0E0731636AED2A5CF33C95",staffId:146,talkId:"29",talkType:4,tm:1622626507904,token:"32137c2226f987a02fcd21726f53789d5c48b004",vcs:1,visitorId:"sdk11889"},echatId:101,isForward:1,mid:60324,mt:"658",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"}]},{functionName:"forwardChatStatus",value:{canChatNow:0,chatStatus:0,companyId:521582,createTime:1618916230912,echatId:2,hide:0,icon:"https://devfile.rainbowred.com/group1/M00/00/A1/rBAKCGBdQeiAUcETAAC3JrgD8sQ582.jpg",lastMessage:"您有新的消息",staffId:146,status:4,talkId:"2558",talkType:1,title:"多商户SDK平台",top:0,unreadCount:0,updateTime:1622626519817,visitorId:"sdk11889"}},{functionName:"forwardStaffInfo",value:[{companyId:521582,echatId:1,staffHead:"https://devfile.rainbowred.com/group1/M00/00/A2/rBAKCGB4Bc-AURgcAAAXY08_PQM852.png",staffId:"148",staffNickName:"🐂批plus",staffPhone:"18801103391"},{companyId:521582,echatId:2,staffId:"146",staffNickName:"aaa",staffPhone:"13281919243"}]},{functionName:"forwardConfigMessage",value:[{companyId:521582,createTime:1618916071535,data:{apiServerDomain:"devapi.rainbowred.com",bin:2,companyId:521582,companyLogo:"https://devfile.rainbowred.com/group1/M00/00/A1/rBAKCGBdQeiAUcETAAC3JrgD8sQ582.jpg",companyName:"多商户SDK平台",companyVersionType:2,country:"本地局域网",encryptVID:"5gA1BwF5gk8=",fileUploadInfos:[{fileBucketDomain:"http://tqn.rainbowred.com/",fileBucketHttpsDomain:"https://tqn.rainbowred.com/",fileUploadHttpsUrl:"https://up-z2.qbox.me/",fileUploadParam:"key=${qiniuKey},token=${token}",fileUploadUrl:"http://up-z2.qiniu.com/",uploadServiceType:1},{fileUploadHttpsUrl:"https://test-release-02.oss-cn-hangzhou.aliyuncs.com",fileUploadParam:"key=${aliyunKey},success_action_status=200,Content-Disposition=${Content-Disposition},OSSAccessKeyId=${ossAccessKeyId},policy=${policy},Signature=${signature},callback=${callback},x:filename=${x:filename}",fileUploadUrl:"http://test-release-02.oss-cn-hangzhou.aliyuncs.com",uploadServiceType:2},{fileBucketDomain:"http://devprofile.rainbowred.com",fileBucketHttpsDomain:"https://devprofile.rainbowred.com",fileUploadHttpsUrl:"https://dev.rainbowred.com/fup",fileUploadParam:"token=${token},uploadServiceType=${uploadServiceType}",fileUploadUrl:"http://dev.rainbowred.com/fup",uploadServiceType:3}],lan:"zh",localPushRule:'{"version":"1.1","rules":[{"content":{"value":"您的对话已接通"},"interval":0,"mst":3,"mt":"604","title":{"value":"${staffNickName}"},"msgType":256},{"content":{"value":"您的对话已结束"},"interval":0,"mst":3,"mt":"605","title":{"value":"会话消息"},"msgType":256},{"content":{"value":"${content,0,30,1}"},"interval":0,"mst":2,"mt":"640","title":{"value":"${staffNickName}"},"msgType":1},{"content":{"value":"[图片]"},"interval":0,"mst":2,"mt":"641","title":{"value":"${staffNickName}"},"msgType":16},{"content":{"value":"[文件]"},"interval":0,"mst":2,"mt":"642","title":{"value":"${staffNickName}"},"type":"0","msgType":8},{"content":{"value":"[语音]"},"interval":0,"mst":2,"mt":"642","title":{"value":"${staffNickName}"},"type":"1","msgType":64},{"content":{"value":"[视频]"},"interval":0,"mst":2,"mt":"642","title":{"value":"${staffNickName}"},"type":"2","msgType":32},{"content":{"value":"${content,0,30,1}"},"interval":0,"mst":3,"mt":"647","title":{"value":"${staffNickName}"},"type":"1,2,3,4,5,6","msgType":256},{"content":{"value":"等待接入会话，排队位置:${position}"},"interval":20000,"mst":3,"mt":"648","title":{"value":"会话消息"},"msgType":128},{"content":{"value":"[图片]"},"interval":0,"mst":2,"mt":"653","title":{"value":"${staffNickName}"},"msgType":16},{"content":{"value":"您有新的消息"},"interval":0,"mst":2,"mt":"655","title":{"value":"${staffNickName}"},"msgType":2},{"content":{"value":"请您对本次服务进行评价"},"interval":0,"mst":2,"mt":"673","title":{"value":"${staffNickName}"},"msgType":256},{"content":{"value":"[链接]"},"interval":0,"mst":2,"mt":"680","title":{"value":"${staffNickName}"},"unreadCount":1,"msgType":4},{"content":{"value":"[图文消息]"},"interval":0,"mst":3,"mt":"10011","title":{"value":"${staffNickName}"},"msgType":2},{"content":{"value":"客服回复了您的留言"},"interval":0,"mst":2,"mt":"675","title":{"value":"会话消息"},"msgType":256},{"content":{"value":"当前对话被转接给客服:${toStaffNickName}"},"interval":0,"mst":3,"mt":"10001","title":{"value":"会话消息"},"msgType":256},{"content":{"value":"您有新的消息"},"interval":0,"mst":0,"mt":"0","title":{"value":"会话消息"},"msgType":1},{"content":{"value":"${content,0,30,0}"},"interval":0,"mst":1,"et":"105","title":{"value":"访客"},"msgType":1},{"content":{"value":"${content,0,30,0}"},"interval":0,"mst":1,"et":"130","title":{"value":"访客"},"msgType":1},{"content":{"value":"[地理位置]"},"interval":0,"mst":1,"et":"127","title":{"value":"访客"},"msgType":512},{"content":{"value":"[图片]"},"interval":0,"mst":1,"et":"161","title":{"value":"访客"},"msgType":16},{"content":{"value":"[视频]"},"interval":0,"mst":1,"et":"162","title":{"value":"访客"},"msgType":64},{"content":{"value":"[语音]"},"interval":0,"mst":1,"et":"163","title":{"value":"访客"},"msgType":32},{"content":{"value":"[消息]"},"interval":0,"mst":1,"et":"0","title":{"value":"访客"},"msgType":1}]}',mid:60329,mst:3,mt:"600",platformId:521582,platformLogo:"https://devfile.rainbowred.com/group1/M00/00/A1/rBAKCGBdQeiAUcETAAC3JrgD8sQ582.jpg",platformName:"多商户SDK平台",rph:0,sdkHtmlForceUpdate:0,sdkHtmlVersion:"1.4.17.23",sessionId:"3u1kqo7xmm22o44g2yvt0499wfm",tm:1622626519390,uploadFileSize:1073741824,uploadFileType:"txt,doc,docx,xls,xlsx,amr,mp3,mp4,rar,zip,pdf,wav,log,mov,ppt,pptx,3gp,aac,ogg,webm,ts,3g2,3gpp,3gpp2,avi,m4v,mkv,ogg,webm,log,jpg,png,gif,jpeg,webp,bmp",vcs:0,visitorId:"sdk11889",visitorInputContentMaxLength:350,visitorSessionSize:0,visitorType:2},echatId:4,isForward:1,isPublic:1,mt:"600",updateTime:1622626519618,visitorId:"sdk11889"},{companyId:521582,createTime:1618916230919,data:{bin:2,canChatNow:0,chatStatus:0,companyId:521582,companyLogo:"https://devfile.rainbowred.com/group1/M00/00/A1/rBAKCGBdQeiAUcETAAC3JrgD8sQ582.jpg",companyName:"多商户SDK平台",echatSourceTagEnable:"1",enableEchatHyperlink:"1",enableEchatUrl:"1",enableInputAssociate:"1",enableSearchInTheSameScreen:"1",eventId:"W6CboVgs1JA=",media:"6",mid:60334,mst:3,mt:"649",notThroughStatus:0,robotConfigInfo:{categoryIds:"0",categoryType:"1",companyId:521582,enableAutoRecommend:"1",enableImagine:"1",enableRobot:"1",indexUpdateTime:"1618561370885",lan:"default",maxImaginations:"5",robotImg:"http://vs.rainbowred.com/res/imgs/robot.png",styleId:72,systemCategoryIds:"0"},robotExtInfo:{autograph:"学富五车，才高八斗",companyId:521582,lan:"default",nickName:"小洽",styleId:72},robotSdkChatBox:{chatBoxAdHeight:"0",chatBoxAdImgLinkFixed:"0",chatBoxAdImgLinkOpenType:"1",chatBoxAdPostEnable:"0",chatBoxStaffImgEnable:"1",chatBoxTitle:"Echat对话",chatEndBtnBackColor:"rgb(220, 211, 235)",chatEndBtnTxtColor:"#ffffff",chatLAdHtmlWidth:"0",chatLogoImg:"http://devs.rainbowred.com/res/style/e/s1/pc_logo.png",chatRAdHtmlWidth:"0",chatStaffBackColor:"rgb(157,208,231)",chatStaffTxtColor:"rgb(0,0,0)",chatThemeBackColor:"rgb(198,185,219)",chatThemeTxtColor:"#ffffff",chatVisitorBackColor:"rgb(239,178,178)",chatVisitorTxtColor:"rgb(0,0,0)",defaultStaffImg:"http://devs.rainbowred.com/res/imgs/staff.png",defaultVisitorImg:"http://devs.rainbowred.com/res/imgs/visitor.png",enableChatEndBtn:"1",enableCloseBtn:"1",enableQRCode:"1",lan:"default",qrCodeType:"1",styleId:"188",sysMsgBackground:"#e9e9e9",sysMsgFontColor:"#5d5d5d",sysMsgIcon:"http://devs.rainbowred.com/res/imgs/sysinfo.png"},robotWordsInfo:{accurateWords:"小洽为您推荐",autoOnlineWords:"抱歉，没能帮您及时解决问题，小洽已为您转接到人工客服",clickSolvedWords:'[{"content":"能够帮到您我很开心！如果有需要您可以继续提问哦^_^","sort":1}]',clickUnsolvedWords:'[{"content":"未能帮到您小洽感到非常抱歉！您可以尝试换个问法，或联系人工服务^_^","sort":1}]',commonQuesWords:"您是否遇到以下问题：",companyId:521582,enableCommonQuestions:"1",enableFedBack:"1",fedBackWords:"以上内容是否对您有帮助？",guideWords:"请您选择：",inputBoxWords:"请用一句话描述您的问题，尽可能简短哦^^",lan:"default",media:"6",noAnswerWords:'[{"content":"小洽正在努力学习中，力争早日能帮您解决问题；现在您也可以通过人工服务获取帮助，谢谢！","sort":1}]',nonTextWords:"以小洽的学识，您还是发文字吧^^",offlineButtonWords:"反馈问题",onlineButtonWords:"在线咨询",relateKnowledgeWords:"您可能还想问：",relateQuesWords:"我猜您关心的问题是：",robotApiErrorWords:"抱歉当前咨询人数过多，现在您也可以通过 [[#toChat:人工服务]]获取帮助，谢谢！",robotRpcErrorWords:"系统繁忙，请稍后再试",solvedBackColor:"rgb(204,204,204)",solvedButton:"http://vs.rainbowred.com/res/imgs/solved.png",solvedSelectColor:"rgb(255,167,38)",solvedWords:"是",stopWords:"妈妈告诉不能说xx，您重新问吧！",styleId:72,toHumanWords:"如您的问题未被解决，可进入",unsolvedBackColor:"rgb(204,204,204)",unsolvedButton:"http://vs.rainbowred.com/res/imgs/unsolved.png",unsolvedSelectColor:"rgb(255,167,38)",unsolvedWords:"否",welcomeWords:"宝宝，我来了！请详细描述你要求助的问题，让我更好的帮助你哦！"},routeId:"39",rph:0,sdkVisitorRobotConfig:{autoMaxNotKnowTimes:"3",autoMaxUnsolveTimes:"3",autoSwitchKeywords:"转人工",companyId:521582,enableAutoKeywords:"1",enableAutoMaxNotKnow:"1",enableAutoMaxUnsolve:"1",enableAutoSwitch:"1",enableLeaveBtnWhenStaffOffline:"0",enableManualKeywords:"1",enableManualMaxNotKnow:"1",enableManualMaxUnsolve:"1",enableManualSwitch:"1",enableSwitchBtnWhenStaffOnline:"0",lan:"default",manualMaxNotKnowTimes:"3",manualMaxUnsolveTimes:"3",manualSwitchKeywords:"转人工提示",priority:"2",styleId:72},status:4,styleId:"204",tm:1622626519571,unreadMsgNumber:0,vcs:0,visitorId:"sdk11889",webVisitorRobotConfig:{autoMaxNotKnowTimes:"3",autoMaxUnsolveTimes:"3",autoSwitchKeywords:"转人工",companyId:521582,enableAutoKeywords:"1",enableAutoMaxNotKnow:"1",enableAutoMaxUnsolve:"1",enableAutoSwitch:"1",enableLeaveBtnWhenStaffOffline:"0",enableManualKeywords:"1",enableManualMaxNotKnow:"1",enableManualMaxUnsolve:"1",enableManualSwitch:"1",enableSwitchBtnWhenStaffOnline:"0",lan:"default",manualMaxNotKnowTimes:"3",manualMaxUnsolveTimes:"3",manualSwitchKeywords:"转人工提示",priority:"2",styleId:72},jobWindowInfo:{commitSuccessHint:"工单已提交成功",configuration:[{configDesc:"标题",configName:"title",configRequired:"1",configSort:"1",wordDesc:"请填写"},{configDesc:"内容",configName:"content",configRequired:"1",configSort:"2",wordDesc:"请填写"},{configDesc:"姓名",configName:"name",configRequired:"1",configSort:"3",wordDesc:"请填写"},{configDesc:"性别",configName:"gender",configRequired:"1",configSort:"4",wordDesc:"请选择"}],description:"默认描述",fieldSettings:[{enable:1,field:"title",fieldId:1087,isSystem:1,label:"标题",settings:[],type:1},{enable:1,field:"content",fieldId:1088,isSystem:1,label:"内容",settings:[],type:2},{enable:1,field:"name",fieldId:1068,isSystem:1,label:"姓名",settings:[],type:1},{enable:1,field:"gender",fieldId:1079,isSystem:1,label:"性别",lan:"default",settings:[{configs:[{item:"男",sort:1,value:"1"},{item:"女",sort:2,value:"2"}],lan:"default"}],type:4}],jobQRCodeEnable:"1",jobTemplateId:57,lan:"default",nonce:"saTcaG7WVR",styleId:"204",title:"默认标题",token:"b0789df5c2d115f27af2a034024d86cc57545938"},sdkChatBoxInfo:{busyNotAllowSendStatus:"1",busyNotAllowTips:"当前客服忙碌，请等待客服接入后发送聊天消息。",chatAd1Html:"http://chats.rainbowred.com/res/style/e/s1/chat_right.png",chatAdWidth:"349",chatBoxAdHeight:"40",chatBoxAdImgLinkFixed:"1",chatBoxAdImgLinkOpenType:"1",chatBoxInnerAdImg:"https://devfile.rainbowred.com/group1/M00/00/A2/rBAKCGB5UkqAJH40AAAVZWq_QqY898.png",chatBoxInnerAdImgLinkOpenType:"2",chatBoxInnerAdImgLinkUrl:"http://www.baidu.com",chatBoxInnerAdType:"3",chatBoxRightAdImg:"http://chats.rainbowred.com/res/style/e/s1/chat_right.png",chatBoxRightAdType:"3",chatBoxStaffImgEnable:"1",chatBoxTitle:"Echat对话",chatColor:"rgb(86,131,26)",chatEndBtnBackColor:"#484a4a",chatEndBtnTxtColor:"#3bc47a",chatLogoImg:"http://vs.rainbowred.com/res/style/e/s1/pc_logo.png",chatStaffBackColor:"rgb(174,207,175)",chatStaffTxtColor:"rgb(220,244,251)",chatThemeBackColor:"#ffa726",chatThemeTxtColor:"rgb(241,214,244)",chatVisitorBackColor:"rgb(190,164,238)",chatVisitorTxtColor:"rgb(129,64,64)",defaultStaffImg:"http://vs.rainbowred.com/res/imgs/staff.png",defaultVisitorImg:"http://es.echatsoft.com/res/style/e/s3/visitor.png",enableChatEndBtn:"1",enableQRCode:"1",evaluateThemeColor:"rgb(24,56,122)",qrCodeType:"1",styleId:"204",sysMsgBackground:"rgb(163,91,91)",sysMsgFontColor:"rgb(250,243,243)",sysMsgIcon:"http://vs.rainbowred.com/res/imgs/sysinfo.png",toolAlbum:"1",toolCamera:"1",toolEmoji:"1",toolFile:"1",toolImg:"1",toolLocation:"1",toolSatisfaction:"1",toolScreenshot:"1",toolTelephone:"1",toolVoice:"1",type:"6",windowTextColor:"#888888",windowThemeBackColor:"#eeeeee"},queueTxt:"亲，目前客服全忙，您正排在队列的第${waitcount}位，请稍候……",sdkEntranceInfo:{buttonBackgroundColor:"rgb(59, 196, 122)",captChaEnable:"0",captChaName:"chatWindow",captChaType:"0",enableOffline:"0",enableOnline:"1",entranceLevel:1,entryCanClose:"0",fieldSettings:[{enable:1,field:"name",fieldId:1068,isSystem:1,label:"姓名",settings:[],type:1},{enable:1,field:"phone",fieldId:1070,isSystem:1,label:"手机",settings:[],type:1},{enable:1,field:"email",fieldId:1072,isSystem:1,label:"邮箱",settings:[],type:1}],lan:"default",offlineButtonBackgroundColor:"rgb(59, 196, 122)",offlineNotVipItemSize:0,offlineStartType:"0",offlineVipItemSize:0,onlineNotVipItemSize:2,onlineVipItemSize:0,requireCondition:"0",styleId:"204",type:"6",upgradeOfflineNotVipItemSize:4,upgradeOfflineVipItemSize:0,upgradeOnlineNotVipItemSize:3,upgradeOnlineVipItemSize:0,upgradeVisitorInfoConfiguration:[{configDesc:"姓名",configInline:"1",configName:"name",configRequired:"0",configSort:"0",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"电话",configInline:"1",configName:"phone",configRequired:"0",configSort:"1",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"邮箱",configInline:"1",configName:"email",configRequired:"0",configSort:"2",configWebVipVisitor:"0",configWebVisitor:"1"}],upgradeVisitorInfoSubmitTxt:"确定",upgradeWelcomeWord:"为了给您提供更优质的服务，请先完善以下信息",version:1,visitorInfoBackImg:"http://vs.rainbowred.com/res/static/config/entrance_pc.png",visitorInfoCloseImg:"http://vs.rainbowred.com/res/imgs/close.png",visitorInfoClosePos:"right:5px;top:5px;",visitorInfoConfiguration:[{configDesc:"姓名",configInline:"0",configName:"name",configRequired:"0",configSort:"0",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"昵称",configInline:"0",configName:"nickName",configRequired:"0",configSort:"1",configWebVipVisitor:"0",configWebVisitor:"1"}],visitorInfoEnable:"0",visitorInfoInputColor:"#888888",visitorInfoLabelColor:"#888888",visitorInfoSubmitTxt:"确定",welcomeWord:"为了给您提供更优质的服务，请先完善以下信息",welcomeWordPos:"top:0;left:24px;right:auto;bottom:auto"},sdkEvaluateInfo:{bestConfiguration:[{configDesc:"项目1",configName:"subItem1",configSort:"0"},{configDesc:"项目2",configName:"subItem2",configSort:"1"}],bestDesc:"非常满意",bestDescDefault:"非常满意",bestEnable:"1",bestSelected:"http://devs.rainbowred.com/config/res/img/evaluate/bestSelected.png",bestUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/bestUnSelected.png",betterConfiguration:[{configDesc:"项目19",configName:"subItem19",configSort:"0"}],betterDesc:"满意",betterDescDefault:"满意",betterEnable:"1",betterSelected:"http://devs.rainbowred.com/config/res/img/evaluate/betterSelected.png",betterUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/betterUnSelected.png",commonConfiguration:[{configDesc:"项目13",configName:"subItem13",configSort:"0"}],commonDesc:"一般",commonDescDefault:"一般",commonEnable:"1",commonSelected:"http://devs.rainbowred.com/config/res/img/evaluate/commonSelected.png",commonUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/commonUnSelected.png",enable:"1",enableRepeatedEvaluate:"1",enableRepeatedEvaluateTimeLimit:"0",enableValidEvaluateTime:"1",evaluatePicURL:"http://devs.rainbowred.com/weixin/evaluate/weChatEval.html",evaluateType:"0",lan:"default",styleId:"204",type:"6",validEvaluateTime:"120",validRepeatedEvaluateTime:"30",worseDesc:"不满意",worseDescDefault:"不满意",worseEnable:"1",worseSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worseSelected.png",worseUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worseUnSelected.png",worstDesc:"非常不满意",worstDescDefault:"非常不满意",worstEnable:"1",worstSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worstSelected.png",worstUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worstUnSelected.png"},sdkOfflineBoxInfo:{disableTips:"亲；客服MM已下班了哦~~ 我们的上班时间是（9:00 - 18:00)；请在上班时间咨询，感谢您的理解。",enable:"1",styleId:"204",thirdPartyUrl:"http://.baidu.com",type:"6"}},echatId:5,isForward:1,isPublic:0,mt:"649",updateTime:1622626519821,visitorId:"sdk11889"},{companyId:521582,createTime:1619333108713,data:{bin:2,companyId:521582,mid:60295,mst:3,mt:"672",nonce:"8yN8LX5V",reChatTag:"qx+ueeAKY/St6S/D66goVg==",rph:0,talkId:"2558",tm:1622624365058,vcs:0},echatId:6,isForward:1,isPublic:0,mt:"672",updateTime:1622624365377,visitorId:"sdk11889"}]},{functionName:"forwardChatMessage",value:[{companyId:521582,createTime:1622626538605,data:{bin:8,companyId:521582,country:"本地局域网",keywordType:"0",mid:60337,mst:3,mt:"671",rph:0,tm:1622626538416,vcs:0,visitorId:"sdk11889"},echatId:0,isForward:0,mid:60337,mt:"671",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"}]},{functionName:"forwardConfigMessage",value:[{companyId:521582,createTime:1618916230919,data:{bin:2,canChatNow:1,chatStatus:0,companyId:521582,companyLogo:"https://devfile.rainbowred.com/group1/M00/00/A1/rBAKCGBdQeiAUcETAAC3JrgD8sQ582.jpg",companyName:"多商户SDK平台",echatSourceTagEnable:"1",enableEchatHyperlink:"1",enableEchatUrl:"1",enableInputAssociate:"1",enableSearchInTheSameScreen:"1",eventId:"W6CboVgs1JA=",media:"6",mid:60338,mst:3,mt:"649",notThroughStatus:0,robotConfigInfo:{categoryIds:"0",categoryType:"1",companyId:521582,enableAutoRecommend:"1",enableImagine:"1",enableRobot:"1",indexUpdateTime:"1618561370885",lan:"default",maxImaginations:"5",robotImg:"http://vs.rainbowred.com/res/imgs/robot.png",styleId:72,systemCategoryIds:"0"},robotExtInfo:{autograph:"学富五车，才高八斗",companyId:521582,lan:"default",nickName:"小洽",styleId:72},robotSdkChatBox:{chatBoxAdHeight:"0",chatBoxAdImgLinkFixed:"0",chatBoxAdImgLinkOpenType:"1",chatBoxAdPostEnable:"0",chatBoxStaffImgEnable:"1",chatBoxTitle:"Echat对话",chatEndBtnBackColor:"rgb(220, 211, 235)",chatEndBtnTxtColor:"#ffffff",chatLAdHtmlWidth:"0",chatLogoImg:"http://devs.rainbowred.com/res/style/e/s1/pc_logo.png",chatRAdHtmlWidth:"0",chatStaffBackColor:"rgb(157,208,231)",chatStaffTxtColor:"rgb(0,0,0)",chatThemeBackColor:"rgb(198,185,219)",chatThemeTxtColor:"#ffffff",chatVisitorBackColor:"rgb(239,178,178)",chatVisitorTxtColor:"rgb(0,0,0)",defaultStaffImg:"http://devs.rainbowred.com/res/imgs/staff.png",defaultVisitorImg:"http://devs.rainbowred.com/res/imgs/visitor.png",enableChatEndBtn:"1",enableCloseBtn:"1",enableQRCode:"1",lan:"default",qrCodeType:"1",styleId:"188",sysMsgBackground:"#e9e9e9",sysMsgFontColor:"#5d5d5d",sysMsgIcon:"http://devs.rainbowred.com/res/imgs/sysinfo.png"},robotWordsInfo:{accurateWords:"小洽为您推荐",autoOnlineWords:"抱歉，没能帮您及时解决问题，小洽已为您转接到人工客服",clickSolvedWords:'[{"content":"能够帮到您我很开心！如果有需要您可以继续提问哦^_^","sort":1}]',clickUnsolvedWords:'[{"content":"未能帮到您小洽感到非常抱歉！您可以尝试换个问法，或联系人工服务^_^","sort":1}]',commonQuesWords:"您是否遇到以下问题：",companyId:521582,enableCommonQuestions:"1",enableFedBack:"1",fedBackWords:"以上内容是否对您有帮助？",guideWords:"请您选择：",inputBoxWords:"请用一句话描述您的问题，尽可能简短哦^^",lan:"default",media:"6",noAnswerWords:'[{"content":"小洽正在努力学习中，力争早日能帮您解决问题；现在您也可以通过人工服务获取帮助，谢谢！","sort":1}]',nonTextWords:"以小洽的学识，您还是发文字吧^^",offlineButtonWords:"反馈问题",onlineButtonWords:"在线咨询",relateKnowledgeWords:"您可能还想问：",relateQuesWords:"我猜您关心的问题是：",robotApiErrorWords:"抱歉当前咨询人数过多，现在您也可以通过 [[#toChat:人工服务]]获取帮助，谢谢！",robotRpcErrorWords:"系统繁忙，请稍后再试",solvedBackColor:"rgb(204,204,204)",solvedButton:"http://vs.rainbowred.com/res/imgs/solved.png",solvedSelectColor:"rgb(255,167,38)",solvedWords:"是",stopWords:"妈妈告诉不能说xx，您重新问吧！",styleId:72,toHumanWords:"如您的问题未被解决，可进入",unsolvedBackColor:"rgb(204,204,204)",unsolvedButton:"http://vs.rainbowred.com/res/imgs/unsolved.png",unsolvedSelectColor:"rgb(255,167,38)",unsolvedWords:"否",welcomeWords:"宝宝，我来了！请详细描述你要求助的问题，让我更好的帮助你哦！"},routeId:"39",rph:0,sdkVisitorRobotConfig:{autoMaxNotKnowTimes:"3",autoMaxUnsolveTimes:"3",autoSwitchKeywords:"转人工",companyId:521582,enableAutoKeywords:"1",enableAutoMaxNotKnow:"1",enableAutoMaxUnsolve:"1",enableAutoSwitch:"1",enableLeaveBtnWhenStaffOffline:"0",enableManualKeywords:"1",enableManualMaxNotKnow:"1",enableManualMaxUnsolve:"1",enableManualSwitch:"1",enableSwitchBtnWhenStaffOnline:"0",lan:"default",manualMaxNotKnowTimes:"3",manualMaxUnsolveTimes:"3",manualSwitchKeywords:"转人工提示",priority:"2",styleId:72},status:4,styleId:"204",tm:1622626538418,unreadMsgNumber:1,vcs:0,visitorId:"sdk11889",webVisitorRobotConfig:{autoMaxNotKnowTimes:"3",autoMaxUnsolveTimes:"3",autoSwitchKeywords:"转人工",companyId:521582,enableAutoKeywords:"1",enableAutoMaxNotKnow:"1",enableAutoMaxUnsolve:"1",enableAutoSwitch:"1",enableLeaveBtnWhenStaffOffline:"0",enableManualKeywords:"1",enableManualMaxNotKnow:"1",enableManualMaxUnsolve:"1",enableManualSwitch:"1",enableSwitchBtnWhenStaffOnline:"0",lan:"default",manualMaxNotKnowTimes:"3",manualMaxUnsolveTimes:"3",manualSwitchKeywords:"转人工提示",priority:"2",styleId:72},jobWindowInfo:{commitSuccessHint:"工单已提交成功",configuration:[{configDesc:"标题",configName:"title",configRequired:"1",configSort:"1",wordDesc:"请填写"},{configDesc:"内容",configName:"content",configRequired:"1",configSort:"2",wordDesc:"请填写"},{configDesc:"姓名",configName:"name",configRequired:"1",configSort:"3",wordDesc:"请填写"},{configDesc:"性别",configName:"gender",configRequired:"1",configSort:"4",wordDesc:"请选择"}],description:"默认描述",fieldSettings:[{enable:1,field:"title",fieldId:1087,isSystem:1,label:"标题",settings:[],type:1},{enable:1,field:"content",fieldId:1088,isSystem:1,label:"内容",settings:[],type:2},{enable:1,field:"name",fieldId:1068,isSystem:1,label:"姓名",settings:[],type:1},{enable:1,field:"gender",fieldId:1079,isSystem:1,label:"性别",lan:"default",settings:[{configs:[{item:"男",sort:1,value:"1"},{item:"女",sort:2,value:"2"}],lan:"default"}],type:4}],jobQRCodeEnable:"1",jobTemplateId:57,lan:"default",nonce:"b6LFSGgcCh",styleId:"204",title:"默认标题",token:"9f85bc378a737d2c5c5ad83b4effa918558c3d64"},sdkChatBoxInfo:{busyNotAllowSendStatus:"1",busyNotAllowTips:"当前客服忙碌，请等待客服接入后发送聊天消息。",chatAd1Html:"http://chats.rainbowred.com/res/style/e/s1/chat_right.png",chatAdWidth:"349",chatBoxAdHeight:"40",chatBoxAdImgLinkFixed:"1",chatBoxAdImgLinkOpenType:"1",chatBoxInnerAdImg:"https://devfile.rainbowred.com/group1/M00/00/A2/rBAKCGB5UkqAJH40AAAVZWq_QqY898.png",chatBoxInnerAdImgLinkOpenType:"2",chatBoxInnerAdImgLinkUrl:"http://www.baidu.com",chatBoxInnerAdType:"3",chatBoxRightAdImg:"http://chats.rainbowred.com/res/style/e/s1/chat_right.png",chatBoxRightAdType:"3",chatBoxStaffImgEnable:"1",chatBoxTitle:"Echat对话",chatColor:"rgb(86,131,26)",chatEndBtnBackColor:"#484a4a",chatEndBtnTxtColor:"#3bc47a",chatLogoImg:"http://vs.rainbowred.com/res/style/e/s1/pc_logo.png",chatStaffBackColor:"rgb(174,207,175)",chatStaffTxtColor:"rgb(220,244,251)",chatThemeBackColor:"#ffa726",chatThemeTxtColor:"rgb(241,214,244)",chatVisitorBackColor:"rgb(190,164,238)",chatVisitorTxtColor:"rgb(129,64,64)",defaultStaffImg:"http://vs.rainbowred.com/res/imgs/staff.png",defaultVisitorImg:"http://es.echatsoft.com/res/style/e/s3/visitor.png",enableChatEndBtn:"1",enableQRCode:"1",evaluateThemeColor:"rgb(24,56,122)",qrCodeType:"1",styleId:"204",sysMsgBackground:"rgb(163,91,91)",sysMsgFontColor:"rgb(250,243,243)",sysMsgIcon:"http://vs.rainbowred.com/res/imgs/sysinfo.png",toolAlbum:"1",toolCamera:"1",toolEmoji:"1",toolFile:"1",toolImg:"1",toolLocation:"1",toolSatisfaction:"1",toolScreenshot:"1",toolTelephone:"1",toolVoice:"1",type:"6",windowTextColor:"#888888",windowThemeBackColor:"#eeeeee"},queueTxt:"亲，目前客服全忙，您正排在队列的第${waitcount}位，请稍候……",sdkEntranceInfo:{buttonBackgroundColor:"rgb(59, 196, 122)",captChaEnable:"0",captChaName:"chatWindow",captChaType:"0",enableOffline:"0",enableOnline:"1",entranceLevel:1,entryCanClose:"0",fieldSettings:[{enable:1,field:"name",fieldId:1068,isSystem:1,label:"姓名",settings:[],type:1},{enable:1,field:"phone",fieldId:1070,isSystem:1,label:"手机",settings:[],type:1},{enable:1,field:"email",fieldId:1072,isSystem:1,label:"邮箱",settings:[],type:1}],lan:"default",offlineButtonBackgroundColor:"rgb(59, 196, 122)",offlineNotVipItemSize:0,offlineStartType:"0",offlineVipItemSize:0,onlineNotVipItemSize:2,onlineVipItemSize:0,requireCondition:"0",styleId:"204",type:"6",upgradeOfflineNotVipItemSize:4,upgradeOfflineVipItemSize:0,upgradeOnlineNotVipItemSize:3,upgradeOnlineVipItemSize:0,upgradeVisitorInfoConfiguration:[{configDesc:"姓名",configInline:"1",configName:"name",configRequired:"0",configSort:"0",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"电话",configInline:"1",configName:"phone",configRequired:"0",configSort:"1",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"邮箱",configInline:"1",configName:"email",configRequired:"0",configSort:"2",configWebVipVisitor:"0",configWebVisitor:"1"}],upgradeVisitorInfoSubmitTxt:"确定",upgradeWelcomeWord:"为了给您提供更优质的服务，请先完善以下信息",version:1,visitorInfoBackImg:"http://vs.rainbowred.com/res/static/config/entrance_pc.png",visitorInfoCloseImg:"http://vs.rainbowred.com/res/imgs/close.png",visitorInfoClosePos:"right:5px;top:5px;",visitorInfoConfiguration:[{configDesc:"姓名",configInline:"0",configName:"name",configRequired:"0",configSort:"0",configWebVipVisitor:"0",configWebVisitor:"1"},{configDesc:"昵称",configInline:"0",configName:"nickName",configRequired:"0",configSort:"1",configWebVipVisitor:"0",configWebVisitor:"1"}],visitorInfoEnable:"0",visitorInfoInputColor:"#888888",visitorInfoLabelColor:"#888888",visitorInfoSubmitTxt:"确定",welcomeWord:"为了给您提供更优质的服务，请先完善以下信息",welcomeWordPos:"top:0;left:24px;right:auto;bottom:auto"},sdkEvaluateInfo:{bestConfiguration:[{configDesc:"项目1",configName:"subItem1",configSort:"0"},{configDesc:"项目2",configName:"subItem2",configSort:"1"}],bestDesc:"非常满意",bestDescDefault:"非常满意",bestEnable:"1",bestSelected:"http://devs.rainbowred.com/config/res/img/evaluate/bestSelected.png",bestUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/bestUnSelected.png",betterConfiguration:[{configDesc:"项目19",configName:"subItem19",configSort:"0"}],betterDesc:"满意",betterDescDefault:"满意",betterEnable:"1",betterSelected:"http://devs.rainbowred.com/config/res/img/evaluate/betterSelected.png",betterUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/betterUnSelected.png",commonConfiguration:[{configDesc:"项目13",configName:"subItem13",configSort:"0"}],commonDesc:"一般",commonDescDefault:"一般",commonEnable:"1",commonSelected:"http://devs.rainbowred.com/config/res/img/evaluate/commonSelected.png",commonUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/commonUnSelected.png",enable:"1",enableRepeatedEvaluate:"1",enableRepeatedEvaluateTimeLimit:"0",enableValidEvaluateTime:"1",evaluatePicURL:"http://devs.rainbowred.com/weixin/evaluate/weChatEval.html",evaluateType:"0",lan:"default",styleId:"204",type:"6",validEvaluateTime:"120",validRepeatedEvaluateTime:"30",worseDesc:"不满意",worseDescDefault:"不满意",worseEnable:"1",worseSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worseSelected.png",worseUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worseUnSelected.png",worstDesc:"非常不满意",worstDescDefault:"非常不满意",worstEnable:"1",worstSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worstSelected.png",worstUnSelected:"http://devs.rainbowred.com/config/res/img/evaluate/worstUnSelected.png"},sdkOfflineBoxInfo:{disableTips:"亲；客服MM已下班了哦~~ 我们的上班时间是（9:00 - 18:00)；请在上班时间咨询，感谢您的理解。",enable:"1",styleId:"204",thirdPartyUrl:"http://.baidu.com",type:"6"}},echatId:5,isForward:1,isPublic:0,mt:"649",updateTime:1622626538636,visitorId:"sdk11889"}]},{functionName:"forwardChatMessage",value:[{companyId:521582,createTime:1622626538649,data:{bin:28,companyId:521582,content:"<p>阿斯顿发送到</p>",id:88,jobId:29,media:1,mid:60336,mst:2,mt:"658",nonce:"StFQOhBTyx",replyId:0,rph:0,sendStatus:3,signature:"877927292FE6A6187BFCC8678ABF8F90",staffId:146,talkId:"29",talkType:4,tm:1622626533585,token:"53507e047ce78f22a58f2f602931cefc71115a82",vcs:1,visitorId:"sdk11889"},echatId:102,isForward:0,mid:60336,mt:"658",sendStatus:0,show:1,updateTime:0,visitorId:"sdk11889"}]}];t.default=n},function(e,t,i){"use strict";i(65),i(9),i(66),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(0)),a=r(i(20)),o=r(i(3)),s=r(i(40));function r(e){return e&&e.__esModule?e:{default:e}}var l=function(e){if(!e)return!1;var t,i,r=!1,l=parseInt(e.mt||e.et);switch(l){case 600:break;case 605:2==o.default.getStatusByKey("chatStatus")&&(o.default.setStatusByKey("visitorClose",1==e.closeRease),n.default.publish("chatEnded",e),o.default.setStatusByKey("chatStatus",0));break;case 610:var c=e.canChatNow,d=e.status,u=e.chatStatus;o.default.setStatusData({canChatNow:c,status:d,chatStatus:u});break;case 105:case 130:case 161:case 641:case 642:case 647:case 658:case 655:case 680:case 688:case 959:case 10011:r=!0;break;case 864:case 865:case 866:r=!0,0==e.isForward&&(t=o.default.getStatusData()).talkId&&e.talkId==t.talkId&&2===t.chatStatus&&t.talkType==n.default.Constants.talkTypeChat&&n.default.publish("_addSendMsgNum",e);break;case 640:r=!0,0==e.isForward&&n.default.publish("clearMsgTyping",e);break;case 644:n.default.publish("getMsgTyping",e);break;case 648:2==(t=o.default.getStatusData()).chatStatus&&t.talkId==e.talkId&&n.default.publish("getPosMsg",e);break;case 646:break;case 649:n.default.publish("waitingChat",e);break;case 650:0==e.isForward&&(o.default.setStatusByKey("captChaToken",e.captChaToken),n.default.publish("refreshCode",e));break;case 651:break;case 652:console.log(e);break;case 670:n.default.publish("entryCallback",e);break;case 672:case 696:o.default.setVisitorInfo(e);break;case 673:e.talkId==o.default.getStatusByKey("talkId")&&0==e.isForward&&n.default.publish("inviteSatisfy",e);break;case 677:case 678:t={talkType:a.default.talkTypeLeave,chatStatus:2,staffId:"",talkId:e.talkId},o.default.setStatusData(t),n.default.publish("startLeave",e);break;case 697:t={talkType:a.default.talkTypeQueue,chatStatus:2,staffId:"",talkId:e.talkId},o.default.setStatusData(t),n.default.publish("startQueue",e);break;case 603:o.default.setStatusData({status:e.status});break;case 604:case 679:!function(e,t){var i,s=o.default.getStatusData(),r={talkId:e.talkId},l=2==s.chatStatus&&s.talkType==a.default.talkTypeChat,c=e.staffNickName,d=e.staffId,u=e.staffDetailInfo||{},f=u.staffHead,h=u.staffPhone;l||(r.talkType=a.default.talkTypeChat,r.chatStatus=2),e.staffId&&(r.staffId=e.staffId),o.default.setStatusData(r),l||n.default.publish("startChat",e),e.staffId&&e.staffDetailInfo&&((i={})[d]={staffNickName:c,staffHead:f,staffPhone:h,staffId:d},o.default.setStaffInfo(i)),604==t&&n.default.publish("updateChatStaffInfo")}(e,l);break;case 687:case 691:t={talkType:a.default.talkTypeRobot,chatStatus:2,staffId:"",talkId:e.talkId},o.default.setStatusData(t),n.default.publish("startRobot",e);break;case 684:case 685:n.default.publish("getNewUnreadMsgCount",e);break;case 689:i=o.default.getStatusByKey("staffId"),e.staffInfoList&&(e.staffInfoList.forEach((function(e){var t=e.staffId,a={};t==i&&n.default.publish("updateChatStaffInfo"),a[t]=e,o.default.setStaffInfo(a)})),s.default.updateMsgStaff());break;case 695:o.default.setConfig("config695",e),n.default.publish("displayRouter",e);break;case 876:n.default.publish("overLength",e);break;case 923:!function(e){var t=e.newVisitorId,i=e.oldVisitorId;n.default.publish("updateVisitorInfo",{visitorId:t,photo:e.metaDataInfo.photo}),i!=t&&o.default.setVisitorInfo({oldVisitorId:e.oldVisitorId,visitorId:t})}(e);break;case 928:break;case 12001:r=!0,n.default.publish("getMsgRobot",e);break;case 10001:r=!0,n.default.publish("updateChatStaffInfo");break;case 10021:n.default.changeToPlatform(e);break;default:r=!0,console.log("没有处理的消息，目前走了一下显示逻辑",e)}return r&&s.default.showMsg(e),r};t.default=l},function(e,t,i){"use strict";i(60),i(11),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=s(i(29)),a=s(i(0)),o=s(i(3));function s(e){return e&&e.__esModule?e:{default:e}}var r,l,c=n.default.callEchatNativeConnect,d=[],u=[],f={105:1,130:1,127:1},h={104:1,132:1},p={},m=0,g=(new Date).getTime()+"";r=function(e){var t,i,n=e?u:d;if(n.length>0)for(i=0;i<n.length&&(t=n[i])&&(t.sending||(t.sending=!0,l(t.data,t.cb,t,e)));i++);},l=function(e,t,i,n){var a=n?u:d,o=i?i.time:(new Date).getTime(),s=i||{data:e,cb:t,time:o,sending:!0};function l(){for(var e=a.length-1;e>-1;e--)if(a[e]&&a[e].time==o){a.splice(e,1);break}}return!i&&!h[e.et]&&a.push(s),function(e,t){var i=e.bridgeMsgId,n=0;i?n=1:i=g+ ++m,e.bridgeMsgId=i,e.isResend=n,c("sendMessage",e),p[e.bridgeMsgId]=t}(e,(function(e){t&&t.apply(this,arguments),e.successful?(l(),r(!0)):s.sending=!1})),!0},a.default.subscribe("clearSendingMsg",(function(e,t){var i,n,a=u;if(a.length>0){for(n=0;n<a.length;n++)(i=a[n]).cb&&i.cb({successful:!1,failure:{type:"new session"},autoResend:!1});a.length=0}}));var v={flashMsg:r,send:function(e,t,i){var n=o.default.getVisitorInfo();t.companyId=n.companyId,t.visitorId=n.visitorId,0!==t.isSave&&(t.isSave=f[t.et]?1:0),l(t,i,null,!0)},callback:function(e){var t=e.bridgeMsgId;p[t]&&p[t](e)}};t.default=v},function(e,t,i){"use strict";i(11),i(9),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(i(29)),a=r(i(0)),o=i(10),s=r(i(3));function r(e){return e&&e.__esModule?e:{default:e}}var l,c=n.default.callEchatNative;l={closeChat:function(e){a.default.publish("visitorClose",1==e?1:0)},switchSoundTip:function(e){},triggerFile:function(e){a.default.publish("triggerFile",e)},voice:function(e){a.default.publish("recordEvent",e)},uploadType:function(e){if(e){var t=2,i=document.getElementById("uploadInput");"record"==e?t=4:"gallery"==e?t=2:"voice"==e&&(t=3),$(i).attr("filetype",t)}},location:function(e){var t=e.provinceName,i=void 0===t?"":t,n=e.cityName,o=void 0===n?"":n,s=e.adName,r=void 0===s?"":s,l=e.address,c=void 0===l?"":l,d={id:(new Date).getTime(),et:127,locationX:e.latitude,locationY:e.longitude,scale:parseInt(e.zoom||15),label:e.title,address:i+o+r+c};a.default.triggerEventOnPoint("_sendMsgLocation",d)},keyboardHeight:function(e){a.default.publish("keyboardHeight")},networkChangeStatus:function(e){e&&0==e.networkType?(0,o.networkStatusChange)(!1):s.default.getDataByName("netConnected")||c("checkNetworkStatus",{pingIp:void 0,url:void 0})},networkStatus:function(e){var t=e.isConnected,i=e.error,n=s.default.getDataByName("netConnected");if(1==i)return console.log("检查网络传参数错误");2==t&&((0,o.networkStatusChange)(!0),!n&&c("checkWebsocketStatus"))},websocketStatus:function(e){var t=e.type;s.default.setDataByName("websocketStatus",t),t==a.default.Constants.websocketConnected&&(0,o.networkStatusChange)(!0)},callbackOpenFile:function(e){"0"==e.status&&a.default.showTip("文件打开失败文件")},downloadProgress:function(e){a.default.publish("downloadEvent",e)}},n.default.initNativeAPI(l,"callEchatJs"),a.default.subscribe("__chatStatus",(function(e,t){})),a.default.subscribe("__evaluate",(function(e,t){c("visitorEvaluate",t)})),a.default.subscribe("_closeWin",(function(e,t){s.default.getStatusByKey("visitorClose")&&c("destoryView")})),a.default.subscribe("_changeCloseBtn",(function(e,t){c("changeCloseBtnStatus",t||"0")})),a.default.subscribe("__setTitle",(function(e,t){c("setTitle",t||" ")})),a.default.subscribe("_checkNetworkStatus",(function(e,t){c("checkNetworkStatus",{pingIp:void 0,url:void 0})})),a.default.subscribe("_checkWebsocketStatus",(function(e,t){c("checkWebsocketStatus")})),a.default.subscribe("__jumpToUrl",(function(e,t){c("jumpToUrl",t)}));var d=l;t.default=d}]);